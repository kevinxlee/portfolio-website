var ey=c=>{throw TypeError(c)};var Mh=(c,t,e)=>t.has(c)||ey("Cannot "+e);var Jt=(c,t,e)=>(Mh(c,t,"read from private field"),e?e.call(c):t.get(c)),Fn=(c,t,e)=>t.has(c)?ey("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(c):t.set(c,e),Ye=(c,t,e,i)=>(Mh(c,t,"write to private field"),i?i.call(c,e):t.set(c,e),e),Un=(c,t,e)=>(Mh(c,t,"access private method"),e);var ny=(c,t,e,i)=>({set _(a){Ye(c,t,a,e)},get _(){return Jt(c,t,i)}});function NS(c,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in c)){const o=Object.getOwnPropertyDescriptor(i,a);o&&Object.defineProperty(c,a,o.get?o:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function Zr(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Dh={exports:{}},Dr={};var iy;function kS(){if(iy)return Dr;iy=1;var c=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:c,type:i,key:l,ref:a!==void 0?a:null,props:o}}return Dr.Fragment=t,Dr.jsx=e,Dr.jsxs=e,Dr}var sy;function BS(){return sy||(sy=1,Dh.exports=kS()),Dh.exports}var W=BS(),Oh={exports:{}},bt={};var ay;function PS(){if(ay)return bt;ay=1;var c=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function A(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function T(O,G,K){this.props=O,this.context=G,this.refs=_,this.updater=K||E}T.prototype.isReactComponent={},T.prototype.setState=function(O,G){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,G,"setState")},T.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function R(){}R.prototype=T.prototype;function C(O,G,K){this.props=O,this.context=G,this.refs=_,this.updater=K||E}var D=C.prototype=new R;D.constructor=C,S(D,T.prototype),D.isPureReactComponent=!0;var N=Array.isArray;function B(){}var P={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function X(O,G,K){var tt=K.ref;return{$$typeof:c,type:O,key:G,ref:tt!==void 0?tt:null,props:K}}function Z(O,G){return X(O.type,G,O.props)}function J(O){return typeof O=="object"&&O!==null&&O.$$typeof===c}function lt(O){var G={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(K){return G[K]})}var ct=/\/+/g;function at(O,G){return typeof O=="object"&&O!==null&&O.key!=null?lt(""+O.key):G.toString(36)}function pt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(B,B):(O.status="pending",O.then(function(G){O.status==="pending"&&(O.status="fulfilled",O.value=G)},function(G){O.status==="pending"&&(O.status="rejected",O.reason=G)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function L(O,G,K,tt,it){var ht=typeof O;(ht==="undefined"||ht==="boolean")&&(O=null);var ot=!1;if(O===null)ot=!0;else switch(ht){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(O.$$typeof){case c:case t:ot=!0;break;case g:return ot=O._init,L(ot(O._payload),G,K,tt,it)}}if(ot)return it=it(O),ot=tt===""?"."+at(O,0):tt,N(it)?(K="",ot!=null&&(K=ot.replace(ct,"$&/")+"/"),L(it,G,K,"",function(Bt){return Bt})):it!=null&&(J(it)&&(it=Z(it,K+(it.key==null||O&&O.key===it.key?"":(""+it.key).replace(ct,"$&/")+"/")+ot)),G.push(it)),1;ot=0;var Ht=tt===""?".":tt+":";if(N(O))for(var _t=0;_t<O.length;_t++)tt=O[_t],ht=Ht+at(tt,_t),ot+=L(tt,G,K,ht,it);else if(_t=A(O),typeof _t=="function")for(O=_t.call(O),_t=0;!(tt=O.next()).done;)tt=tt.value,ht=Ht+at(tt,_t++),ot+=L(tt,G,K,ht,it);else if(ht==="object"){if(typeof O.then=="function")return L(pt(O),G,K,tt,it);throw G=String(O),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return ot}function H(O,G,K){if(O==null)return O;var tt=[],it=0;return L(O,tt,"","",function(ht){return G.call(K,ht,it++)}),tt}function Q(O){if(O._status===-1){var G=O._result;G=G(),G.then(function(K){(O._status===0||O._status===-1)&&(O._status=1,O._result=K)},function(K){(O._status===0||O._status===-1)&&(O._status=2,O._result=K)}),O._status===-1&&(O._status=0,O._result=G)}if(O._status===1)return O._result.default;throw O._result}var ut=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},yt={map:H,forEach:function(O,G,K){H(O,function(){G.apply(this,arguments)},K)},count:function(O){var G=0;return H(O,function(){G++}),G},toArray:function(O){return H(O,function(G){return G})||[]},only:function(O){if(!J(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return bt.Activity=y,bt.Children=yt,bt.Component=T,bt.Fragment=e,bt.Profiler=a,bt.PureComponent=C,bt.StrictMode=i,bt.Suspense=d,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,bt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return P.H.useMemoCache(O)}},bt.cache=function(O){return function(){return O.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(O,G,K){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var tt=S({},O.props),it=O.key;if(G!=null)for(ht in G.key!==void 0&&(it=""+G.key),G)!j.call(G,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&G.ref===void 0||(tt[ht]=G[ht]);var ht=arguments.length-2;if(ht===1)tt.children=K;else if(1<ht){for(var ot=Array(ht),Ht=0;Ht<ht;Ht++)ot[Ht]=arguments[Ht+2];tt.children=ot}return X(O.type,it,tt)},bt.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},bt.createElement=function(O,G,K){var tt,it={},ht=null;if(G!=null)for(tt in G.key!==void 0&&(ht=""+G.key),G)j.call(G,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(it[tt]=G[tt]);var ot=arguments.length-2;if(ot===1)it.children=K;else if(1<ot){for(var Ht=Array(ot),_t=0;_t<ot;_t++)Ht[_t]=arguments[_t+2];it.children=Ht}if(O&&O.defaultProps)for(tt in ot=O.defaultProps,ot)it[tt]===void 0&&(it[tt]=ot[tt]);return X(O,ht,it)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(O){return{$$typeof:h,render:O}},bt.isValidElement=J,bt.lazy=function(O){return{$$typeof:g,_payload:{_status:-1,_result:O},_init:Q}},bt.memo=function(O,G){return{$$typeof:f,type:O,compare:G===void 0?null:G}},bt.startTransition=function(O){var G=P.T,K={};P.T=K;try{var tt=O(),it=P.S;it!==null&&it(K,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(B,ut)}catch(ht){ut(ht)}finally{G!==null&&K.types!==null&&(G.types=K.types),P.T=G}},bt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},bt.use=function(O){return P.H.use(O)},bt.useActionState=function(O,G,K){return P.H.useActionState(O,G,K)},bt.useCallback=function(O,G){return P.H.useCallback(O,G)},bt.useContext=function(O){return P.H.useContext(O)},bt.useDebugValue=function(){},bt.useDeferredValue=function(O,G){return P.H.useDeferredValue(O,G)},bt.useEffect=function(O,G){return P.H.useEffect(O,G)},bt.useEffectEvent=function(O){return P.H.useEffectEvent(O)},bt.useId=function(){return P.H.useId()},bt.useImperativeHandle=function(O,G,K){return P.H.useImperativeHandle(O,G,K)},bt.useInsertionEffect=function(O,G){return P.H.useInsertionEffect(O,G)},bt.useLayoutEffect=function(O,G){return P.H.useLayoutEffect(O,G)},bt.useMemo=function(O,G){return P.H.useMemo(O,G)},bt.useOptimistic=function(O,G){return P.H.useOptimistic(O,G)},bt.useReducer=function(O,G,K){return P.H.useReducer(O,G,K)},bt.useRef=function(O){return P.H.useRef(O)},bt.useState=function(O){return P.H.useState(O)},bt.useSyncExternalStore=function(O,G,K){return P.H.useSyncExternalStore(O,G,K)},bt.useTransition=function(){return P.H.useTransition()},bt.version="19.2.0",bt}var ry;function Td(){return ry||(ry=1,Oh.exports=PS()),Oh.exports}var x=Td();const De=Zr(x),zS=NS({__proto__:null,default:De},[x]);var Lh={exports:{}},Ne={};var oy;function FS(){if(oy)return Ne;oy=1;var c=Td();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var l=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ne.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ne.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,g)},Ne.flushSync=function(d){var f=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=f,i.p=g,i.d.f()}},Ne.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},Ne.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Ne.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=h(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:A}):g==="script"&&i.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ne.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=h(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},Ne.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=h(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ne.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=h(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},Ne.requestFormReset=function(d){i.d.r(d)},Ne.unstable_batchedUpdates=function(d,f){return d(f)},Ne.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},Ne.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ne.version="19.2.0",Ne}var ly;function wv(){if(ly)return Lh.exports;ly=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(t){console.error(t)}}return c(),Lh.exports=FS(),Lh.exports}var US=wv();const Aa=Zr(US);function Gr(){return Gr=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(c[i]=e[i])}return c},Gr.apply(this,arguments)}var Yi;(function(c){c.Pop="POP",c.Push="PUSH",c.Replace="REPLACE"})(Yi||(Yi={}));const cy="popstate";function IS(c){c===void 0&&(c={});function t(i,a){let{pathname:o,search:l,hash:h}=i.location;return sd("",{pathname:o,search:l,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(i,a){return typeof a=="string"?a:Il(a)}return jS(t,e,null,c)}function ge(c,t){if(c===!1||c===null||typeof c>"u")throw new Error(t)}function Cd(c,t){if(!c){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function HS(){return Math.random().toString(36).substr(2,8)}function uy(c,t){return{usr:c.state,key:c.key,idx:t}}function sd(c,t,e,i){return e===void 0&&(e=null),Gr({pathname:typeof c=="string"?c:c.pathname,search:"",hash:""},typeof t=="string"?La(t):t,{state:e,key:t&&t.key||i||HS()})}function Il(c){let{pathname:t="/",search:e="",hash:i=""}=c;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function La(c){let t={};if(c){let e=c.indexOf("#");e>=0&&(t.hash=c.substr(e),c=c.substr(0,e));let i=c.indexOf("?");i>=0&&(t.search=c.substr(i),c=c.substr(0,i)),c&&(t.pathname=c)}return t}function jS(c,t,e,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:o=!1}=i,l=a.history,h=Yi.Pop,d=null,f=g();f==null&&(f=0,l.replaceState(Gr({},l.state,{idx:f}),""));function g(){return(l.state||{idx:null}).idx}function y(){h=Yi.Pop;let _=g(),T=_==null?null:_-f;f=_,d&&d({action:h,location:S.location,delta:T})}function v(_,T){h=Yi.Push;let R=sd(S.location,_,T);f=g()+1;let C=uy(R,f),D=S.createHref(R);try{l.pushState(C,"",D)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(D)}o&&d&&d({action:h,location:S.location,delta:1})}function A(_,T){h=Yi.Replace;let R=sd(S.location,_,T);f=g();let C=uy(R,f),D=S.createHref(R);l.replaceState(C,"",D),o&&d&&d({action:h,location:S.location,delta:0})}function E(_){let T=a.location.origin!=="null"?a.location.origin:a.location.href,R=typeof _=="string"?_:Il(_);return R=R.replace(/ $/,"%20"),ge(T,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,T)}let S={get action(){return h},get location(){return c(a,l)},listen(_){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(cy,y),d=_,()=>{a.removeEventListener(cy,y),d=null}},createHref(_){return t(a,_)},createURL:E,encodeLocation(_){let T=E(_);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:v,replace:A,go(_){return l.go(_)}};return S}var hy;(function(c){c.data="data",c.deferred="deferred",c.redirect="redirect",c.error="error"})(hy||(hy={}));function GS(c,t,e){return e===void 0&&(e="/"),VS(c,t,e)}function VS(c,t,e,i){let a=typeof t=="string"?La(t):t,o=xd(a.pathname||"/",e);if(o==null)return null;let l=Tv(c);qS(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let f=iE(o);h=tE(l[d],f)}return h}function Tv(c,t,e,i){t===void 0&&(t=[]),e===void 0&&(e=[]),i===void 0&&(i="");let a=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(ge(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let f=$i([i,d.relativePath]),g=e.concat(d);o.children&&o.children.length>0&&(ge(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Tv(o.children,t,g,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:ZS(f,o.index),routesMeta:g})};return c.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))a(o,l);else for(let d of Cv(o.path))a(o,l,d)}),t}function Cv(c){let t=c.split("/");if(t.length===0)return[];let[e,...i]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let l=Cv(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&h.push(...l),h.map(d=>c.startsWith("/")&&d===""?"/":d)}function qS(c){c.sort((t,e)=>t.score!==e.score?e.score-t.score:JS(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}const XS=/^:[\w-]+$/,YS=3,$S=2,KS=1,WS=10,QS=-2,dy=c=>c==="*";function ZS(c,t){let e=c.split("/"),i=e.length;return e.some(dy)&&(i+=QS),t&&(i+=$S),e.filter(a=>!dy(a)).reduce((a,o)=>a+(XS.test(o)?YS:o===""?KS:WS),i)}function JS(c,t){return c.length===t.length&&c.slice(0,-1).every((i,a)=>i===t[a])?c[c.length-1]-t[t.length-1]:0}function tE(c,t,e){let{routesMeta:i}=c,a={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],f=h===i.length-1,g=o==="/"?t:t.slice(o.length)||"/",y=eE({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!y)return null;Object.assign(a,y.params),l.push({params:a,pathname:$i([o,y.pathname]),pathnameBase:lE($i([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=$i([o,y.pathnameBase]))}return l}function eE(c,t){typeof c=="string"&&(c={path:c,caseSensitive:!1,end:!0});let[e,i]=nE(c.path,c.caseSensitive,c.end),a=t.match(e);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((f,g,y)=>{let{paramName:v,isOptional:A}=g;if(v==="*"){let S=h[y]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const E=h[y];return A&&!E?f[v]=void 0:f[v]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:c}}function nE(c,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),Cd(c==="*"||!c.endsWith("*")||c.endsWith("/*"),'Route path "'+c+'" will be treated as if it were '+('"'+c.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+c.replace(/\*$/,"/*")+'".'));let i=[],a="^"+c.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return c.endsWith("*")?(i.push({paramName:"*"}),a+=c==="*"||c==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":c!==""&&c!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function iE(c){try{return c.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Cd(!1,'The URL path "'+c+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),c}}function xd(c,t){if(t==="/")return c;if(!c.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=c.charAt(e);return i&&i!=="/"?null:c.slice(e)||"/"}const sE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aE=c=>sE.test(c);function rE(c,t){t===void 0&&(t="/");let{pathname:e,search:i="",hash:a=""}=typeof c=="string"?La(c):c,o;if(e)if(aE(e))o=e;else{if(e.includes("//")){let l=e;e=e.replace(/\/\/+/g,"/"),Cd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+e))}e.startsWith("/")?o=fy(e.substring(1),"/"):o=fy(e,t)}else o=t;return{pathname:o,search:cE(i),hash:uE(a)}}function fy(c,t){let e=t.replace(/\/+$/,"").split("/");return c.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Nh(c,t,e,i){return"Cannot include a '"+c+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oE(c){return c.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function xv(c,t){let e=oE(c);return t?e.map((i,a)=>a===e.length-1?i.pathname:i.pathnameBase):e.map(i=>i.pathnameBase)}function Rv(c,t,e,i){i===void 0&&(i=!1);let a;typeof c=="string"?a=La(c):(a=Gr({},c),ge(!a.pathname||!a.pathname.includes("?"),Nh("?","pathname","search",a)),ge(!a.pathname||!a.pathname.includes("#"),Nh("#","pathname","hash",a)),ge(!a.search||!a.search.includes("#"),Nh("#","search","hash",a)));let o=c===""||a.pathname==="",l=o?"/":a.pathname,h;if(l==null)h=e;else{let y=t.length-1;if(!i&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;a.pathname=v.join("/")}h=y>=0?t[y]:"/"}let d=rE(a,h),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}const $i=c=>c.join("/").replace(/\/\/+/g,"/"),lE=c=>c.replace(/\/+$/,"").replace(/^\/*/,"/"),cE=c=>!c||c==="?"?"":c.startsWith("?")?c:"?"+c,uE=c=>!c||c==="#"?"":c.startsWith("#")?c:"#"+c;function hE(c){return c!=null&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.internal=="boolean"&&"data"in c}const Mv=["post","put","patch","delete"];new Set(Mv);const dE=["get",...Mv];new Set(dE);function Vr(){return Vr=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(c[i]=e[i])}return c},Vr.apply(this,arguments)}const Rd=x.createContext(null),fE=x.createContext(null),Cs=x.createContext(null),Wl=x.createContext(null),xs=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Dv=x.createContext(null);function pE(c,t){let{relative:e}=t===void 0?{}:t;Jr()||ge(!1);let{basename:i,navigator:a}=x.useContext(Cs),{hash:o,pathname:l,search:h}=Lv(c,{relative:e}),d=l;return i!=="/"&&(d=l==="/"?i:$i([i,l])),a.createHref({pathname:d,search:h,hash:o})}function Jr(){return x.useContext(Wl)!=null}function Ql(){return Jr()||ge(!1),x.useContext(Wl).location}function Ov(c){x.useContext(Cs).static||x.useLayoutEffect(c)}function gE(){let{isDataRoute:c}=x.useContext(xs);return c?RE():mE()}function mE(){Jr()||ge(!1);let c=x.useContext(Rd),{basename:t,future:e,navigator:i}=x.useContext(Cs),{matches:a}=x.useContext(xs),{pathname:o}=Ql(),l=JSON.stringify(xv(a,e.v7_relativeSplatPath)),h=x.useRef(!1);return Ov(()=>{h.current=!0}),x.useCallback(function(f,g){if(g===void 0&&(g={}),!h.current)return;if(typeof f=="number"){i.go(f);return}let y=Rv(f,JSON.parse(l),o,g.relative==="path");c==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:$i([t,y.pathname])),(g.replace?i.replace:i.push)(y,g.state,g)},[t,i,l,o,c])}function Lv(c,t){let{relative:e}=t===void 0?{}:t,{future:i}=x.useContext(Cs),{matches:a}=x.useContext(xs),{pathname:o}=Ql(),l=JSON.stringify(xv(a,i.v7_relativeSplatPath));return x.useMemo(()=>Rv(c,JSON.parse(l),o,e==="path"),[c,l,o,e])}function yE(c,t){return vE(c,t)}function vE(c,t,e,i){Jr()||ge(!1);let{navigator:a}=x.useContext(Cs),{matches:o}=x.useContext(xs),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let f=Ql(),g;if(t){var y;let _=typeof t=="string"?La(t):t;d==="/"||(y=_.pathname)!=null&&y.startsWith(d)||ge(!1),g=_}else g=f;let v=g.pathname||"/",A=v;if(d!=="/"){let _=d.replace(/^\//,"").split("/");A="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let E=GS(c,{pathname:A}),S=_E(E&&E.map(_=>Object.assign({},_,{params:Object.assign({},h,_.params),pathname:$i([d,a.encodeLocation?a.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:$i([d,a.encodeLocation?a.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,e,i);return t&&S?x.createElement(Wl.Provider,{value:{location:Vr({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Yi.Pop}},S):S}function bE(){let c=xE(),t=hE(c)?c.status+" "+c.statusText:c instanceof Error?c.message:JSON.stringify(c),e=c instanceof Error?c.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),e?x.createElement("pre",{style:a},e):null,null)}const AE=x.createElement(bE,null);class SE extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?x.createElement(xs.Provider,{value:this.props.routeContext},x.createElement(Dv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function EE(c){let{routeContext:t,match:e,children:i}=c,a=x.useContext(Rd);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(xs.Provider,{value:t},i)}function _E(c,t,e,i){var a;if(t===void 0&&(t=[]),e===void 0&&(e=null),i===void 0&&(i=null),c==null){var o;if(!e)return null;if(e.errors)c=e.matches;else if((o=i)!=null&&o.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)c=e.matches;else return null}let l=c,h=(a=e)==null?void 0:a.errors;if(h!=null){let g=l.findIndex(y=>y.route.id&&h?.[y.route.id]!==void 0);g>=0||ge(!1),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,f=-1;if(e&&i&&i.v7_partialHydration)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=g),y.route.id){let{loaderData:v,errors:A}=e,E=y.route.loader&&v[y.route.id]===void 0&&(!A||A[y.route.id]===void 0);if(y.route.lazy||E){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((g,y,v)=>{let A,E=!1,S=null,_=null;e&&(A=h&&y.route.id?h[y.route.id]:void 0,S=y.route.errorElement||AE,d&&(f<0&&v===0?(ME("route-fallback"),E=!0,_=null):f===v&&(E=!0,_=y.route.hydrateFallbackElement||null)));let T=t.concat(l.slice(0,v+1)),R=()=>{let C;return A?C=S:E?C=_:y.route.Component?C=x.createElement(y.route.Component,null):y.route.element?C=y.route.element:C=g,x.createElement(EE,{match:y,routeContext:{outlet:g,matches:T,isDataRoute:e!=null},children:C})};return e&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?x.createElement(SE,{location:e.location,revalidation:e.revalidation,component:S,error:A,children:R(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):R()},null)}var Nv=(function(c){return c.UseBlocker="useBlocker",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c})(Nv||{}),kv=(function(c){return c.UseBlocker="useBlocker",c.UseLoaderData="useLoaderData",c.UseActionData="useActionData",c.UseRouteError="useRouteError",c.UseNavigation="useNavigation",c.UseRouteLoaderData="useRouteLoaderData",c.UseMatches="useMatches",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c.UseRouteId="useRouteId",c})(kv||{});function wE(c){let t=x.useContext(Rd);return t||ge(!1),t}function TE(c){let t=x.useContext(fE);return t||ge(!1),t}function CE(c){let t=x.useContext(xs);return t||ge(!1),t}function Bv(c){let t=CE(),e=t.matches[t.matches.length-1];return e.route.id||ge(!1),e.route.id}function xE(){var c;let t=x.useContext(Dv),e=TE(),i=Bv();return t!==void 0?t:(c=e.errors)==null?void 0:c[i]}function RE(){let{router:c}=wE(Nv.UseNavigateStable),t=Bv(kv.UseNavigateStable),e=x.useRef(!1);return Ov(()=>{e.current=!0}),x.useCallback(function(a,o){o===void 0&&(o={}),e.current&&(typeof a=="number"?c.navigate(a):c.navigate(a,Vr({fromRouteId:t},o)))},[c,t])}const py={};function ME(c,t,e){py[c]||(py[c]=!0)}function DE(c,t){c?.v7_startTransition,c?.v7_relativeSplatPath}function ad(c){ge(!1)}function OE(c){let{basename:t="/",children:e=null,location:i,navigationType:a=Yi.Pop,navigator:o,static:l=!1,future:h}=c;Jr()&&ge(!1);let d=t.replace(/^\/*/,"/"),f=x.useMemo(()=>({basename:d,navigator:o,static:l,future:Vr({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof i=="string"&&(i=La(i));let{pathname:g="/",search:y="",hash:v="",state:A=null,key:E="default"}=i,S=x.useMemo(()=>{let _=xd(g,d);return _==null?null:{location:{pathname:_,search:y,hash:v,state:A,key:E},navigationType:a}},[d,g,y,v,A,E,a]);return S==null?null:x.createElement(Cs.Provider,{value:f},x.createElement(Wl.Provider,{children:e,value:S}))}function LE(c){let{children:t,location:e}=c;return yE(rd(t),e)}new Promise(()=>{});function rd(c,t){t===void 0&&(t=[]);let e=[];return x.Children.forEach(c,(i,a)=>{if(!x.isValidElement(i))return;let o=[...t,a];if(i.type===x.Fragment){e.push.apply(e,rd(i.props.children,o));return}i.type!==ad&&ge(!1),!i.props.index||!i.props.children||ge(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=rd(i.props.children,o)),e.push(l)}),e}function od(){return od=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(c[i]=e[i])}return c},od.apply(this,arguments)}function NE(c,t){if(c==null)return{};var e={},i=Object.keys(c),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(e[a]=c[a]);return e}function kE(c){return!!(c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)}function BE(c,t){return c.button===0&&(!t||t==="_self")&&!kE(c)}const PE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zE="6";try{window.__reactRouterVersion=zE}catch{}const FE="startTransition",gy=zS[FE];function UE(c){let{basename:t,children:e,future:i,window:a}=c,o=x.useRef();o.current==null&&(o.current=IS({window:a,v5Compat:!0}));let l=o.current,[h,d]=x.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},g=x.useCallback(y=>{f&&gy?gy(()=>d(y)):d(y)},[d,f]);return x.useLayoutEffect(()=>l.listen(g),[l,g]),x.useEffect(()=>DE(i),[i]),x.createElement(OE,{basename:t,children:e,location:h.location,navigationType:h.action,navigator:l,future:i})}const IE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,my=x.forwardRef(function(t,e){let{onClick:i,relative:a,reloadDocument:o,replace:l,state:h,target:d,to:f,preventScrollReset:g,viewTransition:y}=t,v=NE(t,PE),{basename:A}=x.useContext(Cs),E,S=!1;if(typeof f=="string"&&HE.test(f)&&(E=f,IE))try{let C=new URL(window.location.href),D=f.startsWith("//")?new URL(C.protocol+f):new URL(f),N=xd(D.pathname,A);D.origin===C.origin&&N!=null?f=N+D.search+D.hash:S=!0}catch{}let _=pE(f,{relative:a}),T=jE(f,{replace:l,state:h,target:d,preventScrollReset:g,relative:a,viewTransition:y});function R(C){i&&i(C),C.defaultPrevented||T(C)}return x.createElement("a",od({},v,{href:E||_,onClick:S||o?i:R,ref:e,target:d}))});var yy;(function(c){c.UseScrollRestoration="useScrollRestoration",c.UseSubmit="useSubmit",c.UseSubmitFetcher="useSubmitFetcher",c.UseFetcher="useFetcher",c.useViewTransitionState="useViewTransitionState"})(yy||(yy={}));var vy;(function(c){c.UseFetcher="useFetcher",c.UseFetchers="useFetchers",c.UseScrollRestoration="useScrollRestoration"})(vy||(vy={}));function jE(c,t){let{target:e,replace:i,state:a,preventScrollReset:o,relative:l,viewTransition:h}=t===void 0?{}:t,d=gE(),f=Ql(),g=Lv(c,{relative:l});return x.useCallback(y=>{if(BE(y,e)){y.preventDefault();let v=i!==void 0?i:Il(f)===Il(g);d(c,{replace:v,state:a,preventScrollReset:o,relative:l,viewTransition:h})}},[f,d,g,i,a,e,c,o,l,h])}var kh={exports:{}},Or={},Bh={exports:{}},Ph={};var by;function GE(){return by||(by=1,(function(c){function t(L,H){var Q=L.length;L.push(H);t:for(;0<Q;){var ut=Q-1>>>1,yt=L[ut];if(0<a(yt,H))L[ut]=H,L[Q]=yt,Q=ut;else break t}}function e(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var H=L[0],Q=L.pop();if(Q!==H){L[0]=Q;t:for(var ut=0,yt=L.length,O=yt>>>1;ut<O;){var G=2*(ut+1)-1,K=L[G],tt=G+1,it=L[tt];if(0>a(K,Q))tt<yt&&0>a(it,K)?(L[ut]=it,L[tt]=Q,ut=tt):(L[ut]=K,L[G]=Q,ut=G);else if(tt<yt&&0>a(it,Q))L[ut]=it,L[tt]=Q,ut=tt;else break t}}return H}function a(L,H){var Q=L.sortIndex-H.sortIndex;return Q!==0?Q:L.id-H.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;c.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();c.unstable_now=function(){return l.now()-h}}var d=[],f=[],g=1,y=null,v=3,A=!1,E=!1,S=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(L){for(var H=e(f);H!==null;){if(H.callback===null)i(f);else if(H.startTime<=L)i(f),H.sortIndex=H.expirationTime,t(d,H);else break;H=e(f)}}function N(L){if(S=!1,D(L),!E)if(e(d)!==null)E=!0,B||(B=!0,lt());else{var H=e(f);H!==null&&pt(N,H.startTime-L)}}var B=!1,P=-1,j=5,X=-1;function Z(){return _?!0:!(c.unstable_now()-X<j)}function J(){if(_=!1,B){var L=c.unstable_now();X=L;var H=!0;try{t:{E=!1,S&&(S=!1,R(P),P=-1),A=!0;var Q=v;try{e:{for(D(L),y=e(d);y!==null&&!(y.expirationTime>L&&Z());){var ut=y.callback;if(typeof ut=="function"){y.callback=null,v=y.priorityLevel;var yt=ut(y.expirationTime<=L);if(L=c.unstable_now(),typeof yt=="function"){y.callback=yt,D(L),H=!0;break e}y===e(d)&&i(d),D(L)}else i(d);y=e(d)}if(y!==null)H=!0;else{var O=e(f);O!==null&&pt(N,O.startTime-L),H=!1}}break t}finally{y=null,v=Q,A=!1}H=void 0}}finally{H?lt():B=!1}}}var lt;if(typeof C=="function")lt=function(){C(J)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,at=ct.port2;ct.port1.onmessage=J,lt=function(){at.postMessage(null)}}else lt=function(){T(J,0)};function pt(L,H){P=T(function(){L(c.unstable_now())},H)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(L){L.callback=null},c.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<L?Math.floor(1e3/L):5},c.unstable_getCurrentPriorityLevel=function(){return v},c.unstable_next=function(L){switch(v){case 1:case 2:case 3:var H=3;break;default:H=v}var Q=v;v=H;try{return L()}finally{v=Q}},c.unstable_requestPaint=function(){_=!0},c.unstable_runWithPriority=function(L,H){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var Q=v;v=L;try{return H()}finally{v=Q}},c.unstable_scheduleCallback=function(L,H,Q){var ut=c.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ut+Q:ut):Q=ut,L){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=Q+yt,L={id:g++,callback:H,priorityLevel:L,startTime:Q,expirationTime:yt,sortIndex:-1},Q>ut?(L.sortIndex=Q,t(f,L),e(d)===null&&L===e(f)&&(S?(R(P),P=-1):S=!0,pt(N,Q-ut))):(L.sortIndex=yt,t(d,L),E||A||(E=!0,B||(B=!0,lt()))),L},c.unstable_shouldYield=Z,c.unstable_wrapCallback=function(L){var H=v;return function(){var Q=v;v=H;try{return L.apply(this,arguments)}finally{v=Q}}}})(Ph)),Ph}var Ay;function VE(){return Ay||(Ay=1,Bh.exports=GE()),Bh.exports}var Sy;function qE(){if(Sy)return Or;Sy=1;var c=VE(),t=Td(),e=wv();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var s=n,r=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(r=s.return),n=s.return;while(n)}return s.tag===3?r:null}function l(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(o(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=o(n),s===null)throw Error(i(188));return s!==n?null:n}for(var r=n,u=s;;){var p=r.return;if(p===null)break;var m=p.alternate;if(m===null){if(u=p.return,u!==null){r=u;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===r)return d(p),n;if(m===u)return d(p),s;m=m.sibling}throw Error(i(188))}if(r.return!==u.return)r=p,u=m;else{for(var b=!1,w=p.child;w;){if(w===r){b=!0,r=p,u=m;break}if(w===u){b=!0,u=p,r=m;break}w=w.sibling}if(!b){for(w=m.child;w;){if(w===r){b=!0,r=m,u=p;break}if(w===u){b=!0,u=m,r=p;break}w=w.sibling}if(!b)throw Error(i(189))}}if(r.alternate!==u)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?n:s}function g(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=g(n),s!==null)return s;n=n.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),C=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function lt(n){return n===null||typeof n!="object"?null:(n=J&&n[J]||n["@@iterator"],typeof n=="function"?n:null)}var ct=Symbol.for("react.client.reference");function at(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ct?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case T:return"Profiler";case _:return"StrictMode";case N:return"Suspense";case B:return"SuspenseList";case X:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case E:return"Portal";case C:return n.displayName||"Context";case R:return(n._context.displayName||"Context")+".Consumer";case D:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case P:return s=n.displayName||null,s!==null?s:at(n.type)||"Memo";case j:s=n._payload,n=n._init;try{return at(n(s))}catch{}}return null}var pt=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ut=[],yt=-1;function O(n){return{current:n}}function G(n){0>yt||(n.current=ut[yt],ut[yt]=null,yt--)}function K(n,s){yt++,ut[yt]=n.current,n.current=s}var tt=O(null),it=O(null),ht=O(null),ot=O(null);function Ht(n,s){switch(K(ht,s),K(it,n),K(tt,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?wm(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=wm(s),n=Tm(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}G(tt),K(tt,n)}function _t(){G(tt),G(it),G(ht)}function Bt(n){n.memoizedState!==null&&K(ot,n);var s=tt.current,r=Tm(s,n.type);s!==r&&(K(it,n),K(tt,r))}function Oe(n){it.current===n&&(G(tt),G(it)),ot.current===n&&(G(ot),Cr._currentValue=Q)}var Le,Ct;function xt(n){if(Le===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Le=s&&s[1]||"",Ct=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+n+Ct}var vt=!1;function Kt(n,s){if(!n||vt)return"";vt=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(V){var I=V}Reflect.construct(n,[],$)}else{try{$.call()}catch(V){I=V}n.call($.prototype)}}else{try{throw Error()}catch(V){I=V}($=n())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(V){if(V&&I&&typeof V.stack=="string")return[V.stack,I.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),b=m[0],w=m[1];if(b&&w){var M=b.split(`
`),U=w.split(`
`);for(p=u=0;u<M.length&&!M[u].includes("DetermineComponentFrameRoot");)u++;for(;p<U.length&&!U[p].includes("DetermineComponentFrameRoot");)p++;if(u===M.length||p===U.length)for(u=M.length-1,p=U.length-1;1<=u&&0<=p&&M[u]!==U[p];)p--;for(;1<=u&&0<=p;u--,p--)if(M[u]!==U[p]){if(u!==1||p!==1)do if(u--,p--,0>p||M[u]!==U[p]){var q=`
`+M[u].replace(" at new "," at ");return n.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",n.displayName)),q}while(1<=u&&0<=p);break}}}finally{vt=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?xt(r):""}function hn(n,s){switch(n.tag){case 26:case 27:case 5:return xt(n.type);case 16:return xt("Lazy");case 13:return n.child!==s&&s!==null?xt("Suspense Fallback"):xt("Suspense");case 19:return xt("SuspenseList");case 0:case 15:return Kt(n.type,!1);case 11:return Kt(n.type.render,!1);case 1:return Kt(n.type,!0);case 31:return xt("Activity");default:return""}}function vi(n){try{var s="",r=null;do s+=hn(n,r),r=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Qi=Object.prototype.hasOwnProperty,za=c.unstable_scheduleCallback,bi=c.unstable_cancelCallback,pc=c.unstable_shouldYield,gc=c.unstable_requestPaint,Pe=c.unstable_now,mc=c.unstable_getCurrentPriorityLevel,co=c.unstable_ImmediatePriority,Tn=c.unstable_UserBlockingPriority,Cn=c.unstable_NormalPriority,Nn=c.unstable_LowPriority,Ds=c.unstable_IdlePriority,g0=c.log,m0=c.unstable_setDisableYieldValue,Fa=null,Qe=null;function Ai(n){if(typeof g0=="function"&&m0(n),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(Fa,n)}catch{}}var Ze=Math.clz32?Math.clz32:b0,y0=Math.log,v0=Math.LN2;function b0(n){return n>>>=0,n===0?32:31-(y0(n)/v0|0)|0}var uo=256,ho=262144,fo=4194304;function Zi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function po(n,s,r){var u=n.pendingLanes;if(u===0)return 0;var p=0,m=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var w=u&134217727;return w!==0?(u=w&~m,u!==0?p=Zi(u):(b&=w,b!==0?p=Zi(b):r||(r=w&~n,r!==0&&(p=Zi(r))))):(w=u&~m,w!==0?p=Zi(w):b!==0?p=Zi(b):r||(r=u&~n,r!==0&&(p=Zi(r)))),p===0?0:s!==0&&s!==p&&(s&m)===0&&(m=p&-p,r=s&-s,m>=r||m===32&&(r&4194048)!==0)?s:p}function Ua(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function A0(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function af(){var n=fo;return fo<<=1,(fo&62914560)===0&&(fo=4194304),n}function yc(n){for(var s=[],r=0;31>r;r++)s.push(n);return s}function Ia(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function S0(n,s,r,u,p,m){var b=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var w=n.entanglements,M=n.expirationTimes,U=n.hiddenUpdates;for(r=b&~r;0<r;){var q=31-Ze(r),$=1<<q;w[q]=0,M[q]=-1;var I=U[q];if(I!==null)for(U[q]=null,q=0;q<I.length;q++){var V=I[q];V!==null&&(V.lane&=-536870913)}r&=~$}u!==0&&rf(n,u,0),m!==0&&p===0&&n.tag!==0&&(n.suspendedLanes|=m&~(b&~s))}function rf(n,s,r){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-Ze(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|r&261930}function of(n,s){var r=n.entangledLanes|=s;for(n=n.entanglements;r;){var u=31-Ze(r),p=1<<u;p&s|n[u]&s&&(n[u]|=s),r&=~p}}function lf(n,s){var r=s&-s;return r=(r&42)!==0?1:vc(r),(r&(n.suspendedLanes|s))!==0?0:r}function vc(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function bc(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function cf(){var n=H.p;return n!==0?n:(n=window.event,n===void 0?32:$m(n.type))}function uf(n,s){var r=H.p;try{return H.p=n,s()}finally{H.p=r}}var Si=Math.random().toString(36).slice(2),_e="__reactFiber$"+Si,Ie="__reactProps$"+Si,Os="__reactContainer$"+Si,Ac="__reactEvents$"+Si,E0="__reactListeners$"+Si,_0="__reactHandles$"+Si,hf="__reactResources$"+Si,Ha="__reactMarker$"+Si;function Sc(n){delete n[_e],delete n[Ie],delete n[Ac],delete n[E0],delete n[_0]}function Ls(n){var s=n[_e];if(s)return s;for(var r=n.parentNode;r;){if(s=r[Os]||r[_e]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(n=Lm(n);n!==null;){if(r=n[_e])return r;n=Lm(n)}return s}n=r,r=n.parentNode}return null}function Ns(n){if(n=n[_e]||n[Os]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function ja(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function ks(n){var s=n[hf];return s||(s=n[hf]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ye(n){n[Ha]=!0}var df=new Set,ff={};function Ji(n,s){Bs(n,s),Bs(n+"Capture",s)}function Bs(n,s){for(ff[n]=s,n=0;n<s.length;n++)df.add(s[n])}var w0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pf={},gf={};function T0(n){return Qi.call(gf,n)?!0:Qi.call(pf,n)?!1:w0.test(n)?gf[n]=!0:(pf[n]=!0,!1)}function go(n,s,r){if(T0(s))if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+r)}}function mo(n,s,r){if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+r)}}function Xn(n,s,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(s,r,""+u)}}function dn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function mf(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function C0(n,s,r){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,m=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return p.call(this)},set:function(b){r=""+b,m.call(this,b)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(b){r=""+b},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ec(n){if(!n._valueTracker){var s=mf(n)?"checked":"value";n._valueTracker=C0(n,s,""+n[s])}}function yf(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var r=s.getValue(),u="";return n&&(u=mf(n)?n.checked?"true":"false":n.value),n=u,n!==r?(s.setValue(n),!0):!1}function yo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var x0=/[\n"\\]/g;function fn(n){return n.replace(x0,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function _c(n,s,r,u,p,m,b,w){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),s!=null?b==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+dn(s)):n.value!==""+dn(s)&&(n.value=""+dn(s)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),s!=null?wc(n,b,dn(s)):r!=null?wc(n,b,dn(r)):u!=null&&n.removeAttribute("value"),p==null&&m!=null&&(n.defaultChecked=!!m),p!=null&&(n.checked=p&&typeof p!="function"&&typeof p!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+dn(w):n.removeAttribute("name")}function vf(n,s,r,u,p,m,b,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){Ec(n);return}r=r!=null?""+dn(r):"",s=s!=null?""+dn(s):r,w||s===n.value||(n.value=s),n.defaultValue=s}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=w?n.checked:!!u,n.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b),Ec(n)}function wc(n,s,r){s==="number"&&yo(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Ps(n,s,r,u){if(n=n.options,s){s={};for(var p=0;p<r.length;p++)s["$"+r[p]]=!0;for(r=0;r<n.length;r++)p=s.hasOwnProperty("$"+n[r].value),n[r].selected!==p&&(n[r].selected=p),p&&u&&(n[r].defaultSelected=!0)}else{for(r=""+dn(r),s=null,p=0;p<n.length;p++){if(n[p].value===r){n[p].selected=!0,u&&(n[p].defaultSelected=!0);return}s!==null||n[p].disabled||(s=n[p])}s!==null&&(s.selected=!0)}}function bf(n,s,r){if(s!=null&&(s=""+dn(s),s!==n.value&&(n.value=s),r==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=r!=null?""+dn(r):""}function Af(n,s,r,u){if(s==null){if(u!=null){if(r!=null)throw Error(i(92));if(pt(u)){if(1<u.length)throw Error(i(93));u=u[0]}r=u}r==null&&(r=""),s=r}r=dn(s),n.defaultValue=r,u=n.textContent,u===r&&u!==""&&u!==null&&(n.value=u),Ec(n)}function zs(n,s){if(s){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=s;return}}n.textContent=s}var R0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sf(n,s,r){var u=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,r):typeof r!="number"||r===0||R0.has(s)?s==="float"?n.cssFloat=r:n[s]=(""+r).trim():n[s]=r+"px"}function Ef(n,s,r){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var p in s)u=s[p],s.hasOwnProperty(p)&&r[p]!==u&&Sf(n,p,u)}else for(var m in s)s.hasOwnProperty(m)&&Sf(n,m,s[m])}function Tc(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var M0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),D0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vo(n){return D0.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Yn(){}var Cc=null;function xc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Fs=null,Us=null;function _f(n){var s=Ns(n);if(s&&(n=s.stateNode)){var r=n[Ie]||null;t:switch(n=s.stateNode,s.type){case"input":if(_c(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+fn(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var u=r[s];if(u!==n&&u.form===n.form){var p=u[Ie]||null;if(!p)throw Error(i(90));_c(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<r.length;s++)u=r[s],u.form===n.form&&yf(u)}break t;case"textarea":bf(n,r.value,r.defaultValue);break t;case"select":s=r.value,s!=null&&Ps(n,!!r.multiple,s,!1)}}}var Rc=!1;function wf(n,s,r){if(Rc)return n(s,r);Rc=!0;try{var u=n(s);return u}finally{if(Rc=!1,(Fs!==null||Us!==null)&&(al(),Fs&&(s=Fs,n=Us,Us=Fs=null,_f(s),n)))for(s=0;s<n.length;s++)_f(n[s])}}function Ga(n,s){var r=n.stateNode;if(r===null)return null;var u=r[Ie]||null;if(u===null)return null;r=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(i(231,s,typeof r));return r}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mc=!1;if($n)try{var Va={};Object.defineProperty(Va,"passive",{get:function(){Mc=!0}}),window.addEventListener("test",Va,Va),window.removeEventListener("test",Va,Va)}catch{Mc=!1}var Ei=null,Dc=null,bo=null;function Tf(){if(bo)return bo;var n,s=Dc,r=s.length,u,p="value"in Ei?Ei.value:Ei.textContent,m=p.length;for(n=0;n<r&&s[n]===p[n];n++);var b=r-n;for(u=1;u<=b&&s[r-u]===p[m-u];u++);return bo=p.slice(n,1<u?1-u:void 0)}function Ao(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function So(){return!0}function Cf(){return!1}function He(n){function s(r,u,p,m,b){this._reactName=r,this._targetInst=p,this.type=u,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(r=n[w],this[w]=r?r(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?So:Cf,this.isPropagationStopped=Cf,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=So)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=So)},persist:function(){},isPersistent:So}),s}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eo=He(ts),qa=y({},ts,{view:0,detail:0}),O0=He(qa),Oc,Lc,Xa,_o=y({},qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Xa&&(Xa&&n.type==="mousemove"?(Oc=n.screenX-Xa.screenX,Lc=n.screenY-Xa.screenY):Lc=Oc=0,Xa=n),Oc)},movementY:function(n){return"movementY"in n?n.movementY:Lc}}),xf=He(_o),L0=y({},_o,{dataTransfer:0}),N0=He(L0),k0=y({},qa,{relatedTarget:0}),Nc=He(k0),B0=y({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),P0=He(B0),z0=y({},ts,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),F0=He(z0),U0=y({},ts,{data:0}),Rf=He(U0),I0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function G0(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=j0[n])?!!s[n]:!1}function kc(){return G0}var V0=y({},qa,{key:function(n){if(n.key){var s=I0[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ao(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?H0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kc,charCode:function(n){return n.type==="keypress"?Ao(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ao(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),q0=He(V0),X0=y({},_o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mf=He(X0),Y0=y({},qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kc}),$0=He(Y0),K0=y({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),W0=He(K0),Q0=y({},_o,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Z0=He(Q0),J0=y({},ts,{newState:0,oldState:0}),tA=He(J0),eA=[9,13,27,32],Bc=$n&&"CompositionEvent"in window,Ya=null;$n&&"documentMode"in document&&(Ya=document.documentMode);var nA=$n&&"TextEvent"in window&&!Ya,Df=$n&&(!Bc||Ya&&8<Ya&&11>=Ya),Of=" ",Lf=!1;function Nf(n,s){switch(n){case"keyup":return eA.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Is=!1;function iA(n,s){switch(n){case"compositionend":return kf(s);case"keypress":return s.which!==32?null:(Lf=!0,Of);case"textInput":return n=s.data,n===Of&&Lf?null:n;default:return null}}function sA(n,s){if(Is)return n==="compositionend"||!Bc&&Nf(n,s)?(n=Tf(),bo=Dc=Ei=null,Is=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Df&&s.locale!=="ko"?null:s.data;default:return null}}var aA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!aA[n.type]:s==="textarea"}function Pf(n,s,r,u){Fs?Us?Us.push(u):Us=[u]:Fs=u,s=dl(s,"onChange"),0<s.length&&(r=new Eo("onChange","change",null,r,u),n.push({event:r,listeners:s}))}var $a=null,Ka=null;function rA(n){vm(n,0)}function wo(n){var s=ja(n);if(yf(s))return n}function zf(n,s){if(n==="change")return s}var Ff=!1;if($n){var Pc;if($n){var zc="oninput"in document;if(!zc){var Uf=document.createElement("div");Uf.setAttribute("oninput","return;"),zc=typeof Uf.oninput=="function"}Pc=zc}else Pc=!1;Ff=Pc&&(!document.documentMode||9<document.documentMode)}function If(){$a&&($a.detachEvent("onpropertychange",Hf),Ka=$a=null)}function Hf(n){if(n.propertyName==="value"&&wo(Ka)){var s=[];Pf(s,Ka,n,xc(n)),wf(rA,s)}}function oA(n,s,r){n==="focusin"?(If(),$a=s,Ka=r,$a.attachEvent("onpropertychange",Hf)):n==="focusout"&&If()}function lA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return wo(Ka)}function cA(n,s){if(n==="click")return wo(s)}function uA(n,s){if(n==="input"||n==="change")return wo(s)}function hA(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Je=typeof Object.is=="function"?Object.is:hA;function Wa(n,s){if(Je(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var r=Object.keys(n),u=Object.keys(s);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var p=r[u];if(!Qi.call(s,p)||!Je(n[p],s[p]))return!1}return!0}function jf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Gf(n,s){var r=jf(n);n=0;for(var u;r;){if(r.nodeType===3){if(u=n+r.textContent.length,n<=s&&u>=s)return{node:r,offset:s-n};n=u}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=jf(r)}}function Vf(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Vf(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function qf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=yo(n.document);s instanceof n.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)n=s.contentWindow;else break;s=yo(n.document)}return s}function Fc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var dA=$n&&"documentMode"in document&&11>=document.documentMode,Hs=null,Uc=null,Qa=null,Ic=!1;function Xf(n,s,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ic||Hs==null||Hs!==yo(u)||(u=Hs,"selectionStart"in u&&Fc(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Qa&&Wa(Qa,u)||(Qa=u,u=dl(Uc,"onSelect"),0<u.length&&(s=new Eo("onSelect","select",null,s,r),n.push({event:s,listeners:u}),s.target=Hs)))}function es(n,s){var r={};return r[n.toLowerCase()]=s.toLowerCase(),r["Webkit"+n]="webkit"+s,r["Moz"+n]="moz"+s,r}var js={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionrun:es("Transition","TransitionRun"),transitionstart:es("Transition","TransitionStart"),transitioncancel:es("Transition","TransitionCancel"),transitionend:es("Transition","TransitionEnd")},Hc={},Yf={};$n&&(Yf=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function ns(n){if(Hc[n])return Hc[n];if(!js[n])return n;var s=js[n],r;for(r in s)if(s.hasOwnProperty(r)&&r in Yf)return Hc[n]=s[r];return n}var $f=ns("animationend"),Kf=ns("animationiteration"),Wf=ns("animationstart"),fA=ns("transitionrun"),pA=ns("transitionstart"),gA=ns("transitioncancel"),Qf=ns("transitionend"),Zf=new Map,jc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jc.push("scrollEnd");function xn(n,s){Zf.set(n,s),Ji(s,[n])}var To=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},pn=[],Gs=0,Gc=0;function Co(){for(var n=Gs,s=Gc=Gs=0;s<n;){var r=pn[s];pn[s++]=null;var u=pn[s];pn[s++]=null;var p=pn[s];pn[s++]=null;var m=pn[s];if(pn[s++]=null,u!==null&&p!==null){var b=u.pending;b===null?p.next=p:(p.next=b.next,b.next=p),u.pending=p}m!==0&&Jf(r,p,m)}}function xo(n,s,r,u){pn[Gs++]=n,pn[Gs++]=s,pn[Gs++]=r,pn[Gs++]=u,Gc|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Vc(n,s,r,u){return xo(n,s,r,u),Ro(n)}function is(n,s){return xo(n,null,null,s),Ro(n)}function Jf(n,s,r){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r);for(var p=!1,m=n.return;m!==null;)m.childLanes|=r,u=m.alternate,u!==null&&(u.childLanes|=r),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(p=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,p&&s!==null&&(p=31-Ze(r),n=m.hiddenUpdates,u=n[p],u===null?n[p]=[s]:u.push(s),s.lane=r|536870912),m):null}function Ro(n){if(50<br)throw br=0,Ju=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Vs={};function mA(n,s,r,u){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(n,s,r,u){return new mA(n,s,r,u)}function qc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Kn(n,s){var r=n.alternate;return r===null?(r=tn(n.tag,s,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=s,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,s=n.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function tp(n,s){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,s=r.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Mo(n,s,r,u,p,m){var b=0;if(u=n,typeof n=="function")qc(n)&&(b=1);else if(typeof n=="string")b=SS(n,r,tt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case X:return n=tn(31,r,s,p),n.elementType=X,n.lanes=m,n;case S:return ss(r.children,p,m,s);case _:b=8,p|=24;break;case T:return n=tn(12,r,s,p|2),n.elementType=T,n.lanes=m,n;case N:return n=tn(13,r,s,p),n.elementType=N,n.lanes=m,n;case B:return n=tn(19,r,s,p),n.elementType=B,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C:b=10;break t;case R:b=9;break t;case D:b=11;break t;case P:b=14;break t;case j:b=16,u=null;break t}b=29,r=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=tn(b,r,s,p),s.elementType=n,s.type=u,s.lanes=m,s}function ss(n,s,r,u){return n=tn(7,n,u,s),n.lanes=r,n}function Xc(n,s,r){return n=tn(6,n,null,s),n.lanes=r,n}function ep(n){var s=tn(18,null,null,0);return s.stateNode=n,s}function Yc(n,s,r){return s=tn(4,n.children!==null?n.children:[],n.key,s),s.lanes=r,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var np=new WeakMap;function gn(n,s){if(typeof n=="object"&&n!==null){var r=np.get(n);return r!==void 0?r:(s={value:n,source:s,stack:vi(s)},np.set(n,s),s)}return{value:n,source:s,stack:vi(s)}}var qs=[],Xs=0,Do=null,Za=0,mn=[],yn=0,_i=null,kn=1,Bn="";function Wn(n,s){qs[Xs++]=Za,qs[Xs++]=Do,Do=n,Za=s}function ip(n,s,r){mn[yn++]=kn,mn[yn++]=Bn,mn[yn++]=_i,_i=n;var u=kn;n=Bn;var p=32-Ze(u)-1;u&=~(1<<p),r+=1;var m=32-Ze(s)+p;if(30<m){var b=p-p%5;m=(u&(1<<b)-1).toString(32),u>>=b,p-=b,kn=1<<32-Ze(s)+p|r<<p|u,Bn=m+n}else kn=1<<m|r<<p|u,Bn=n}function $c(n){n.return!==null&&(Wn(n,1),ip(n,1,0))}function Kc(n){for(;n===Do;)Do=qs[--Xs],qs[Xs]=null,Za=qs[--Xs],qs[Xs]=null;for(;n===_i;)_i=mn[--yn],mn[yn]=null,Bn=mn[--yn],mn[yn]=null,kn=mn[--yn],mn[yn]=null}function sp(n,s){mn[yn++]=kn,mn[yn++]=Bn,mn[yn++]=_i,kn=s.id,Bn=s.overflow,_i=n}var we=null,Wt=null,Nt=!1,wi=null,vn=!1,Wc=Error(i(519));function Ti(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ja(gn(s,n)),Wc}function ap(n){var s=n.stateNode,r=n.type,u=n.memoizedProps;switch(s[_e]=n,s[Ie]=u,r){case"dialog":Mt("cancel",s),Mt("close",s);break;case"iframe":case"object":case"embed":Mt("load",s);break;case"video":case"audio":for(r=0;r<Sr.length;r++)Mt(Sr[r],s);break;case"source":Mt("error",s);break;case"img":case"image":case"link":Mt("error",s),Mt("load",s);break;case"details":Mt("toggle",s);break;case"input":Mt("invalid",s),vf(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Mt("invalid",s);break;case"textarea":Mt("invalid",s),Af(s,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||u.suppressHydrationWarning===!0||Em(s.textContent,r)?(u.popover!=null&&(Mt("beforetoggle",s),Mt("toggle",s)),u.onScroll!=null&&Mt("scroll",s),u.onScrollEnd!=null&&Mt("scrollend",s),u.onClick!=null&&(s.onclick=Yn),s=!0):s=!1,s||Ti(n,!0)}function rp(n){for(we=n.return;we;)switch(we.tag){case 5:case 31:case 13:vn=!1;return;case 27:case 3:vn=!0;return;default:we=we.return}}function Ys(n){if(n!==we)return!1;if(!Nt)return rp(n),Nt=!0,!1;var s=n.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||ph(n.type,n.memoizedProps)),r=!r),r&&Wt&&Ti(n),rp(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Wt=Om(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Wt=Om(n)}else s===27?(s=Wt,Ui(n.type)?(n=bh,bh=null,Wt=n):Wt=s):Wt=we?An(n.stateNode.nextSibling):null;return!0}function as(){Wt=we=null,Nt=!1}function Qc(){var n=wi;return n!==null&&(qe===null?qe=n:qe.push.apply(qe,n),wi=null),n}function Ja(n){wi===null?wi=[n]:wi.push(n)}var Zc=O(null),rs=null,Qn=null;function Ci(n,s,r){K(Zc,s._currentValue),s._currentValue=r}function Zn(n){n._currentValue=Zc.current,G(Zc)}function Jc(n,s,r){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===r)break;n=n.return}}function tu(n,s,r,u){var p=n.child;for(p!==null&&(p.return=n);p!==null;){var m=p.dependencies;if(m!==null){var b=p.child;m=m.firstContext;t:for(;m!==null;){var w=m;m=p;for(var M=0;M<s.length;M++)if(w.context===s[M]){m.lanes|=r,w=m.alternate,w!==null&&(w.lanes|=r),Jc(m.return,r,n),u||(b=null);break t}m=w.next}}else if(p.tag===18){if(b=p.return,b===null)throw Error(i(341));b.lanes|=r,m=b.alternate,m!==null&&(m.lanes|=r),Jc(b,r,n),b=null}else b=p.child;if(b!==null)b.return=p;else for(b=p;b!==null;){if(b===n){b=null;break}if(p=b.sibling,p!==null){p.return=b.return,b=p;break}b=b.return}p=b}}function $s(n,s,r,u){n=null;for(var p=s,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var b=p.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var w=p.type;Je(p.pendingProps.value,b.value)||(n!==null?n.push(w):n=[w])}}else if(p===ot.current){if(b=p.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(n!==null?n.push(Cr):n=[Cr])}p=p.return}n!==null&&tu(s,n,r,u),s.flags|=262144}function Oo(n){for(n=n.firstContext;n!==null;){if(!Je(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function os(n){rs=n,Qn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Te(n){return op(rs,n)}function Lo(n,s){return rs===null&&os(n),op(n,s)}function op(n,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},Qn===null){if(n===null)throw Error(i(308));Qn=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Qn=Qn.next=s;return r}var yA=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(r,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(r){return r()})}},vA=c.unstable_scheduleCallback,bA=c.unstable_NormalPriority,ue={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function eu(){return{controller:new yA,data:new Map,refCount:0}}function tr(n){n.refCount--,n.refCount===0&&vA(bA,function(){n.controller.abort()})}var er=null,nu=0,Ks=0,Ws=null;function AA(n,s){if(er===null){var r=er=[];nu=0,Ks=ah(),Ws={status:"pending",value:void 0,then:function(u){r.push(u)}}}return nu++,s.then(lp,lp),s}function lp(){if(--nu===0&&er!==null){Ws!==null&&(Ws.status="fulfilled");var n=er;er=null,Ks=0,Ws=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function SA(n,s){var r=[],u={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var p=0;p<r.length;p++)(0,r[p])(s)},function(p){for(u.status="rejected",u.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),u}var cp=L.S;L.S=function(n,s){Xg=Pe(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&AA(n,s),cp!==null&&cp(n,s)};var ls=O(null);function iu(){var n=ls.current;return n!==null?n:Xt.pooledCache}function No(n,s){s===null?K(ls,ls.current):K(ls,s.pool)}function up(){var n=iu();return n===null?null:{parent:ue._currentValue,pool:n}}var Qs=Error(i(460)),su=Error(i(474)),ko=Error(i(542)),Bo={then:function(){}};function hp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function dp(n,s,r){switch(r=n[r],r===void 0?n.push(s):r!==s&&(s.then(Yn,Yn),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,pp(n),n;default:if(typeof s.status=="string")s.then(Yn,Yn);else{if(n=Xt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=u}},function(u){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,pp(n),n}throw us=s,Qs}}function cs(n){try{var s=n._init;return s(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(us=r,Qs):r}}var us=null;function fp(){if(us===null)throw Error(i(459));var n=us;return us=null,n}function pp(n){if(n===Qs||n===ko)throw Error(i(483))}var Zs=null,nr=0;function Po(n){var s=nr;return nr+=1,Zs===null&&(Zs=[]),dp(Zs,n,s)}function ir(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function zo(n,s){throw s.$$typeof===v?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function gp(n){function s(z,k){if(n){var F=z.deletions;F===null?(z.deletions=[k],z.flags|=16):F.push(k)}}function r(z,k){if(!n)return null;for(;k!==null;)s(z,k),k=k.sibling;return null}function u(z){for(var k=new Map;z!==null;)z.key!==null?k.set(z.key,z):k.set(z.index,z),z=z.sibling;return k}function p(z,k){return z=Kn(z,k),z.index=0,z.sibling=null,z}function m(z,k,F){return z.index=F,n?(F=z.alternate,F!==null?(F=F.index,F<k?(z.flags|=67108866,k):F):(z.flags|=67108866,k)):(z.flags|=1048576,k)}function b(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function w(z,k,F,Y){return k===null||k.tag!==6?(k=Xc(F,z.mode,Y),k.return=z,k):(k=p(k,F),k.return=z,k)}function M(z,k,F,Y){var dt=F.type;return dt===S?q(z,k,F.props.children,Y,F.key):k!==null&&(k.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===j&&cs(dt)===k.type)?(k=p(k,F.props),ir(k,F),k.return=z,k):(k=Mo(F.type,F.key,F.props,null,z.mode,Y),ir(k,F),k.return=z,k)}function U(z,k,F,Y){return k===null||k.tag!==4||k.stateNode.containerInfo!==F.containerInfo||k.stateNode.implementation!==F.implementation?(k=Yc(F,z.mode,Y),k.return=z,k):(k=p(k,F.children||[]),k.return=z,k)}function q(z,k,F,Y,dt){return k===null||k.tag!==7?(k=ss(F,z.mode,Y,dt),k.return=z,k):(k=p(k,F),k.return=z,k)}function $(z,k,F){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Xc(""+k,z.mode,F),k.return=z,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case A:return F=Mo(k.type,k.key,k.props,null,z.mode,F),ir(F,k),F.return=z,F;case E:return k=Yc(k,z.mode,F),k.return=z,k;case j:return k=cs(k),$(z,k,F)}if(pt(k)||lt(k))return k=ss(k,z.mode,F,null),k.return=z,k;if(typeof k.then=="function")return $(z,Po(k),F);if(k.$$typeof===C)return $(z,Lo(z,k),F);zo(z,k)}return null}function I(z,k,F,Y){var dt=k!==null?k.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return dt!==null?null:w(z,k,""+F,Y);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===dt?M(z,k,F,Y):null;case E:return F.key===dt?U(z,k,F,Y):null;case j:return F=cs(F),I(z,k,F,Y)}if(pt(F)||lt(F))return dt!==null?null:q(z,k,F,Y,null);if(typeof F.then=="function")return I(z,k,Po(F),Y);if(F.$$typeof===C)return I(z,k,Lo(z,F),Y);zo(z,F)}return null}function V(z,k,F,Y,dt){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return z=z.get(F)||null,w(k,z,""+Y,dt);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return z=z.get(Y.key===null?F:Y.key)||null,M(k,z,Y,dt);case E:return z=z.get(Y.key===null?F:Y.key)||null,U(k,z,Y,dt);case j:return Y=cs(Y),V(z,k,F,Y,dt)}if(pt(Y)||lt(Y))return z=z.get(F)||null,q(k,z,Y,dt,null);if(typeof Y.then=="function")return V(z,k,F,Po(Y),dt);if(Y.$$typeof===C)return V(z,k,F,Lo(k,Y),dt);zo(k,Y)}return null}function st(z,k,F,Y){for(var dt=null,Pt=null,rt=k,wt=k=0,Ot=null;rt!==null&&wt<F.length;wt++){rt.index>wt?(Ot=rt,rt=null):Ot=rt.sibling;var zt=I(z,rt,F[wt],Y);if(zt===null){rt===null&&(rt=Ot);break}n&&rt&&zt.alternate===null&&s(z,rt),k=m(zt,k,wt),Pt===null?dt=zt:Pt.sibling=zt,Pt=zt,rt=Ot}if(wt===F.length)return r(z,rt),Nt&&Wn(z,wt),dt;if(rt===null){for(;wt<F.length;wt++)rt=$(z,F[wt],Y),rt!==null&&(k=m(rt,k,wt),Pt===null?dt=rt:Pt.sibling=rt,Pt=rt);return Nt&&Wn(z,wt),dt}for(rt=u(rt);wt<F.length;wt++)Ot=V(rt,z,wt,F[wt],Y),Ot!==null&&(n&&Ot.alternate!==null&&rt.delete(Ot.key===null?wt:Ot.key),k=m(Ot,k,wt),Pt===null?dt=Ot:Pt.sibling=Ot,Pt=Ot);return n&&rt.forEach(function(Vi){return s(z,Vi)}),Nt&&Wn(z,wt),dt}function gt(z,k,F,Y){if(F==null)throw Error(i(151));for(var dt=null,Pt=null,rt=k,wt=k=0,Ot=null,zt=F.next();rt!==null&&!zt.done;wt++,zt=F.next()){rt.index>wt?(Ot=rt,rt=null):Ot=rt.sibling;var Vi=I(z,rt,zt.value,Y);if(Vi===null){rt===null&&(rt=Ot);break}n&&rt&&Vi.alternate===null&&s(z,rt),k=m(Vi,k,wt),Pt===null?dt=Vi:Pt.sibling=Vi,Pt=Vi,rt=Ot}if(zt.done)return r(z,rt),Nt&&Wn(z,wt),dt;if(rt===null){for(;!zt.done;wt++,zt=F.next())zt=$(z,zt.value,Y),zt!==null&&(k=m(zt,k,wt),Pt===null?dt=zt:Pt.sibling=zt,Pt=zt);return Nt&&Wn(z,wt),dt}for(rt=u(rt);!zt.done;wt++,zt=F.next())zt=V(rt,z,wt,zt.value,Y),zt!==null&&(n&&zt.alternate!==null&&rt.delete(zt.key===null?wt:zt.key),k=m(zt,k,wt),Pt===null?dt=zt:Pt.sibling=zt,Pt=zt);return n&&rt.forEach(function(LS){return s(z,LS)}),Nt&&Wn(z,wt),dt}function Vt(z,k,F,Y){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:t:{for(var dt=F.key;k!==null;){if(k.key===dt){if(dt=F.type,dt===S){if(k.tag===7){r(z,k.sibling),Y=p(k,F.props.children),Y.return=z,z=Y;break t}}else if(k.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===j&&cs(dt)===k.type){r(z,k.sibling),Y=p(k,F.props),ir(Y,F),Y.return=z,z=Y;break t}r(z,k);break}else s(z,k);k=k.sibling}F.type===S?(Y=ss(F.props.children,z.mode,Y,F.key),Y.return=z,z=Y):(Y=Mo(F.type,F.key,F.props,null,z.mode,Y),ir(Y,F),Y.return=z,z=Y)}return b(z);case E:t:{for(dt=F.key;k!==null;){if(k.key===dt)if(k.tag===4&&k.stateNode.containerInfo===F.containerInfo&&k.stateNode.implementation===F.implementation){r(z,k.sibling),Y=p(k,F.children||[]),Y.return=z,z=Y;break t}else{r(z,k);break}else s(z,k);k=k.sibling}Y=Yc(F,z.mode,Y),Y.return=z,z=Y}return b(z);case j:return F=cs(F),Vt(z,k,F,Y)}if(pt(F))return st(z,k,F,Y);if(lt(F)){if(dt=lt(F),typeof dt!="function")throw Error(i(150));return F=dt.call(F),gt(z,k,F,Y)}if(typeof F.then=="function")return Vt(z,k,Po(F),Y);if(F.$$typeof===C)return Vt(z,k,Lo(z,F),Y);zo(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,k!==null&&k.tag===6?(r(z,k.sibling),Y=p(k,F),Y.return=z,z=Y):(r(z,k),Y=Xc(F,z.mode,Y),Y.return=z,z=Y),b(z)):r(z,k)}return function(z,k,F,Y){try{nr=0;var dt=Vt(z,k,F,Y);return Zs=null,dt}catch(rt){if(rt===Qs||rt===ko)throw rt;var Pt=tn(29,rt,null,z.mode);return Pt.lanes=Y,Pt.return=z,Pt}finally{}}}var hs=gp(!0),mp=gp(!1),xi=!1;function au(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ru(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ri(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Mi(n,s,r){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ft&2)!==0){var p=u.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),u.pending=s,s=Ro(n),Jf(n,null,r),s}return xo(n,u,s,r),Ro(n)}function sr(n,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,r|=u,s.lanes=r,of(n,r)}}function ou(n,s){var r=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var p=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?p=m=b:m=m.next=b,r=r.next}while(r!==null);m===null?p=m=s:m=m.next=s}else p=m=s;r={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=s:n.next=s,r.lastBaseUpdate=s}var lu=!1;function ar(){if(lu){var n=Ws;if(n!==null)throw n}}function rr(n,s,r,u){lu=!1;var p=n.updateQueue;xi=!1;var m=p.firstBaseUpdate,b=p.lastBaseUpdate,w=p.shared.pending;if(w!==null){p.shared.pending=null;var M=w,U=M.next;M.next=null,b===null?m=U:b.next=U,b=M;var q=n.alternate;q!==null&&(q=q.updateQueue,w=q.lastBaseUpdate,w!==b&&(w===null?q.firstBaseUpdate=U:w.next=U,q.lastBaseUpdate=M))}if(m!==null){var $=p.baseState;b=0,q=U=M=null,w=m;do{var I=w.lane&-536870913,V=I!==w.lane;if(V?(Dt&I)===I:(u&I)===I){I!==0&&I===Ks&&(lu=!0),q!==null&&(q=q.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});t:{var st=n,gt=w;I=s;var Vt=r;switch(gt.tag){case 1:if(st=gt.payload,typeof st=="function"){$=st.call(Vt,$,I);break t}$=st;break t;case 3:st.flags=st.flags&-65537|128;case 0:if(st=gt.payload,I=typeof st=="function"?st.call(Vt,$,I):st,I==null)break t;$=y({},$,I);break t;case 2:xi=!0}}I=w.callback,I!==null&&(n.flags|=64,V&&(n.flags|=8192),V=p.callbacks,V===null?p.callbacks=[I]:V.push(I))}else V={lane:I,tag:w.tag,payload:w.payload,callback:w.callback,next:null},q===null?(U=q=V,M=$):q=q.next=V,b|=I;if(w=w.next,w===null){if(w=p.shared.pending,w===null)break;V=w,w=V.next,V.next=null,p.lastBaseUpdate=V,p.shared.pending=null}}while(!0);q===null&&(M=$),p.baseState=M,p.firstBaseUpdate=U,p.lastBaseUpdate=q,m===null&&(p.shared.lanes=0),ki|=b,n.lanes=b,n.memoizedState=$}}function yp(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function vp(n,s){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)yp(r[n],s)}var Js=O(null),Fo=O(0);function bp(n,s){n=oi,K(Fo,n),K(Js,s),oi=n|s.baseLanes}function cu(){K(Fo,oi),K(Js,Js.current)}function uu(){oi=Fo.current,G(Js),G(Fo)}var en=O(null),bn=null;function Di(n){var s=n.alternate;K(re,re.current&1),K(en,n),bn===null&&(s===null||Js.current!==null||s.memoizedState!==null)&&(bn=n)}function hu(n){K(re,re.current),K(en,n),bn===null&&(bn=n)}function Ap(n){n.tag===22?(K(re,re.current),K(en,n),bn===null&&(bn=n)):Oi()}function Oi(){K(re,re.current),K(en,en.current)}function nn(n){G(en),bn===n&&(bn=null),G(re)}var re=O(0);function Uo(n){for(var s=n;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||yh(r)||vh(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Jn=0,Et=null,jt=null,he=null,Io=!1,ta=!1,ds=!1,Ho=0,or=0,ea=null,EA=0;function se(){throw Error(i(321))}function du(n,s){if(s===null)return!1;for(var r=0;r<s.length&&r<n.length;r++)if(!Je(n[r],s[r]))return!1;return!0}function fu(n,s,r,u,p,m){return Jn=m,Et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,L.H=n===null||n.memoizedState===null?ig:Ru,ds=!1,m=r(u,p),ds=!1,ta&&(m=Ep(s,r,u,p)),Sp(n),m}function Sp(n){L.H=ur;var s=jt!==null&&jt.next!==null;if(Jn=0,he=jt=Et=null,Io=!1,or=0,ea=null,s)throw Error(i(300));n===null||de||(n=n.dependencies,n!==null&&Oo(n)&&(de=!0))}function Ep(n,s,r,u){Et=n;var p=0;do{if(ta&&(ea=null),or=0,ta=!1,25<=p)throw Error(i(301));if(p+=1,he=jt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}L.H=sg,m=s(r,u)}while(ta);return m}function _A(){var n=L.H,s=n.useState()[0];return s=typeof s.then=="function"?lr(s):s,n=n.useState()[0],(jt!==null?jt.memoizedState:null)!==n&&(Et.flags|=1024),s}function pu(){var n=Ho!==0;return Ho=0,n}function gu(n,s,r){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~r}function mu(n){if(Io){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Io=!1}Jn=0,he=jt=Et=null,ta=!1,or=Ho=0,ea=null}function ze(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?Et.memoizedState=he=n:he=he.next=n,he}function oe(){if(jt===null){var n=Et.alternate;n=n!==null?n.memoizedState:null}else n=jt.next;var s=he===null?Et.memoizedState:he.next;if(s!==null)he=s,jt=n;else{if(n===null)throw Et.alternate===null?Error(i(467)):Error(i(310));jt=n,n={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},he===null?Et.memoizedState=he=n:he=he.next=n}return he}function jo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lr(n){var s=or;return or+=1,ea===null&&(ea=[]),n=dp(ea,n,s),s=Et,(he===null?s.memoizedState:he.next)===null&&(s=s.alternate,L.H=s===null||s.memoizedState===null?ig:Ru),n}function Go(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return lr(n);if(n.$$typeof===C)return Te(n)}throw Error(i(438,String(n)))}function yu(n){var s=null,r=Et.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var u=Et.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=jo(),Et.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(n),u=0;u<n;u++)r[u]=Z;return s.index++,r}function ti(n,s){return typeof s=="function"?s(n):s}function Vo(n){var s=oe();return vu(s,jt,n)}function vu(n,s,r){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var p=n.baseQueue,m=u.pending;if(m!==null){if(p!==null){var b=p.next;p.next=m.next,m.next=b}s.baseQueue=p=m,u.pending=null}if(m=n.baseState,p===null)n.memoizedState=m;else{s=p.next;var w=b=null,M=null,U=s,q=!1;do{var $=U.lane&-536870913;if($!==U.lane?(Dt&$)===$:(Jn&$)===$){var I=U.revertLane;if(I===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),$===Ks&&(q=!0);else if((Jn&I)===I){U=U.next,I===Ks&&(q=!0);continue}else $={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(w=M=$,b=m):M=M.next=$,Et.lanes|=I,ki|=I;$=U.action,ds&&r(m,$),m=U.hasEagerState?U.eagerState:r(m,$)}else I={lane:$,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},M===null?(w=M=I,b=m):M=M.next=I,Et.lanes|=$,ki|=$;U=U.next}while(U!==null&&U!==s);if(M===null?b=m:M.next=w,!Je(m,n.memoizedState)&&(de=!0,q&&(r=Ws,r!==null)))throw r;n.memoizedState=m,n.baseState=b,n.baseQueue=M,u.lastRenderedState=m}return p===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function bu(n){var s=oe(),r=s.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var u=r.dispatch,p=r.pending,m=s.memoizedState;if(p!==null){r.pending=null;var b=p=p.next;do m=n(m,b.action),b=b.next;while(b!==p);Je(m,s.memoizedState)||(de=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),r.lastRenderedState=m}return[m,u]}function _p(n,s,r){var u=Et,p=oe(),m=Nt;if(m){if(r===void 0)throw Error(i(407));r=r()}else r=s();var b=!Je((jt||p).memoizedState,r);if(b&&(p.memoizedState=r,de=!0),p=p.queue,Eu(Cp.bind(null,u,p,n),[n]),p.getSnapshot!==s||b||he!==null&&he.memoizedState.tag&1){if(u.flags|=2048,na(9,{destroy:void 0},Tp.bind(null,u,p,r,s),null),Xt===null)throw Error(i(349));m||(Jn&127)!==0||wp(u,s,r)}return r}function wp(n,s,r){n.flags|=16384,n={getSnapshot:s,value:r},s=Et.updateQueue,s===null?(s=jo(),Et.updateQueue=s,s.stores=[n]):(r=s.stores,r===null?s.stores=[n]:r.push(n))}function Tp(n,s,r,u){s.value=r,s.getSnapshot=u,xp(s)&&Rp(n)}function Cp(n,s,r){return r(function(){xp(s)&&Rp(n)})}function xp(n){var s=n.getSnapshot;n=n.value;try{var r=s();return!Je(n,r)}catch{return!0}}function Rp(n){var s=is(n,2);s!==null&&Xe(s,n,2)}function Au(n){var s=ze();if(typeof n=="function"){var r=n;if(n=r(),ds){Ai(!0);try{r()}finally{Ai(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:n},s}function Mp(n,s,r,u){return n.baseState=r,vu(n,jt,typeof u=="function"?u:ti)}function wA(n,s,r,u,p){if(Yo(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:p,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};L.T!==null?r(!0):m.isTransition=!1,u(m),r=s.pending,r===null?(m.next=s.pending=m,Dp(s,m)):(m.next=r.next,s.pending=r.next=m)}}function Dp(n,s){var r=s.action,u=s.payload,p=n.state;if(s.isTransition){var m=L.T,b={};L.T=b;try{var w=r(p,u),M=L.S;M!==null&&M(b,w),Op(n,s,w)}catch(U){Su(n,s,U)}finally{m!==null&&b.types!==null&&(m.types=b.types),L.T=m}}else try{m=r(p,u),Op(n,s,m)}catch(U){Su(n,s,U)}}function Op(n,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){Lp(n,s,u)},function(u){return Su(n,s,u)}):Lp(n,s,r)}function Lp(n,s,r){s.status="fulfilled",s.value=r,Np(s),n.state=r,s=n.pending,s!==null&&(r=s.next,r===s?n.pending=null:(r=r.next,s.next=r,Dp(n,r)))}function Su(n,s,r){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=r,Np(s),s=s.next;while(s!==u)}n.action=null}function Np(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function kp(n,s){return s}function Bp(n,s){if(Nt){var r=Xt.formState;if(r!==null){t:{var u=Et;if(Nt){if(Wt){e:{for(var p=Wt,m=vn;p.nodeType!==8;){if(!m){p=null;break e}if(p=An(p.nextSibling),p===null){p=null;break e}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){Wt=An(p.nextSibling),u=p.data==="F!";break t}}Ti(u)}u=!1}u&&(s=r[0])}}return r=ze(),r.memoizedState=r.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kp,lastRenderedState:s},r.queue=u,r=tg.bind(null,Et,u),u.dispatch=r,u=Au(!1),m=xu.bind(null,Et,!1,u.queue),u=ze(),p={state:s,dispatch:null,action:n,pending:null},u.queue=p,r=wA.bind(null,Et,p,m,r),p.dispatch=r,u.memoizedState=n,[s,r,!1]}function Pp(n){var s=oe();return zp(s,jt,n)}function zp(n,s,r){if(s=vu(n,s,kp)[0],n=Vo(ti)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=lr(s)}catch(b){throw b===Qs?ko:b}else u=s;s=oe();var p=s.queue,m=p.dispatch;return r!==s.memoizedState&&(Et.flags|=2048,na(9,{destroy:void 0},TA.bind(null,p,r),null)),[u,m,n]}function TA(n,s){n.action=s}function Fp(n){var s=oe(),r=jt;if(r!==null)return zp(s,r,n);oe(),s=s.memoizedState,r=oe();var u=r.queue.dispatch;return r.memoizedState=n,[s,u,!1]}function na(n,s,r,u){return n={tag:n,create:r,deps:u,inst:s,next:null},s=Et.updateQueue,s===null&&(s=jo(),Et.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=n.next=n:(u=r.next,r.next=n,n.next=u,s.lastEffect=n),n}function Up(){return oe().memoizedState}function qo(n,s,r,u){var p=ze();Et.flags|=n,p.memoizedState=na(1|s,{destroy:void 0},r,u===void 0?null:u)}function Xo(n,s,r,u){var p=oe();u=u===void 0?null:u;var m=p.memoizedState.inst;jt!==null&&u!==null&&du(u,jt.memoizedState.deps)?p.memoizedState=na(s,m,r,u):(Et.flags|=n,p.memoizedState=na(1|s,m,r,u))}function Ip(n,s){qo(8390656,8,n,s)}function Eu(n,s){Xo(2048,8,n,s)}function CA(n){Et.flags|=4;var s=Et.updateQueue;if(s===null)s=jo(),Et.updateQueue=s,s.events=[n];else{var r=s.events;r===null?s.events=[n]:r.push(n)}}function Hp(n){var s=oe().memoizedState;return CA({ref:s,nextImpl:n}),function(){if((Ft&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function jp(n,s){return Xo(4,2,n,s)}function Gp(n,s){return Xo(4,4,n,s)}function Vp(n,s){if(typeof s=="function"){n=n();var r=s(n);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function qp(n,s,r){r=r!=null?r.concat([n]):null,Xo(4,4,Vp.bind(null,s,n),r)}function _u(){}function Xp(n,s){var r=oe();s=s===void 0?null:s;var u=r.memoizedState;return s!==null&&du(s,u[1])?u[0]:(r.memoizedState=[n,s],n)}function Yp(n,s){var r=oe();s=s===void 0?null:s;var u=r.memoizedState;if(s!==null&&du(s,u[1]))return u[0];if(u=n(),ds){Ai(!0);try{n()}finally{Ai(!1)}}return r.memoizedState=[u,s],u}function wu(n,s,r){return r===void 0||(Jn&1073741824)!==0&&(Dt&261930)===0?n.memoizedState=s:(n.memoizedState=r,n=$g(),Et.lanes|=n,ki|=n,r)}function $p(n,s,r,u){return Je(r,s)?r:Js.current!==null?(n=wu(n,r,u),Je(n,s)||(de=!0),n):(Jn&42)===0||(Jn&1073741824)!==0&&(Dt&261930)===0?(de=!0,n.memoizedState=r):(n=$g(),Et.lanes|=n,ki|=n,s)}function Kp(n,s,r,u,p){var m=H.p;H.p=m!==0&&8>m?m:8;var b=L.T,w={};L.T=w,xu(n,!1,s,r);try{var M=p(),U=L.S;if(U!==null&&U(w,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var q=SA(M,u);cr(n,s,q,rn(n))}else cr(n,s,u,rn(n))}catch($){cr(n,s,{then:function(){},status:"rejected",reason:$},rn())}finally{H.p=m,b!==null&&w.types!==null&&(b.types=w.types),L.T=b}}function xA(){}function Tu(n,s,r,u){if(n.tag!==5)throw Error(i(476));var p=Wp(n).queue;Kp(n,p,s,Q,r===null?xA:function(){return Qp(n),r(u)})}function Wp(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:Q},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:r},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Qp(n){var s=Wp(n);s.next===null&&(s=n.alternate.memoizedState),cr(n,s.next.queue,{},rn())}function Cu(){return Te(Cr)}function Zp(){return oe().memoizedState}function Jp(){return oe().memoizedState}function RA(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var r=rn();n=Ri(r);var u=Mi(s,n,r);u!==null&&(Xe(u,s,r),sr(u,s,r)),s={cache:eu()},n.payload=s;return}s=s.return}}function MA(n,s,r){var u=rn();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Yo(n)?eg(s,r):(r=Vc(n,s,r,u),r!==null&&(Xe(r,n,u),ng(r,s,u)))}function tg(n,s,r){var u=rn();cr(n,s,r,u)}function cr(n,s,r,u){var p={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Yo(n))eg(s,p);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var b=s.lastRenderedState,w=m(b,r);if(p.hasEagerState=!0,p.eagerState=w,Je(w,b))return xo(n,s,p,0),Xt===null&&Co(),!1}catch{}finally{}if(r=Vc(n,s,p,u),r!==null)return Xe(r,n,u),ng(r,s,u),!0}return!1}function xu(n,s,r,u){if(u={lane:2,revertLane:ah(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Yo(n)){if(s)throw Error(i(479))}else s=Vc(n,r,u,2),s!==null&&Xe(s,n,2)}function Yo(n){var s=n.alternate;return n===Et||s!==null&&s===Et}function eg(n,s){ta=Io=!0;var r=n.pending;r===null?s.next=s:(s.next=r.next,r.next=s),n.pending=s}function ng(n,s,r){if((r&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,r|=u,s.lanes=r,of(n,r)}}var ur={readContext:Te,use:Go,useCallback:se,useContext:se,useEffect:se,useImperativeHandle:se,useLayoutEffect:se,useInsertionEffect:se,useMemo:se,useReducer:se,useRef:se,useState:se,useDebugValue:se,useDeferredValue:se,useTransition:se,useSyncExternalStore:se,useId:se,useHostTransitionStatus:se,useFormState:se,useActionState:se,useOptimistic:se,useMemoCache:se,useCacheRefresh:se};ur.useEffectEvent=se;var ig={readContext:Te,use:Go,useCallback:function(n,s){return ze().memoizedState=[n,s===void 0?null:s],n},useContext:Te,useEffect:Ip,useImperativeHandle:function(n,s,r){r=r!=null?r.concat([n]):null,qo(4194308,4,Vp.bind(null,s,n),r)},useLayoutEffect:function(n,s){return qo(4194308,4,n,s)},useInsertionEffect:function(n,s){qo(4,2,n,s)},useMemo:function(n,s){var r=ze();s=s===void 0?null:s;var u=n();if(ds){Ai(!0);try{n()}finally{Ai(!1)}}return r.memoizedState=[u,s],u},useReducer:function(n,s,r){var u=ze();if(r!==void 0){var p=r(s);if(ds){Ai(!0);try{r(s)}finally{Ai(!1)}}}else p=s;return u.memoizedState=u.baseState=p,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:p},u.queue=n,n=n.dispatch=MA.bind(null,Et,n),[u.memoizedState,n]},useRef:function(n){var s=ze();return n={current:n},s.memoizedState=n},useState:function(n){n=Au(n);var s=n.queue,r=tg.bind(null,Et,s);return s.dispatch=r,[n.memoizedState,r]},useDebugValue:_u,useDeferredValue:function(n,s){var r=ze();return wu(r,n,s)},useTransition:function(){var n=Au(!1);return n=Kp.bind(null,Et,n.queue,!0,!1),ze().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,r){var u=Et,p=ze();if(Nt){if(r===void 0)throw Error(i(407));r=r()}else{if(r=s(),Xt===null)throw Error(i(349));(Dt&127)!==0||wp(u,s,r)}p.memoizedState=r;var m={value:r,getSnapshot:s};return p.queue=m,Ip(Cp.bind(null,u,m,n),[n]),u.flags|=2048,na(9,{destroy:void 0},Tp.bind(null,u,m,r,s),null),r},useId:function(){var n=ze(),s=Xt.identifierPrefix;if(Nt){var r=Bn,u=kn;r=(u&~(1<<32-Ze(u)-1)).toString(32)+r,s="_"+s+"R_"+r,r=Ho++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=EA++,s="_"+s+"r_"+r.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Cu,useFormState:Bp,useActionState:Bp,useOptimistic:function(n){var s=ze();s.memoizedState=s.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=xu.bind(null,Et,!0,r),r.dispatch=s,[n,s]},useMemoCache:yu,useCacheRefresh:function(){return ze().memoizedState=RA.bind(null,Et)},useEffectEvent:function(n){var s=ze(),r={impl:n};return s.memoizedState=r,function(){if((Ft&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},Ru={readContext:Te,use:Go,useCallback:Xp,useContext:Te,useEffect:Eu,useImperativeHandle:qp,useInsertionEffect:jp,useLayoutEffect:Gp,useMemo:Yp,useReducer:Vo,useRef:Up,useState:function(){return Vo(ti)},useDebugValue:_u,useDeferredValue:function(n,s){var r=oe();return $p(r,jt.memoizedState,n,s)},useTransition:function(){var n=Vo(ti)[0],s=oe().memoizedState;return[typeof n=="boolean"?n:lr(n),s]},useSyncExternalStore:_p,useId:Zp,useHostTransitionStatus:Cu,useFormState:Pp,useActionState:Pp,useOptimistic:function(n,s){var r=oe();return Mp(r,jt,n,s)},useMemoCache:yu,useCacheRefresh:Jp};Ru.useEffectEvent=Hp;var sg={readContext:Te,use:Go,useCallback:Xp,useContext:Te,useEffect:Eu,useImperativeHandle:qp,useInsertionEffect:jp,useLayoutEffect:Gp,useMemo:Yp,useReducer:bu,useRef:Up,useState:function(){return bu(ti)},useDebugValue:_u,useDeferredValue:function(n,s){var r=oe();return jt===null?wu(r,n,s):$p(r,jt.memoizedState,n,s)},useTransition:function(){var n=bu(ti)[0],s=oe().memoizedState;return[typeof n=="boolean"?n:lr(n),s]},useSyncExternalStore:_p,useId:Zp,useHostTransitionStatus:Cu,useFormState:Fp,useActionState:Fp,useOptimistic:function(n,s){var r=oe();return jt!==null?Mp(r,jt,n,s):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:yu,useCacheRefresh:Jp};sg.useEffectEvent=Hp;function Mu(n,s,r,u){s=n.memoizedState,r=r(u,s),r=r==null?s:y({},s,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var Du={enqueueSetState:function(n,s,r){n=n._reactInternals;var u=rn(),p=Ri(u);p.payload=s,r!=null&&(p.callback=r),s=Mi(n,p,u),s!==null&&(Xe(s,n,u),sr(s,n,u))},enqueueReplaceState:function(n,s,r){n=n._reactInternals;var u=rn(),p=Ri(u);p.tag=1,p.payload=s,r!=null&&(p.callback=r),s=Mi(n,p,u),s!==null&&(Xe(s,n,u),sr(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var r=rn(),u=Ri(r);u.tag=2,s!=null&&(u.callback=s),s=Mi(n,u,r),s!==null&&(Xe(s,n,r),sr(s,n,r))}};function ag(n,s,r,u,p,m,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,b):s.prototype&&s.prototype.isPureReactComponent?!Wa(r,u)||!Wa(p,m):!0}function rg(n,s,r,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,u),s.state!==n&&Du.enqueueReplaceState(s,s.state,null)}function fs(n,s){var r=s;if("ref"in s){r={};for(var u in s)u!=="ref"&&(r[u]=s[u])}if(n=n.defaultProps){r===s&&(r=y({},r));for(var p in n)r[p]===void 0&&(r[p]=n[p])}return r}function og(n){To(n)}function lg(n){console.error(n)}function cg(n){To(n)}function $o(n,s){try{var r=n.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function ug(n,s,r){try{var u=n.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Ou(n,s,r){return r=Ri(r),r.tag=3,r.payload={element:null},r.callback=function(){$o(n,s)},r}function hg(n){return n=Ri(n),n.tag=3,n}function dg(n,s,r,u){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var m=u.value;n.payload=function(){return p(m)},n.callback=function(){ug(s,r,u)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){ug(s,r,u),typeof p!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function DA(n,s,r,u,p){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=r.alternate,s!==null&&$s(s,r,p,!0),r=en.current,r!==null){switch(r.tag){case 31:case 13:return bn===null?rl():r.alternate===null&&ae===0&&(ae=3),r.flags&=-257,r.flags|=65536,r.lanes=p,u===Bo?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([u]):s.add(u),nh(n,u,p)),!1;case 22:return r.flags|=65536,u===Bo?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([u]):r.add(u)),nh(n,u,p)),!1}throw Error(i(435,r.tag))}return nh(n,u,p),rl(),!1}if(Nt)return s=en.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,u!==Wc&&(n=Error(i(422),{cause:u}),Ja(gn(n,r)))):(u!==Wc&&(s=Error(i(423),{cause:u}),Ja(gn(s,r))),n=n.current.alternate,n.flags|=65536,p&=-p,n.lanes|=p,u=gn(u,r),p=Ou(n.stateNode,u,p),ou(n,p),ae!==4&&(ae=2)),!1;var m=Error(i(520),{cause:u});if(m=gn(m,r),vr===null?vr=[m]:vr.push(m),ae!==4&&(ae=2),s===null)return!0;u=gn(u,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,n=p&-p,r.lanes|=n,n=Ou(r.stateNode,u,n),ou(r,n),!1;case 1:if(s=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Bi===null||!Bi.has(m))))return r.flags|=65536,p&=-p,r.lanes|=p,p=hg(p),dg(p,n,r,u),ou(r,p),!1}r=r.return}while(r!==null);return!1}var Lu=Error(i(461)),de=!1;function Ce(n,s,r,u){s.child=n===null?mp(s,null,r,u):hs(s,n.child,r,u)}function fg(n,s,r,u,p){r=r.render;var m=s.ref;if("ref"in u){var b={};for(var w in u)w!=="ref"&&(b[w]=u[w])}else b=u;return os(s),u=fu(n,s,r,b,m,p),w=pu(),n!==null&&!de?(gu(n,s,p),ei(n,s,p)):(Nt&&w&&$c(s),s.flags|=1,Ce(n,s,u,p),s.child)}function pg(n,s,r,u,p){if(n===null){var m=r.type;return typeof m=="function"&&!qc(m)&&m.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=m,gg(n,s,m,u,p)):(n=Mo(r.type,null,u,s,s.mode,p),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!Iu(n,p)){var b=m.memoizedProps;if(r=r.compare,r=r!==null?r:Wa,r(b,u)&&n.ref===s.ref)return ei(n,s,p)}return s.flags|=1,n=Kn(m,u),n.ref=s.ref,n.return=s,s.child=n}function gg(n,s,r,u,p){if(n!==null){var m=n.memoizedProps;if(Wa(m,u)&&n.ref===s.ref)if(de=!1,s.pendingProps=u=m,Iu(n,p))(n.flags&131072)!==0&&(de=!0);else return s.lanes=n.lanes,ei(n,s,p)}return Nu(n,s,r,u,p)}function mg(n,s,r,u){var p=u.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,n!==null){for(u=s.child=n.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~m}else u=0,s.child=null;return yg(n,s,m,r,u)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&No(s,m!==null?m.cachePool:null),m!==null?bp(s,m):cu(),Ap(s);else return u=s.lanes=536870912,yg(n,s,m!==null?m.baseLanes|r:r,r,u)}else m!==null?(No(s,m.cachePool),bp(s,m),Oi(),s.memoizedState=null):(n!==null&&No(s,null),cu(),Oi());return Ce(n,s,p,r),s.child}function hr(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function yg(n,s,r,u,p){var m=iu();return m=m===null?null:{parent:ue._currentValue,pool:m},s.memoizedState={baseLanes:r,cachePool:m},n!==null&&No(s,null),cu(),Ap(s),n!==null&&$s(n,s,u,!0),s.childLanes=p,null}function Ko(n,s){return s=Qo({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function vg(n,s,r){return hs(s,n.child,null,r),n=Ko(s,s.pendingProps),n.flags|=2,nn(s),s.memoizedState=null,n}function OA(n,s,r){var u=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Nt){if(u.mode==="hidden")return n=Ko(s,u),s.lanes=536870912,hr(null,n);if(hu(s),(n=Wt)?(n=Dm(n,vn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:_i!==null?{id:kn,overflow:Bn}:null,retryLane:536870912,hydrationErrors:null},r=ep(n),r.return=s,s.child=r,we=s,Wt=null)):n=null,n===null)throw Ti(s);return s.lanes=536870912,null}return Ko(s,u)}var m=n.memoizedState;if(m!==null){var b=m.dehydrated;if(hu(s),p)if(s.flags&256)s.flags&=-257,s=vg(n,s,r);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(de||$s(n,s,r,!1),p=(r&n.childLanes)!==0,de||p){if(u=Xt,u!==null&&(b=lf(u,r),b!==0&&b!==m.retryLane))throw m.retryLane=b,is(n,b),Xe(u,n,b),Lu;rl(),s=vg(n,s,r)}else n=m.treeContext,Wt=An(b.nextSibling),we=s,Nt=!0,wi=null,vn=!1,n!==null&&sp(s,n),s=Ko(s,u),s.flags|=4096;return s}return n=Kn(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Wo(n,s){var r=s.ref;if(r===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(n===null||n.ref!==r)&&(s.flags|=4194816)}}function Nu(n,s,r,u,p){return os(s),r=fu(n,s,r,u,void 0,p),u=pu(),n!==null&&!de?(gu(n,s,p),ei(n,s,p)):(Nt&&u&&$c(s),s.flags|=1,Ce(n,s,r,p),s.child)}function bg(n,s,r,u,p,m){return os(s),s.updateQueue=null,r=Ep(s,u,r,p),Sp(n),u=pu(),n!==null&&!de?(gu(n,s,m),ei(n,s,m)):(Nt&&u&&$c(s),s.flags|=1,Ce(n,s,r,m),s.child)}function Ag(n,s,r,u,p){if(os(s),s.stateNode===null){var m=Vs,b=r.contextType;typeof b=="object"&&b!==null&&(m=Te(b)),m=new r(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Du,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},au(s),b=r.contextType,m.context=typeof b=="object"&&b!==null?Te(b):Vs,m.state=s.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(Mu(s,r,b,u),m.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&Du.enqueueReplaceState(m,m.state,null),rr(s,u,m,p),ar(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var w=s.memoizedProps,M=fs(r,w);m.props=M;var U=m.context,q=r.contextType;b=Vs,typeof q=="object"&&q!==null&&(b=Te(q));var $=r.getDerivedStateFromProps;q=typeof $=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,q||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||U!==b)&&rg(s,m,u,b),xi=!1;var I=s.memoizedState;m.state=I,rr(s,u,m,p),ar(),U=s.memoizedState,w||I!==U||xi?(typeof $=="function"&&(Mu(s,r,$,u),U=s.memoizedState),(M=xi||ag(s,r,M,u,I,U,b))?(q||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=U),m.props=u,m.state=U,m.context=b,u=M):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,ru(n,s),b=s.memoizedProps,q=fs(r,b),m.props=q,$=s.pendingProps,I=m.context,U=r.contextType,M=Vs,typeof U=="object"&&U!==null&&(M=Te(U)),w=r.getDerivedStateFromProps,(U=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==$||I!==M)&&rg(s,m,u,M),xi=!1,I=s.memoizedState,m.state=I,rr(s,u,m,p),ar();var V=s.memoizedState;b!==$||I!==V||xi||n!==null&&n.dependencies!==null&&Oo(n.dependencies)?(typeof w=="function"&&(Mu(s,r,w,u),V=s.memoizedState),(q=xi||ag(s,r,q,u,I,V,M)||n!==null&&n.dependencies!==null&&Oo(n.dependencies))?(U||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,V,M),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,V,M)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===n.memoizedProps&&I===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&I===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=V),m.props=u,m.state=V,m.context=M,u=q):(typeof m.componentDidUpdate!="function"||b===n.memoizedProps&&I===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&I===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,Wo(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=hs(s,n.child,null,p),s.child=hs(s,null,r,p)):Ce(n,s,r,p),s.memoizedState=m.state,n=s.child):n=ei(n,s,p),n}function Sg(n,s,r,u){return as(),s.flags|=256,Ce(n,s,r,u),s.child}var ku={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bu(n){return{baseLanes:n,cachePool:up()}}function Pu(n,s,r){return n=n!==null?n.childLanes&~r:0,s&&(n|=an),n}function Eg(n,s,r){var u=s.pendingProps,p=!1,m=(s.flags&128)!==0,b;if((b=m)||(b=n!==null&&n.memoizedState===null?!1:(re.current&2)!==0),b&&(p=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,n===null){if(Nt){if(p?Di(s):Oi(),(n=Wt)?(n=Dm(n,vn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:_i!==null?{id:kn,overflow:Bn}:null,retryLane:536870912,hydrationErrors:null},r=ep(n),r.return=s,s.child=r,we=s,Wt=null)):n=null,n===null)throw Ti(s);return vh(n)?s.lanes=32:s.lanes=536870912,null}var w=u.children;return u=u.fallback,p?(Oi(),p=s.mode,w=Qo({mode:"hidden",children:w},p),u=ss(u,p,r,null),w.return=s,u.return=s,w.sibling=u,s.child=w,u=s.child,u.memoizedState=Bu(r),u.childLanes=Pu(n,b,r),s.memoizedState=ku,hr(null,u)):(Di(s),zu(s,w))}var M=n.memoizedState;if(M!==null&&(w=M.dehydrated,w!==null)){if(m)s.flags&256?(Di(s),s.flags&=-257,s=Fu(n,s,r)):s.memoizedState!==null?(Oi(),s.child=n.child,s.flags|=128,s=null):(Oi(),w=u.fallback,p=s.mode,u=Qo({mode:"visible",children:u.children},p),w=ss(w,p,r,null),w.flags|=2,u.return=s,w.return=s,u.sibling=w,s.child=u,hs(s,n.child,null,r),u=s.child,u.memoizedState=Bu(r),u.childLanes=Pu(n,b,r),s.memoizedState=ku,s=hr(null,u));else if(Di(s),vh(w)){if(b=w.nextSibling&&w.nextSibling.dataset,b)var U=b.dgst;b=U,u=Error(i(419)),u.stack="",u.digest=b,Ja({value:u,source:null,stack:null}),s=Fu(n,s,r)}else if(de||$s(n,s,r,!1),b=(r&n.childLanes)!==0,de||b){if(b=Xt,b!==null&&(u=lf(b,r),u!==0&&u!==M.retryLane))throw M.retryLane=u,is(n,u),Xe(b,n,u),Lu;yh(w)||rl(),s=Fu(n,s,r)}else yh(w)?(s.flags|=192,s.child=n.child,s=null):(n=M.treeContext,Wt=An(w.nextSibling),we=s,Nt=!0,wi=null,vn=!1,n!==null&&sp(s,n),s=zu(s,u.children),s.flags|=4096);return s}return p?(Oi(),w=u.fallback,p=s.mode,M=n.child,U=M.sibling,u=Kn(M,{mode:"hidden",children:u.children}),u.subtreeFlags=M.subtreeFlags&65011712,U!==null?w=Kn(U,w):(w=ss(w,p,r,null),w.flags|=2),w.return=s,u.return=s,u.sibling=w,s.child=u,hr(null,u),u=s.child,w=n.child.memoizedState,w===null?w=Bu(r):(p=w.cachePool,p!==null?(M=ue._currentValue,p=p.parent!==M?{parent:M,pool:M}:p):p=up(),w={baseLanes:w.baseLanes|r,cachePool:p}),u.memoizedState=w,u.childLanes=Pu(n,b,r),s.memoizedState=ku,hr(n.child,u)):(Di(s),r=n.child,n=r.sibling,r=Kn(r,{mode:"visible",children:u.children}),r.return=s,r.sibling=null,n!==null&&(b=s.deletions,b===null?(s.deletions=[n],s.flags|=16):b.push(n)),s.child=r,s.memoizedState=null,r)}function zu(n,s){return s=Qo({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Qo(n,s){return n=tn(22,n,null,s),n.lanes=0,n}function Fu(n,s,r){return hs(s,n.child,null,r),n=zu(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function _g(n,s,r){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Jc(n.return,s,r)}function Uu(n,s,r,u,p,m){var b=n.memoizedState;b===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:p,treeForkCount:m}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=r,b.tailMode=p,b.treeForkCount=m)}function wg(n,s,r){var u=s.pendingProps,p=u.revealOrder,m=u.tail;u=u.children;var b=re.current,w=(b&2)!==0;if(w?(b=b&1|2,s.flags|=128):b&=1,K(re,b),Ce(n,s,u,r),u=Nt?Za:0,!w&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_g(n,r,s);else if(n.tag===19)_g(n,r,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(p){case"forwards":for(r=s.child,p=null;r!==null;)n=r.alternate,n!==null&&Uo(n)===null&&(p=r),r=r.sibling;r=p,r===null?(p=s.child,s.child=null):(p=r.sibling,r.sibling=null),Uu(s,!1,p,r,m,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=s.child,s.child=null;p!==null;){if(n=p.alternate,n!==null&&Uo(n)===null){s.child=p;break}n=p.sibling,p.sibling=r,r=p,p=n}Uu(s,!0,r,null,m,u);break;case"together":Uu(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function ei(n,s,r){if(n!==null&&(s.dependencies=n.dependencies),ki|=s.lanes,(r&s.childLanes)===0)if(n!==null){if($s(n,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,r=Kn(n,n.pendingProps),s.child=r,r.return=s;n.sibling!==null;)n=n.sibling,r=r.sibling=Kn(n,n.pendingProps),r.return=s;r.sibling=null}return s.child}function Iu(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Oo(n)))}function LA(n,s,r){switch(s.tag){case 3:Ht(s,s.stateNode.containerInfo),Ci(s,ue,n.memoizedState.cache),as();break;case 27:case 5:Bt(s);break;case 4:Ht(s,s.stateNode.containerInfo);break;case 10:Ci(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,hu(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Di(s),s.flags|=128,null):(r&s.child.childLanes)!==0?Eg(n,s,r):(Di(s),n=ei(n,s,r),n!==null?n.sibling:null);Di(s);break;case 19:var p=(n.flags&128)!==0;if(u=(r&s.childLanes)!==0,u||($s(n,s,r,!1),u=(r&s.childLanes)!==0),p){if(u)return wg(n,s,r);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),K(re,re.current),u)break;return null;case 22:return s.lanes=0,mg(n,s,r,s.pendingProps);case 24:Ci(s,ue,n.memoizedState.cache)}return ei(n,s,r)}function Tg(n,s,r){if(n!==null)if(n.memoizedProps!==s.pendingProps)de=!0;else{if(!Iu(n,r)&&(s.flags&128)===0)return de=!1,LA(n,s,r);de=(n.flags&131072)!==0}else de=!1,Nt&&(s.flags&1048576)!==0&&ip(s,Za,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(n=cs(s.elementType),s.type=n,typeof n=="function")qc(n)?(u=fs(n,u),s.tag=1,s=Ag(null,s,n,u,r)):(s.tag=0,s=Nu(null,s,n,u,r));else{if(n!=null){var p=n.$$typeof;if(p===D){s.tag=11,s=fg(null,s,n,u,r);break t}else if(p===P){s.tag=14,s=pg(null,s,n,u,r);break t}}throw s=at(n)||n,Error(i(306,s,""))}}return s;case 0:return Nu(n,s,s.type,s.pendingProps,r);case 1:return u=s.type,p=fs(u,s.pendingProps),Ag(n,s,u,p,r);case 3:t:{if(Ht(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;p=m.element,ru(n,s),rr(s,u,null,r);var b=s.memoizedState;if(u=b.cache,Ci(s,ue,u),u!==m.cache&&tu(s,[ue],r,!0),ar(),u=b.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Sg(n,s,u,r);break t}else if(u!==p){p=gn(Error(i(424)),s),Ja(p),s=Sg(n,s,u,r);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Wt=An(n.firstChild),we=s,Nt=!0,wi=null,vn=!0,r=mp(s,null,u,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(as(),u===p){s=ei(n,s,r);break t}Ce(n,s,u,r)}s=s.child}return s;case 26:return Wo(n,s),n===null?(r=Pm(s.type,null,s.pendingProps,null))?s.memoizedState=r:Nt||(r=s.type,n=s.pendingProps,u=fl(ht.current).createElement(r),u[_e]=s,u[Ie]=n,xe(u,r,n),ye(u),s.stateNode=u):s.memoizedState=Pm(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Bt(s),n===null&&Nt&&(u=s.stateNode=Nm(s.type,s.pendingProps,ht.current),we=s,vn=!0,p=Wt,Ui(s.type)?(bh=p,Wt=An(u.firstChild)):Wt=p),Ce(n,s,s.pendingProps.children,r),Wo(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Nt&&((p=u=Wt)&&(u=lS(u,s.type,s.pendingProps,vn),u!==null?(s.stateNode=u,we=s,Wt=An(u.firstChild),vn=!1,p=!0):p=!1),p||Ti(s)),Bt(s),p=s.type,m=s.pendingProps,b=n!==null?n.memoizedProps:null,u=m.children,ph(p,m)?u=null:b!==null&&ph(p,b)&&(s.flags|=32),s.memoizedState!==null&&(p=fu(n,s,_A,null,null,r),Cr._currentValue=p),Wo(n,s),Ce(n,s,u,r),s.child;case 6:return n===null&&Nt&&((n=r=Wt)&&(r=cS(r,s.pendingProps,vn),r!==null?(s.stateNode=r,we=s,Wt=null,n=!0):n=!1),n||Ti(s)),null;case 13:return Eg(n,s,r);case 4:return Ht(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=hs(s,null,u,r):Ce(n,s,u,r),s.child;case 11:return fg(n,s,s.type,s.pendingProps,r);case 7:return Ce(n,s,s.pendingProps,r),s.child;case 8:return Ce(n,s,s.pendingProps.children,r),s.child;case 12:return Ce(n,s,s.pendingProps.children,r),s.child;case 10:return u=s.pendingProps,Ci(s,s.type,u.value),Ce(n,s,u.children,r),s.child;case 9:return p=s.type._context,u=s.pendingProps.children,os(s),p=Te(p),u=u(p),s.flags|=1,Ce(n,s,u,r),s.child;case 14:return pg(n,s,s.type,s.pendingProps,r);case 15:return gg(n,s,s.type,s.pendingProps,r);case 19:return wg(n,s,r);case 31:return OA(n,s,r);case 22:return mg(n,s,r,s.pendingProps);case 24:return os(s),u=Te(ue),n===null?(p=iu(),p===null&&(p=Xt,m=eu(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=r),p=m),s.memoizedState={parent:u,cache:p},au(s),Ci(s,ue,p)):((n.lanes&r)!==0&&(ru(n,s),rr(s,null,null,r),ar()),p=n.memoizedState,m=s.memoizedState,p.parent!==u?(p={parent:u,cache:u},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),Ci(s,ue,u)):(u=m.cache,Ci(s,ue,u),u!==p.cache&&tu(s,[ue],r,!0))),Ce(n,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ni(n){n.flags|=4}function Hu(n,s,r,u,p){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(p&335544128)===p)if(n.stateNode.complete)n.flags|=8192;else if(Zg())n.flags|=8192;else throw us=Bo,su}else n.flags&=-16777217}function Cg(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Hm(s))if(Zg())n.flags|=8192;else throw us=Bo,su}function Zo(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?af():536870912,n.lanes|=s,ra|=s)}function dr(n,s){if(!Nt)switch(n.tailMode){case"hidden":s=n.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Qt(n){var s=n.alternate!==null&&n.alternate.child===n.child,r=0,u=0;if(s)for(var p=n.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=u,n.childLanes=r,s}function NA(n,s,r){var u=s.pendingProps;switch(Kc(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(s),null;case 1:return Qt(s),null;case 3:return r=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Zn(ue),_t(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Ys(s)?ni(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Qc())),Qt(s),null;case 26:var p=s.type,m=s.memoizedState;return n===null?(ni(s),m!==null?(Qt(s),Cg(s,m)):(Qt(s),Hu(s,p,null,u,r))):m?m!==n.memoizedState?(ni(s),Qt(s),Cg(s,m)):(Qt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&ni(s),Qt(s),Hu(s,p,n,u,r)),null;case 27:if(Oe(s),r=ht.current,p=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ni(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Qt(s),null}n=tt.current,Ys(s)?ap(s):(n=Nm(p,u,r),s.stateNode=n,ni(s))}return Qt(s),null;case 5:if(Oe(s),p=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ni(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Qt(s),null}if(m=tt.current,Ys(s))ap(s);else{var b=fl(ht.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?b.createElement(p,{is:u.is}):b.createElement(p)}}m[_e]=s,m[Ie]=u;t:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break t;for(;b.sibling===null;){if(b.return===null||b.return===s)break t;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=m;t:switch(xe(m,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&ni(s)}}return Qt(s),Hu(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,r),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&ni(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=ht.current,Ys(s)){if(n=s.stateNode,r=s.memoizedProps,u=null,p=we,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}n[_e]=s,n=!!(n.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Em(n.nodeValue,r)),n||Ti(s,!0)}else n=fl(n).createTextNode(u),n[_e]=s,s.stateNode=n}return Qt(s),null;case 31:if(r=s.memoizedState,n===null||n.memoizedState!==null){if(u=Ys(s),r!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[_e]=s}else as(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qt(s),n=!1}else r=Qc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return s.flags&256?(nn(s),s):(nn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Qt(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(p=Ys(s),u!==null&&u.dehydrated!==null){if(n===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[_e]=s}else as(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qt(s),p=!1}else p=Qc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(nn(s),s):(nn(s),null)}return nn(s),(s.flags&128)!==0?(s.lanes=r,s):(r=u!==null,n=n!==null&&n.memoizedState!==null,r&&(u=s.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==p&&(u.flags|=2048)),r!==n&&r&&(s.child.flags|=8192),Zo(s,s.updateQueue),Qt(s),null);case 4:return _t(),n===null&&ch(s.stateNode.containerInfo),Qt(s),null;case 10:return Zn(s.type),Qt(s),null;case 19:if(G(re),u=s.memoizedState,u===null)return Qt(s),null;if(p=(s.flags&128)!==0,m=u.rendering,m===null)if(p)dr(u,!1);else{if(ae!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Uo(n),m!==null){for(s.flags|=128,dr(u,!1),n=m.updateQueue,s.updateQueue=n,Zo(s,n),s.subtreeFlags=0,n=r,r=s.child;r!==null;)tp(r,n),r=r.sibling;return K(re,re.current&1|2),Nt&&Wn(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Pe()>il&&(s.flags|=128,p=!0,dr(u,!1),s.lanes=4194304)}else{if(!p)if(n=Uo(m),n!==null){if(s.flags|=128,p=!0,n=n.updateQueue,s.updateQueue=n,Zo(s,n),dr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Nt)return Qt(s),null}else 2*Pe()-u.renderingStartTime>il&&r!==536870912&&(s.flags|=128,p=!0,dr(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(n=u.last,n!==null?n.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Pe(),n.sibling=null,r=re.current,K(re,p?r&1|2:r&1),Nt&&Wn(s,u.treeForkCount),n):(Qt(s),null);case 22:case 23:return nn(s),uu(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(r&536870912)!==0&&(s.flags&128)===0&&(Qt(s),s.subtreeFlags&6&&(s.flags|=8192)):Qt(s),r=s.updateQueue,r!==null&&Zo(s,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==r&&(s.flags|=2048),n!==null&&G(ls),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),Zn(ue),Qt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function kA(n,s){switch(Kc(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Zn(ue),_t(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Oe(s),null;case 31:if(s.memoizedState!==null){if(nn(s),s.alternate===null)throw Error(i(340));as()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(nn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));as()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return G(re),null;case 4:return _t(),null;case 10:return Zn(s.type),null;case 22:case 23:return nn(s),uu(),n!==null&&G(ls),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Zn(ue),null;case 25:return null;default:return null}}function xg(n,s){switch(Kc(s),s.tag){case 3:Zn(ue),_t();break;case 26:case 27:case 5:Oe(s);break;case 4:_t();break;case 31:s.memoizedState!==null&&nn(s);break;case 13:nn(s);break;case 19:G(re);break;case 10:Zn(s.type);break;case 22:case 23:nn(s),uu(),n!==null&&G(ls);break;case 24:Zn(ue)}}function fr(n,s){try{var r=s.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var p=u.next;r=p;do{if((r.tag&n)===n){u=void 0;var m=r.create,b=r.inst;u=m(),b.destroy=u}r=r.next}while(r!==p)}}catch(w){It(s,s.return,w)}}function Li(n,s,r){try{var u=s.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var m=p.next;u=m;do{if((u.tag&n)===n){var b=u.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,p=s;var M=r,U=w;try{U()}catch(q){It(p,M,q)}}}u=u.next}while(u!==m)}}catch(q){It(s,s.return,q)}}function Rg(n){var s=n.updateQueue;if(s!==null){var r=n.stateNode;try{vp(s,r)}catch(u){It(n,n.return,u)}}}function Mg(n,s,r){r.props=fs(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(u){It(n,s,u)}}function pr(n,s){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof r=="function"?n.refCleanup=r(u):r.current=u}}catch(p){It(n,s,p)}}function Pn(n,s){var r=n.ref,u=n.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(p){It(n,s,p)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){It(n,s,p)}else r.current=null}function Dg(n){var s=n.type,r=n.memoizedProps,u=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break t;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(p){It(n,n.return,p)}}function ju(n,s,r){try{var u=n.stateNode;nS(u,n.type,r,s),u[Ie]=s}catch(p){It(n,n.return,p)}}function Og(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ui(n.type)||n.tag===4}function Gu(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Og(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ui(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Vu(n,s,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(n),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Yn));else if(u!==4&&(u===27&&Ui(n.type)&&(r=n.stateNode,s=null),n=n.child,n!==null))for(Vu(n,s,r),n=n.sibling;n!==null;)Vu(n,s,r),n=n.sibling}function Jo(n,s,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?r.insertBefore(n,s):r.appendChild(n);else if(u!==4&&(u===27&&Ui(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(Jo(n,s,r),n=n.sibling;n!==null;)Jo(n,s,r),n=n.sibling}function Lg(n){var s=n.stateNode,r=n.memoizedProps;try{for(var u=n.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);xe(s,u,r),s[_e]=n,s[Ie]=r}catch(m){It(n,n.return,m)}}var ii=!1,fe=!1,qu=!1,Ng=typeof WeakSet=="function"?WeakSet:Set,ve=null;function BA(n,s){if(n=n.containerInfo,dh=Al,n=qf(n),Fc(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else t:{r=(r=n.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var p=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break t}var b=0,w=-1,M=-1,U=0,q=0,$=n,I=null;e:for(;;){for(var V;$!==r||p!==0&&$.nodeType!==3||(w=b+p),$!==m||u!==0&&$.nodeType!==3||(M=b+u),$.nodeType===3&&(b+=$.nodeValue.length),(V=$.firstChild)!==null;)I=$,$=V;for(;;){if($===n)break e;if(I===r&&++U===p&&(w=b),I===m&&++q===u&&(M=b),(V=$.nextSibling)!==null)break;$=I,I=$.parentNode}$=V}r=w===-1||M===-1?null:{start:w,end:M}}else r=null}r=r||{start:0,end:0}}else r=null;for(fh={focusedElem:n,selectionRange:r},Al=!1,ve=s;ve!==null;)if(s=ve,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ve=n;else for(;ve!==null;){switch(s=ve,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)p=n[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,r=s,p=m.memoizedProps,m=m.memoizedState,u=r.stateNode;try{var st=fs(r.type,p);n=u.getSnapshotBeforeUpdate(st,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(gt){It(r,r.return,gt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,r=n.nodeType,r===9)mh(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":mh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,ve=n;break}ve=s.return}}function kg(n,s,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:ai(n,r),u&4&&fr(5,r);break;case 1:if(ai(n,r),u&4)if(n=r.stateNode,s===null)try{n.componentDidMount()}catch(b){It(r,r.return,b)}else{var p=fs(r.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(p,s,n.__reactInternalSnapshotBeforeUpdate)}catch(b){It(r,r.return,b)}}u&64&&Rg(r),u&512&&pr(r,r.return);break;case 3:if(ai(n,r),u&64&&(n=r.updateQueue,n!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{vp(n,s)}catch(b){It(r,r.return,b)}}break;case 27:s===null&&u&4&&Lg(r);case 26:case 5:ai(n,r),s===null&&u&4&&Dg(r),u&512&&pr(r,r.return);break;case 12:ai(n,r);break;case 31:ai(n,r),u&4&&zg(n,r);break;case 13:ai(n,r),u&4&&Fg(n,r),u&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=VA.bind(null,r),uS(n,r))));break;case 22:if(u=r.memoizedState!==null||ii,!u){s=s!==null&&s.memoizedState!==null||fe,p=ii;var m=fe;ii=u,(fe=s)&&!m?ri(n,r,(r.subtreeFlags&8772)!==0):ai(n,r),ii=p,fe=m}break;case 30:break;default:ai(n,r)}}function Bg(n){var s=n.alternate;s!==null&&(n.alternate=null,Bg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Sc(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Zt=null,je=!1;function si(n,s,r){for(r=r.child;r!==null;)Pg(n,s,r),r=r.sibling}function Pg(n,s,r){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(Fa,r)}catch{}switch(r.tag){case 26:fe||Pn(r,s),si(n,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:fe||Pn(r,s);var u=Zt,p=je;Ui(r.type)&&(Zt=r.stateNode,je=!1),si(n,s,r),_r(r.stateNode),Zt=u,je=p;break;case 5:fe||Pn(r,s);case 6:if(u=Zt,p=je,Zt=null,si(n,s,r),Zt=u,je=p,Zt!==null)if(je)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(r.stateNode)}catch(m){It(r,s,m)}else try{Zt.removeChild(r.stateNode)}catch(m){It(r,s,m)}break;case 18:Zt!==null&&(je?(n=Zt,Rm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),pa(n)):Rm(Zt,r.stateNode));break;case 4:u=Zt,p=je,Zt=r.stateNode.containerInfo,je=!0,si(n,s,r),Zt=u,je=p;break;case 0:case 11:case 14:case 15:Li(2,r,s),fe||Li(4,r,s),si(n,s,r);break;case 1:fe||(Pn(r,s),u=r.stateNode,typeof u.componentWillUnmount=="function"&&Mg(r,s,u)),si(n,s,r);break;case 21:si(n,s,r);break;case 22:fe=(u=fe)||r.memoizedState!==null,si(n,s,r),fe=u;break;default:si(n,s,r)}}function zg(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{pa(n)}catch(r){It(s,s.return,r)}}}function Fg(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{pa(n)}catch(r){It(s,s.return,r)}}function PA(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Ng),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Ng),s;default:throw Error(i(435,n.tag))}}function tl(n,s){var r=PA(n);s.forEach(function(u){if(!r.has(u)){r.add(u);var p=qA.bind(null,n,u);u.then(p,p)}})}function Ge(n,s){var r=s.deletions;if(r!==null)for(var u=0;u<r.length;u++){var p=r[u],m=n,b=s,w=b;t:for(;w!==null;){switch(w.tag){case 27:if(Ui(w.type)){Zt=w.stateNode,je=!1;break t}break;case 5:Zt=w.stateNode,je=!1;break t;case 3:case 4:Zt=w.stateNode.containerInfo,je=!0;break t}w=w.return}if(Zt===null)throw Error(i(160));Pg(m,b,p),Zt=null,je=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Ug(s,n),s=s.sibling}var Rn=null;function Ug(n,s){var r=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ge(s,n),Ve(n),u&4&&(Li(3,n,n.return),fr(3,n),Li(5,n,n.return));break;case 1:Ge(s,n),Ve(n),u&512&&(fe||r===null||Pn(r,r.return)),u&64&&ii&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var p=Rn;if(Ge(s,n),Ve(n),u&512&&(fe||r===null||Pn(r,r.return)),u&4){var m=r!==null?r.memoizedState:null;if(u=n.memoizedState,r===null)if(u===null)if(n.stateNode===null){t:{u=n.type,r=n.memoizedProps,p=p.ownerDocument||p;e:switch(u){case"title":m=p.getElementsByTagName("title")[0],(!m||m[Ha]||m[_e]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(u),p.head.insertBefore(m,p.querySelector("head > title"))),xe(m,u,r),m[_e]=n,ye(m),u=m;break t;case"link":var b=Um("link","href",p).get(u+(r.href||""));if(b){for(var w=0;w<b.length;w++)if(m=b[w],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(w,1);break e}}m=p.createElement(u),xe(m,u,r),p.head.appendChild(m);break;case"meta":if(b=Um("meta","content",p).get(u+(r.content||""))){for(w=0;w<b.length;w++)if(m=b[w],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(w,1);break e}}m=p.createElement(u),xe(m,u,r),p.head.appendChild(m);break;default:throw Error(i(468,u))}m[_e]=n,ye(m),u=m}n.stateNode=u}else Im(p,n.type,n.stateNode);else n.stateNode=Fm(p,u,n.memoizedProps);else m!==u?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,u===null?Im(p,n.type,n.stateNode):Fm(p,u,n.memoizedProps)):u===null&&n.stateNode!==null&&ju(n,n.memoizedProps,r.memoizedProps)}break;case 27:Ge(s,n),Ve(n),u&512&&(fe||r===null||Pn(r,r.return)),r!==null&&u&4&&ju(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Ge(s,n),Ve(n),u&512&&(fe||r===null||Pn(r,r.return)),n.flags&32){p=n.stateNode;try{zs(p,"")}catch(st){It(n,n.return,st)}}u&4&&n.stateNode!=null&&(p=n.memoizedProps,ju(n,p,r!==null?r.memoizedProps:p)),u&1024&&(qu=!0);break;case 6:if(Ge(s,n),Ve(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,r=n.stateNode;try{r.nodeValue=u}catch(st){It(n,n.return,st)}}break;case 3:if(ml=null,p=Rn,Rn=pl(s.containerInfo),Ge(s,n),Rn=p,Ve(n),u&4&&r!==null&&r.memoizedState.isDehydrated)try{pa(s.containerInfo)}catch(st){It(n,n.return,st)}qu&&(qu=!1,Ig(n));break;case 4:u=Rn,Rn=pl(n.stateNode.containerInfo),Ge(s,n),Ve(n),Rn=u;break;case 12:Ge(s,n),Ve(n);break;case 31:Ge(s,n),Ve(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,tl(n,u)));break;case 13:Ge(s,n),Ve(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(nl=Pe()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,tl(n,u)));break;case 22:p=n.memoizedState!==null;var M=r!==null&&r.memoizedState!==null,U=ii,q=fe;if(ii=U||p,fe=q||M,Ge(s,n),fe=q,ii=U,Ve(n),u&8192)t:for(s=n.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(r===null||M||ii||fe||ps(n)),r=null,s=n;;){if(s.tag===5||s.tag===26){if(r===null){M=r=s;try{if(m=M.stateNode,p)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{w=M.stateNode;var $=M.memoizedProps.style,I=$!=null&&$.hasOwnProperty("display")?$.display:null;w.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(st){It(M,M.return,st)}}}else if(s.tag===6){if(r===null){M=s;try{M.stateNode.nodeValue=p?"":M.memoizedProps}catch(st){It(M,M.return,st)}}}else if(s.tag===18){if(r===null){M=s;try{var V=M.stateNode;p?Mm(V,!0):Mm(M.stateNode,!1)}catch(st){It(M,M.return,st)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,tl(n,r))));break;case 19:Ge(s,n),Ve(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,tl(n,u)));break;case 30:break;case 21:break;default:Ge(s,n),Ve(n)}}function Ve(n){var s=n.flags;if(s&2){try{for(var r,u=n.return;u!==null;){if(Og(u)){r=u;break}u=u.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var p=r.stateNode,m=Gu(n);Jo(n,m,p);break;case 5:var b=r.stateNode;r.flags&32&&(zs(b,""),r.flags&=-33);var w=Gu(n);Jo(n,w,b);break;case 3:case 4:var M=r.stateNode.containerInfo,U=Gu(n);Vu(n,U,M);break;default:throw Error(i(161))}}catch(q){It(n,n.return,q)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Ig(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Ig(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ai(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)kg(n,s.alternate,s),s=s.sibling}function ps(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Li(4,s,s.return),ps(s);break;case 1:Pn(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&Mg(s,s.return,r),ps(s);break;case 27:_r(s.stateNode);case 26:case 5:Pn(s,s.return),ps(s);break;case 22:s.memoizedState===null&&ps(s);break;case 30:ps(s);break;default:ps(s)}n=n.sibling}}function ri(n,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,p=n,m=s,b=m.flags;switch(m.tag){case 0:case 11:case 15:ri(p,m,r),fr(4,m);break;case 1:if(ri(p,m,r),u=m,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(U){It(u,u.return,U)}if(u=m,p=u.updateQueue,p!==null){var w=u.stateNode;try{var M=p.shared.hiddenCallbacks;if(M!==null)for(p.shared.hiddenCallbacks=null,p=0;p<M.length;p++)yp(M[p],w)}catch(U){It(u,u.return,U)}}r&&b&64&&Rg(m),pr(m,m.return);break;case 27:Lg(m);case 26:case 5:ri(p,m,r),r&&u===null&&b&4&&Dg(m),pr(m,m.return);break;case 12:ri(p,m,r);break;case 31:ri(p,m,r),r&&b&4&&zg(p,m);break;case 13:ri(p,m,r),r&&b&4&&Fg(p,m);break;case 22:m.memoizedState===null&&ri(p,m,r),pr(m,m.return);break;case 30:break;default:ri(p,m,r)}s=s.sibling}}function Xu(n,s){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&tr(r))}function Yu(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&tr(n))}function Mn(n,s,r,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Hg(n,s,r,u),s=s.sibling}function Hg(n,s,r,u){var p=s.flags;switch(s.tag){case 0:case 11:case 15:Mn(n,s,r,u),p&2048&&fr(9,s);break;case 1:Mn(n,s,r,u);break;case 3:Mn(n,s,r,u),p&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&tr(n)));break;case 12:if(p&2048){Mn(n,s,r,u),n=s.stateNode;try{var m=s.memoizedProps,b=m.id,w=m.onPostCommit;typeof w=="function"&&w(b,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(M){It(s,s.return,M)}}else Mn(n,s,r,u);break;case 31:Mn(n,s,r,u);break;case 13:Mn(n,s,r,u);break;case 23:break;case 22:m=s.stateNode,b=s.alternate,s.memoizedState!==null?m._visibility&2?Mn(n,s,r,u):gr(n,s):m._visibility&2?Mn(n,s,r,u):(m._visibility|=2,ia(n,s,r,u,(s.subtreeFlags&10256)!==0||!1)),p&2048&&Xu(b,s);break;case 24:Mn(n,s,r,u),p&2048&&Yu(s.alternate,s);break;default:Mn(n,s,r,u)}}function ia(n,s,r,u,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,b=s,w=r,M=u,U=b.flags;switch(b.tag){case 0:case 11:case 15:ia(m,b,w,M,p),fr(8,b);break;case 23:break;case 22:var q=b.stateNode;b.memoizedState!==null?q._visibility&2?ia(m,b,w,M,p):gr(m,b):(q._visibility|=2,ia(m,b,w,M,p)),p&&U&2048&&Xu(b.alternate,b);break;case 24:ia(m,b,w,M,p),p&&U&2048&&Yu(b.alternate,b);break;default:ia(m,b,w,M,p)}s=s.sibling}}function gr(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=n,u=s,p=u.flags;switch(u.tag){case 22:gr(r,u),p&2048&&Xu(u.alternate,u);break;case 24:gr(r,u),p&2048&&Yu(u.alternate,u);break;default:gr(r,u)}s=s.sibling}}var mr=8192;function sa(n,s,r){if(n.subtreeFlags&mr)for(n=n.child;n!==null;)jg(n,s,r),n=n.sibling}function jg(n,s,r){switch(n.tag){case 26:sa(n,s,r),n.flags&mr&&n.memoizedState!==null&&ES(r,Rn,n.memoizedState,n.memoizedProps);break;case 5:sa(n,s,r);break;case 3:case 4:var u=Rn;Rn=pl(n.stateNode.containerInfo),sa(n,s,r),Rn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=mr,mr=16777216,sa(n,s,r),mr=u):sa(n,s,r));break;default:sa(n,s,r)}}function Gg(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function yr(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];ve=u,qg(u,n)}Gg(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Vg(n),n=n.sibling}function Vg(n){switch(n.tag){case 0:case 11:case 15:yr(n),n.flags&2048&&Li(9,n,n.return);break;case 3:yr(n);break;case 12:yr(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,el(n)):yr(n);break;default:yr(n)}}function el(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];ve=u,qg(u,n)}Gg(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Li(8,s,s.return),el(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,el(s));break;default:el(s)}n=n.sibling}}function qg(n,s){for(;ve!==null;){var r=ve;switch(r.tag){case 0:case 11:case 15:Li(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:tr(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,ve=u;else t:for(r=n;ve!==null;){u=ve;var p=u.sibling,m=u.return;if(Bg(u),u===r){ve=null;break t}if(p!==null){p.return=m,ve=p;break t}ve=m}}}var zA={getCacheForType:function(n){var s=Te(ue),r=s.data.get(n);return r===void 0&&(r=n(),s.data.set(n,r)),r},cacheSignal:function(){return Te(ue).controller.signal}},FA=typeof WeakMap=="function"?WeakMap:Map,Ft=0,Xt=null,Rt=null,Dt=0,Ut=0,sn=null,Ni=!1,aa=!1,$u=!1,oi=0,ae=0,ki=0,gs=0,Ku=0,an=0,ra=0,vr=null,qe=null,Wu=!1,nl=0,Xg=0,il=1/0,sl=null,Bi=null,me=0,Pi=null,oa=null,li=0,Qu=0,Zu=null,Yg=null,br=0,Ju=null;function rn(){return(Ft&2)!==0&&Dt!==0?Dt&-Dt:L.T!==null?ah():cf()}function $g(){if(an===0)if((Dt&536870912)===0||Nt){var n=ho;ho<<=1,(ho&3932160)===0&&(ho=262144),an=n}else an=536870912;return n=en.current,n!==null&&(n.flags|=32),an}function Xe(n,s,r){(n===Xt&&(Ut===2||Ut===9)||n.cancelPendingCommit!==null)&&(la(n,0),zi(n,Dt,an,!1)),Ia(n,r),((Ft&2)===0||n!==Xt)&&(n===Xt&&((Ft&2)===0&&(gs|=r),ae===4&&zi(n,Dt,an,!1)),zn(n))}function Kg(n,s,r){if((Ft&6)!==0)throw Error(i(327));var u=!r&&(s&127)===0&&(s&n.expiredLanes)===0||Ua(n,s),p=u?HA(n,s):eh(n,s,!0),m=u;do{if(p===0){aa&&!u&&zi(n,s,0,!1);break}else{if(r=n.current.alternate,m&&!UA(r)){p=eh(n,s,!1),m=!1;continue}if(p===2){if(m=s,n.errorRecoveryDisabledLanes&m)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;t:{var w=n;p=vr;var M=w.current.memoizedState.isDehydrated;if(M&&(la(w,b).flags|=256),b=eh(w,b,!1),b!==2){if($u&&!M){w.errorRecoveryDisabledLanes|=m,gs|=m,p=4;break t}m=qe,qe=p,m!==null&&(qe===null?qe=m:qe.push.apply(qe,m))}p=b}if(m=!1,p!==2)continue}}if(p===1){la(n,0),zi(n,s,0,!0);break}t:{switch(u=n,m=p,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:zi(u,s,an,!Ni);break t;case 2:qe=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=nl+300-Pe(),10<p)){if(zi(u,s,an,!Ni),po(u,0,!0)!==0)break t;li=s,u.timeoutHandle=Cm(Wg.bind(null,u,r,qe,sl,Wu,s,an,gs,ra,Ni,m,"Throttled",-0,0),p);break t}Wg(u,r,qe,sl,Wu,s,an,gs,ra,Ni,m,null,-0,0)}}break}while(!0);zn(n)}function Wg(n,s,r,u,p,m,b,w,M,U,q,$,I,V){if(n.timeoutHandle=-1,$=s.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yn},jg(s,m,$);var st=(m&62914560)===m?nl-Pe():(m&4194048)===m?Xg-Pe():0;if(st=_S($,st),st!==null){li=m,n.cancelPendingCommit=st(sm.bind(null,n,s,m,r,u,p,b,w,M,q,$,null,I,V)),zi(n,m,b,!U);return}}sm(n,s,m,r,u,p,b,w,M)}function UA(n){for(var s=n;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var p=r[u],m=p.getSnapshot;p=p.value;try{if(!Je(m(),p))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zi(n,s,r,u){s&=~Ku,s&=~gs,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var p=s;0<p;){var m=31-Ze(p),b=1<<m;u[m]=-1,p&=~b}r!==0&&rf(n,r,s)}function al(){return(Ft&6)===0?(Ar(0),!1):!0}function th(){if(Rt!==null){if(Ut===0)var n=Rt.return;else n=Rt,Qn=rs=null,mu(n),Zs=null,nr=0,n=Rt;for(;n!==null;)xg(n.alternate,n),n=n.return;Rt=null}}function la(n,s){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,aS(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),li=0,th(),Xt=n,Rt=r=Kn(n.current,null),Dt=s,Ut=0,sn=null,Ni=!1,aa=Ua(n,s),$u=!1,ra=an=Ku=gs=ki=ae=0,qe=vr=null,Wu=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var p=31-Ze(u),m=1<<p;s|=n[p],u&=~m}return oi=s,Co(),r}function Qg(n,s){Et=null,L.H=ur,s===Qs||s===ko?(s=fp(),Ut=3):s===su?(s=fp(),Ut=4):Ut=s===Lu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,sn=s,Rt===null&&(ae=1,$o(n,gn(s,n.current)))}function Zg(){var n=en.current;return n===null?!0:(Dt&4194048)===Dt?bn===null:(Dt&62914560)===Dt||(Dt&536870912)!==0?n===bn:!1}function Jg(){var n=L.H;return L.H=ur,n===null?ur:n}function tm(){var n=L.A;return L.A=zA,n}function rl(){ae=4,Ni||(Dt&4194048)!==Dt&&en.current!==null||(aa=!0),(ki&134217727)===0&&(gs&134217727)===0||Xt===null||zi(Xt,Dt,an,!1)}function eh(n,s,r){var u=Ft;Ft|=2;var p=Jg(),m=tm();(Xt!==n||Dt!==s)&&(sl=null,la(n,s)),s=!1;var b=ae;t:do try{if(Ut!==0&&Rt!==null){var w=Rt,M=sn;switch(Ut){case 8:th(),b=6;break t;case 3:case 2:case 9:case 6:en.current===null&&(s=!0);var U=Ut;if(Ut=0,sn=null,ca(n,w,M,U),r&&aa){b=0;break t}break;default:U=Ut,Ut=0,sn=null,ca(n,w,M,U)}}IA(),b=ae;break}catch(q){Qg(n,q)}while(!0);return s&&n.shellSuspendCounter++,Qn=rs=null,Ft=u,L.H=p,L.A=m,Rt===null&&(Xt=null,Dt=0,Co()),b}function IA(){for(;Rt!==null;)em(Rt)}function HA(n,s){var r=Ft;Ft|=2;var u=Jg(),p=tm();Xt!==n||Dt!==s?(sl=null,il=Pe()+500,la(n,s)):aa=Ua(n,s);t:do try{if(Ut!==0&&Rt!==null){s=Rt;var m=sn;e:switch(Ut){case 1:Ut=0,sn=null,ca(n,s,m,1);break;case 2:case 9:if(hp(m)){Ut=0,sn=null,nm(s);break}s=function(){Ut!==2&&Ut!==9||Xt!==n||(Ut=7),zn(n)},m.then(s,s);break t;case 3:Ut=7;break t;case 4:Ut=5;break t;case 7:hp(m)?(Ut=0,sn=null,nm(s)):(Ut=0,sn=null,ca(n,s,m,7));break;case 5:var b=null;switch(Rt.tag){case 26:b=Rt.memoizedState;case 5:case 27:var w=Rt;if(b?Hm(b):w.stateNode.complete){Ut=0,sn=null;var M=w.sibling;if(M!==null)Rt=M;else{var U=w.return;U!==null?(Rt=U,ol(U)):Rt=null}break e}}Ut=0,sn=null,ca(n,s,m,5);break;case 6:Ut=0,sn=null,ca(n,s,m,6);break;case 8:th(),ae=6;break t;default:throw Error(i(462))}}jA();break}catch(q){Qg(n,q)}while(!0);return Qn=rs=null,L.H=u,L.A=p,Ft=r,Rt!==null?0:(Xt=null,Dt=0,Co(),ae)}function jA(){for(;Rt!==null&&!pc();)em(Rt)}function em(n){var s=Tg(n.alternate,n,oi);n.memoizedProps=n.pendingProps,s===null?ol(n):Rt=s}function nm(n){var s=n,r=s.alternate;switch(s.tag){case 15:case 0:s=bg(r,s,s.pendingProps,s.type,void 0,Dt);break;case 11:s=bg(r,s,s.pendingProps,s.type.render,s.ref,Dt);break;case 5:mu(s);default:xg(r,s),s=Rt=tp(s,oi),s=Tg(r,s,oi)}n.memoizedProps=n.pendingProps,s===null?ol(n):Rt=s}function ca(n,s,r,u){Qn=rs=null,mu(s),Zs=null,nr=0;var p=s.return;try{if(DA(n,p,s,r,Dt)){ae=1,$o(n,gn(r,n.current)),Rt=null;return}}catch(m){if(p!==null)throw Rt=p,m;ae=1,$o(n,gn(r,n.current)),Rt=null;return}s.flags&32768?(Nt||u===1?n=!0:aa||(Dt&536870912)!==0?n=!1:(Ni=n=!0,(u===2||u===9||u===3||u===6)&&(u=en.current,u!==null&&u.tag===13&&(u.flags|=16384))),im(s,n)):ol(s)}function ol(n){var s=n;do{if((s.flags&32768)!==0){im(s,Ni);return}n=s.return;var r=NA(s.alternate,s,oi);if(r!==null){Rt=r;return}if(s=s.sibling,s!==null){Rt=s;return}Rt=s=n}while(s!==null);ae===0&&(ae=5)}function im(n,s){do{var r=kA(n.alternate,n);if(r!==null){r.flags&=32767,Rt=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(n=n.sibling,n!==null)){Rt=n;return}Rt=n=r}while(n!==null);ae=6,Rt=null}function sm(n,s,r,u,p,m,b,w,M){n.cancelPendingCommit=null;do ll();while(me!==0);if((Ft&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Gc,S0(n,r,m,b,w,M),n===Xt&&(Rt=Xt=null,Dt=0),oa=s,Pi=n,li=r,Qu=m,Zu=p,Yg=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,XA(Cn,function(){return cm(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=L.T,L.T=null,p=H.p,H.p=2,b=Ft,Ft|=4;try{BA(n,s,r)}finally{Ft=b,H.p=p,L.T=u}}me=1,am(),rm(),om()}}function am(){if(me===1){me=0;var n=Pi,s=oa,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=L.T,L.T=null;var u=H.p;H.p=2;var p=Ft;Ft|=4;try{Ug(s,n);var m=fh,b=qf(n.containerInfo),w=m.focusedElem,M=m.selectionRange;if(b!==w&&w&&w.ownerDocument&&Vf(w.ownerDocument.documentElement,w)){if(M!==null&&Fc(w)){var U=M.start,q=M.end;if(q===void 0&&(q=U),"selectionStart"in w)w.selectionStart=U,w.selectionEnd=Math.min(q,w.value.length);else{var $=w.ownerDocument||document,I=$&&$.defaultView||window;if(I.getSelection){var V=I.getSelection(),st=w.textContent.length,gt=Math.min(M.start,st),Vt=M.end===void 0?gt:Math.min(M.end,st);!V.extend&&gt>Vt&&(b=Vt,Vt=gt,gt=b);var z=Gf(w,gt),k=Gf(w,Vt);if(z&&k&&(V.rangeCount!==1||V.anchorNode!==z.node||V.anchorOffset!==z.offset||V.focusNode!==k.node||V.focusOffset!==k.offset)){var F=$.createRange();F.setStart(z.node,z.offset),V.removeAllRanges(),gt>Vt?(V.addRange(F),V.extend(k.node,k.offset)):(F.setEnd(k.node,k.offset),V.addRange(F))}}}}for($=[],V=w;V=V.parentNode;)V.nodeType===1&&$.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<$.length;w++){var Y=$[w];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Al=!!dh,fh=dh=null}finally{Ft=p,H.p=u,L.T=r}}n.current=s,me=2}}function rm(){if(me===2){me=0;var n=Pi,s=oa,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=L.T,L.T=null;var u=H.p;H.p=2;var p=Ft;Ft|=4;try{kg(n,s.alternate,s)}finally{Ft=p,H.p=u,L.T=r}}me=3}}function om(){if(me===4||me===3){me=0,gc();var n=Pi,s=oa,r=li,u=Yg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?me=5:(me=0,oa=Pi=null,lm(n,n.pendingLanes));var p=n.pendingLanes;if(p===0&&(Bi=null),bc(r),s=s.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(Fa,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=L.T,p=H.p,H.p=2,L.T=null;try{for(var m=n.onRecoverableError,b=0;b<u.length;b++){var w=u[b];m(w.value,{componentStack:w.stack})}}finally{L.T=s,H.p=p}}(li&3)!==0&&ll(),zn(n),p=n.pendingLanes,(r&261930)!==0&&(p&42)!==0?n===Ju?br++:(br=0,Ju=n):br=0,Ar(0)}}function lm(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,tr(s)))}function ll(){return am(),rm(),om(),cm()}function cm(){if(me!==5)return!1;var n=Pi,s=Qu;Qu=0;var r=bc(li),u=L.T,p=H.p;try{H.p=32>r?32:r,L.T=null,r=Zu,Zu=null;var m=Pi,b=li;if(me=0,oa=Pi=null,li=0,(Ft&6)!==0)throw Error(i(331));var w=Ft;if(Ft|=4,Vg(m.current),Hg(m,m.current,b,r),Ft=w,Ar(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(Fa,m)}catch{}return!0}finally{H.p=p,L.T=u,lm(n,s)}}function um(n,s,r){s=gn(r,s),s=Ou(n.stateNode,s,2),n=Mi(n,s,2),n!==null&&(Ia(n,2),zn(n))}function It(n,s,r){if(n.tag===3)um(n,n,r);else for(;s!==null;){if(s.tag===3){um(s,n,r);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Bi===null||!Bi.has(u))){n=gn(r,n),r=hg(2),u=Mi(s,r,2),u!==null&&(dg(r,u,s,n),Ia(u,2),zn(u));break}}s=s.return}}function nh(n,s,r){var u=n.pingCache;if(u===null){u=n.pingCache=new FA;var p=new Set;u.set(s,p)}else p=u.get(s),p===void 0&&(p=new Set,u.set(s,p));p.has(r)||($u=!0,p.add(r),n=GA.bind(null,n,s,r),s.then(n,n))}function GA(n,s,r){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Xt===n&&(Dt&r)===r&&(ae===4||ae===3&&(Dt&62914560)===Dt&&300>Pe()-nl?(Ft&2)===0&&la(n,0):Ku|=r,ra===Dt&&(ra=0)),zn(n)}function hm(n,s){s===0&&(s=af()),n=is(n,s),n!==null&&(Ia(n,s),zn(n))}function VA(n){var s=n.memoizedState,r=0;s!==null&&(r=s.retryLane),hm(n,r)}function qA(n,s){var r=0;switch(n.tag){case 31:case 13:var u=n.stateNode,p=n.memoizedState;p!==null&&(r=p.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),hm(n,r)}function XA(n,s){return za(n,s)}var cl=null,ua=null,ih=!1,ul=!1,sh=!1,Fi=0;function zn(n){n!==ua&&n.next===null&&(ua===null?cl=ua=n:ua=ua.next=n),ul=!0,ih||(ih=!0,$A())}function Ar(n,s){if(!sh&&ul){sh=!0;do for(var r=!1,u=cl;u!==null;){if(n!==0){var p=u.pendingLanes;if(p===0)var m=0;else{var b=u.suspendedLanes,w=u.pingedLanes;m=(1<<31-Ze(42|n)+1)-1,m&=p&~(b&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,gm(u,m))}else m=Dt,m=po(u,u===Xt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Ua(u,m)||(r=!0,gm(u,m));u=u.next}while(r);sh=!1}}function YA(){dm()}function dm(){ul=ih=!1;var n=0;Fi!==0&&sS()&&(n=Fi);for(var s=Pe(),r=null,u=cl;u!==null;){var p=u.next,m=fm(u,s);m===0?(u.next=null,r===null?cl=p:r.next=p,p===null&&(ua=r)):(r=u,(n!==0||(m&3)!==0)&&(ul=!0)),u=p}me!==0&&me!==5||Ar(n),Fi!==0&&(Fi=0)}function fm(n,s){for(var r=n.suspendedLanes,u=n.pingedLanes,p=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var b=31-Ze(m),w=1<<b,M=p[b];M===-1?((w&r)===0||(w&u)!==0)&&(p[b]=A0(w,s)):M<=s&&(n.expiredLanes|=w),m&=~w}if(s=Xt,r=Dt,r=po(n,n===s?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,r===0||n===s&&(Ut===2||Ut===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&bi(u),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||Ua(n,r)){if(s=r&-r,s===n.callbackPriority)return s;switch(u!==null&&bi(u),bc(r)){case 2:case 8:r=Tn;break;case 32:r=Cn;break;case 268435456:r=Ds;break;default:r=Cn}return u=pm.bind(null,n),r=za(r,u),n.callbackPriority=s,n.callbackNode=r,s}return u!==null&&u!==null&&bi(u),n.callbackPriority=2,n.callbackNode=null,2}function pm(n,s){if(me!==0&&me!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(ll()&&n.callbackNode!==r)return null;var u=Dt;return u=po(n,n===Xt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Kg(n,u,s),fm(n,Pe()),n.callbackNode!=null&&n.callbackNode===r?pm.bind(null,n):null)}function gm(n,s){if(ll())return null;Kg(n,s,!0)}function $A(){rS(function(){(Ft&6)!==0?za(co,YA):dm()})}function ah(){if(Fi===0){var n=Ks;n===0&&(n=uo,uo<<=1,(uo&261888)===0&&(uo=256)),Fi=n}return Fi}function mm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:vo(""+n)}function ym(n,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,n.id&&r.setAttribute("form",n.id),s.parentNode.insertBefore(r,s),n=new FormData(n),r.parentNode.removeChild(r),n}function KA(n,s,r,u,p){if(s==="submit"&&r&&r.stateNode===p){var m=mm((p[Ie]||null).action),b=u.submitter;b&&(s=(s=b[Ie]||null)?mm(s.formAction):b.getAttribute("formAction"),s!==null&&(m=s,b=null));var w=new Eo("action","action",null,u,p);n.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Fi!==0){var M=b?ym(p,b):new FormData(p);Tu(r,{pending:!0,data:M,method:p.method,action:m},null,M)}}else typeof m=="function"&&(w.preventDefault(),M=b?ym(p,b):new FormData(p),Tu(r,{pending:!0,data:M,method:p.method,action:m},m,M))},currentTarget:p}]})}}for(var rh=0;rh<jc.length;rh++){var oh=jc[rh],WA=oh.toLowerCase(),QA=oh[0].toUpperCase()+oh.slice(1);xn(WA,"on"+QA)}xn($f,"onAnimationEnd"),xn(Kf,"onAnimationIteration"),xn(Wf,"onAnimationStart"),xn("dblclick","onDoubleClick"),xn("focusin","onFocus"),xn("focusout","onBlur"),xn(fA,"onTransitionRun"),xn(pA,"onTransitionStart"),xn(gA,"onTransitionCancel"),xn(Qf,"onTransitionEnd"),Bs("onMouseEnter",["mouseout","mouseover"]),Bs("onMouseLeave",["mouseout","mouseover"]),Bs("onPointerEnter",["pointerout","pointerover"]),Bs("onPointerLeave",["pointerout","pointerover"]),Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sr));function vm(n,s){s=(s&4)!==0;for(var r=0;r<n.length;r++){var u=n[r],p=u.event;u=u.listeners;t:{var m=void 0;if(s)for(var b=u.length-1;0<=b;b--){var w=u[b],M=w.instance,U=w.currentTarget;if(w=w.listener,M!==m&&p.isPropagationStopped())break t;m=w,p.currentTarget=U;try{m(p)}catch(q){To(q)}p.currentTarget=null,m=M}else for(b=0;b<u.length;b++){if(w=u[b],M=w.instance,U=w.currentTarget,w=w.listener,M!==m&&p.isPropagationStopped())break t;m=w,p.currentTarget=U;try{m(p)}catch(q){To(q)}p.currentTarget=null,m=M}}}}function Mt(n,s){var r=s[Ac];r===void 0&&(r=s[Ac]=new Set);var u=n+"__bubble";r.has(u)||(bm(s,n,2,!1),r.add(u))}function lh(n,s,r){var u=0;s&&(u|=4),bm(r,n,u,s)}var hl="_reactListening"+Math.random().toString(36).slice(2);function ch(n){if(!n[hl]){n[hl]=!0,df.forEach(function(r){r!=="selectionchange"&&(ZA.has(r)||lh(r,!1,n),lh(r,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[hl]||(s[hl]=!0,lh("selectionchange",!1,s))}}function bm(n,s,r,u){switch($m(s)){case 2:var p=CS;break;case 8:p=xS;break;default:p=wh}r=p.bind(null,s,r,n),p=void 0,!Mc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),u?p!==void 0?n.addEventListener(s,r,{capture:!0,passive:p}):n.addEventListener(s,r,!0):p!==void 0?n.addEventListener(s,r,{passive:p}):n.addEventListener(s,r,!1)}function uh(n,s,r,u,p){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var w=u.stateNode.containerInfo;if(w===p)break;if(b===4)for(b=u.return;b!==null;){var M=b.tag;if((M===3||M===4)&&b.stateNode.containerInfo===p)return;b=b.return}for(;w!==null;){if(b=Ls(w),b===null)return;if(M=b.tag,M===5||M===6||M===26||M===27){u=m=b;continue t}w=w.parentNode}}u=u.return}wf(function(){var U=m,q=xc(r),$=[];t:{var I=Zf.get(n);if(I!==void 0){var V=Eo,st=n;switch(n){case"keypress":if(Ao(r)===0)break t;case"keydown":case"keyup":V=q0;break;case"focusin":st="focus",V=Nc;break;case"focusout":st="blur",V=Nc;break;case"beforeblur":case"afterblur":V=Nc;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=N0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=$0;break;case $f:case Kf:case Wf:V=P0;break;case Qf:V=W0;break;case"scroll":case"scrollend":V=O0;break;case"wheel":V=Z0;break;case"copy":case"cut":case"paste":V=F0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Mf;break;case"toggle":case"beforetoggle":V=tA}var gt=(s&4)!==0,Vt=!gt&&(n==="scroll"||n==="scrollend"),z=gt?I!==null?I+"Capture":null:I;gt=[];for(var k=U,F;k!==null;){var Y=k;if(F=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||F===null||z===null||(Y=Ga(k,z),Y!=null&&gt.push(Er(k,Y,F))),Vt)break;k=k.return}0<gt.length&&(I=new V(I,st,null,r,q),$.push({event:I,listeners:gt}))}}if((s&7)===0){t:{if(I=n==="mouseover"||n==="pointerover",V=n==="mouseout"||n==="pointerout",I&&r!==Cc&&(st=r.relatedTarget||r.fromElement)&&(Ls(st)||st[Os]))break t;if((V||I)&&(I=q.window===q?q:(I=q.ownerDocument)?I.defaultView||I.parentWindow:window,V?(st=r.relatedTarget||r.toElement,V=U,st=st?Ls(st):null,st!==null&&(Vt=o(st),gt=st.tag,st!==Vt||gt!==5&&gt!==27&&gt!==6)&&(st=null)):(V=null,st=U),V!==st)){if(gt=xf,Y="onMouseLeave",z="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(gt=Mf,Y="onPointerLeave",z="onPointerEnter",k="pointer"),Vt=V==null?I:ja(V),F=st==null?I:ja(st),I=new gt(Y,k+"leave",V,r,q),I.target=Vt,I.relatedTarget=F,Y=null,Ls(q)===U&&(gt=new gt(z,k+"enter",st,r,q),gt.target=F,gt.relatedTarget=Vt,Y=gt),Vt=Y,V&&st)e:{for(gt=JA,z=V,k=st,F=0,Y=z;Y;Y=gt(Y))F++;Y=0;for(var dt=k;dt;dt=gt(dt))Y++;for(;0<F-Y;)z=gt(z),F--;for(;0<Y-F;)k=gt(k),Y--;for(;F--;){if(z===k||k!==null&&z===k.alternate){gt=z;break e}z=gt(z),k=gt(k)}gt=null}else gt=null;V!==null&&Am($,I,V,gt,!1),st!==null&&Vt!==null&&Am($,Vt,st,gt,!0)}}t:{if(I=U?ja(U):window,V=I.nodeName&&I.nodeName.toLowerCase(),V==="select"||V==="input"&&I.type==="file")var Pt=zf;else if(Bf(I))if(Ff)Pt=uA;else{Pt=lA;var rt=oA}else V=I.nodeName,!V||V.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?U&&Tc(U.elementType)&&(Pt=zf):Pt=cA;if(Pt&&(Pt=Pt(n,U))){Pf($,Pt,r,q);break t}rt&&rt(n,I,U),n==="focusout"&&U&&I.type==="number"&&U.memoizedProps.value!=null&&wc(I,"number",I.value)}switch(rt=U?ja(U):window,n){case"focusin":(Bf(rt)||rt.contentEditable==="true")&&(Hs=rt,Uc=U,Qa=null);break;case"focusout":Qa=Uc=Hs=null;break;case"mousedown":Ic=!0;break;case"contextmenu":case"mouseup":case"dragend":Ic=!1,Xf($,r,q);break;case"selectionchange":if(dA)break;case"keydown":case"keyup":Xf($,r,q)}var wt;if(Bc)t:{switch(n){case"compositionstart":var Ot="onCompositionStart";break t;case"compositionend":Ot="onCompositionEnd";break t;case"compositionupdate":Ot="onCompositionUpdate";break t}Ot=void 0}else Is?Nf(n,r)&&(Ot="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(Ot="onCompositionStart");Ot&&(Df&&r.locale!=="ko"&&(Is||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&Is&&(wt=Tf()):(Ei=q,Dc="value"in Ei?Ei.value:Ei.textContent,Is=!0)),rt=dl(U,Ot),0<rt.length&&(Ot=new Rf(Ot,n,null,r,q),$.push({event:Ot,listeners:rt}),wt?Ot.data=wt:(wt=kf(r),wt!==null&&(Ot.data=wt)))),(wt=nA?iA(n,r):sA(n,r))&&(Ot=dl(U,"onBeforeInput"),0<Ot.length&&(rt=new Rf("onBeforeInput","beforeinput",null,r,q),$.push({event:rt,listeners:Ot}),rt.data=wt)),KA($,n,U,r,q)}vm($,s)})}function Er(n,s,r){return{instance:n,listener:s,currentTarget:r}}function dl(n,s){for(var r=s+"Capture",u=[];n!==null;){var p=n,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=Ga(n,r),p!=null&&u.unshift(Er(n,p,m)),p=Ga(n,s),p!=null&&u.push(Er(n,p,m))),n.tag===3)return u;n=n.return}return[]}function JA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Am(n,s,r,u,p){for(var m=s._reactName,b=[];r!==null&&r!==u;){var w=r,M=w.alternate,U=w.stateNode;if(w=w.tag,M!==null&&M===u)break;w!==5&&w!==26&&w!==27||U===null||(M=U,p?(U=Ga(r,m),U!=null&&b.unshift(Er(r,U,M))):p||(U=Ga(r,m),U!=null&&b.push(Er(r,U,M)))),r=r.return}b.length!==0&&n.push({event:s,listeners:b})}var tS=/\r\n?/g,eS=/\u0000|\uFFFD/g;function Sm(n){return(typeof n=="string"?n:""+n).replace(tS,`
`).replace(eS,"")}function Em(n,s){return s=Sm(s),Sm(n)===s}function Gt(n,s,r,u,p,m){switch(r){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||zs(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&zs(n,""+u);break;case"className":mo(n,"class",u);break;case"tabIndex":mo(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":mo(n,r,u);break;case"style":Ef(n,u,m);break;case"data":if(s!=="object"){mo(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||r!=="href")){n.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=vo(""+u),n.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(s!=="input"&&Gt(n,s,"name",p.name,p,null),Gt(n,s,"formEncType",p.formEncType,p,null),Gt(n,s,"formMethod",p.formMethod,p,null),Gt(n,s,"formTarget",p.formTarget,p,null)):(Gt(n,s,"encType",p.encType,p,null),Gt(n,s,"method",p.method,p,null),Gt(n,s,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=vo(""+u),n.setAttribute(r,u);break;case"onClick":u!=null&&(n.onclick=Yn);break;case"onScroll":u!=null&&Mt("scroll",n);break;case"onScrollEnd":u!=null&&Mt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=r}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}r=vo(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""+u):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":u===!0?n.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,u):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(r,u):n.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(r):n.setAttribute(r,u);break;case"popover":Mt("beforetoggle",n),Mt("toggle",n),go(n,"popover",u);break;case"xlinkActuate":Xn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Xn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Xn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Xn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Xn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Xn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Xn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Xn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Xn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":go(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=M0.get(r)||r,go(n,r,u))}}function hh(n,s,r,u,p,m){switch(r){case"style":Ef(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=r}}break;case"children":typeof u=="string"?zs(n,u):(typeof u=="number"||typeof u=="bigint")&&zs(n,""+u);break;case"onScroll":u!=null&&Mt("scroll",n);break;case"onScrollEnd":u!=null&&Mt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Yn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ff.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),s=r.slice(2,p?r.length-7:void 0),m=n[Ie]||null,m=m!=null?m[r]:null,typeof m=="function"&&n.removeEventListener(s,m,p),typeof u=="function")){typeof m!="function"&&m!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(s,u,p);break t}r in n?n[r]=u:u===!0?n.setAttribute(r,""):go(n,r,u)}}}function xe(n,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",n),Mt("load",n);var u=!1,p=!1,m;for(m in r)if(r.hasOwnProperty(m)){var b=r[m];if(b!=null)switch(m){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Gt(n,s,m,b,r,null)}}p&&Gt(n,s,"srcSet",r.srcSet,r,null),u&&Gt(n,s,"src",r.src,r,null);return;case"input":Mt("invalid",n);var w=m=b=p=null,M=null,U=null;for(u in r)if(r.hasOwnProperty(u)){var q=r[u];if(q!=null)switch(u){case"name":p=q;break;case"type":b=q;break;case"checked":M=q;break;case"defaultChecked":U=q;break;case"value":m=q;break;case"defaultValue":w=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,s));break;default:Gt(n,s,u,q,r,null)}}vf(n,m,w,M,U,b,p,!1);return;case"select":Mt("invalid",n),u=b=m=null;for(p in r)if(r.hasOwnProperty(p)&&(w=r[p],w!=null))switch(p){case"value":m=w;break;case"defaultValue":b=w;break;case"multiple":u=w;default:Gt(n,s,p,w,r,null)}s=m,r=b,n.multiple=!!u,s!=null?Ps(n,!!u,s,!1):r!=null&&Ps(n,!!u,r,!0);return;case"textarea":Mt("invalid",n),m=p=u=null;for(b in r)if(r.hasOwnProperty(b)&&(w=r[b],w!=null))switch(b){case"value":u=w;break;case"defaultValue":p=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:Gt(n,s,b,w,r,null)}Af(n,u,p,m);return;case"option":for(M in r)if(r.hasOwnProperty(M)&&(u=r[M],u!=null))switch(M){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Gt(n,s,M,u,r,null)}return;case"dialog":Mt("beforetoggle",n),Mt("toggle",n),Mt("cancel",n),Mt("close",n);break;case"iframe":case"object":Mt("load",n);break;case"video":case"audio":for(u=0;u<Sr.length;u++)Mt(Sr[u],n);break;case"image":Mt("error",n),Mt("load",n);break;case"details":Mt("toggle",n);break;case"embed":case"source":case"link":Mt("error",n),Mt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in r)if(r.hasOwnProperty(U)&&(u=r[U],u!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Gt(n,s,U,u,r,null)}return;default:if(Tc(s)){for(q in r)r.hasOwnProperty(q)&&(u=r[q],u!==void 0&&hh(n,s,q,u,r,void 0));return}}for(w in r)r.hasOwnProperty(w)&&(u=r[w],u!=null&&Gt(n,s,w,u,r,null))}function nS(n,s,r,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,b=null,w=null,M=null,U=null,q=null;for(V in r){var $=r[V];if(r.hasOwnProperty(V)&&$!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":M=$;default:u.hasOwnProperty(V)||Gt(n,s,V,null,u,$)}}for(var I in u){var V=u[I];if($=r[I],u.hasOwnProperty(I)&&(V!=null||$!=null))switch(I){case"type":m=V;break;case"name":p=V;break;case"checked":U=V;break;case"defaultChecked":q=V;break;case"value":b=V;break;case"defaultValue":w=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,s));break;default:V!==$&&Gt(n,s,I,V,u,$)}}_c(n,b,w,M,U,q,m,p);return;case"select":V=b=w=I=null;for(m in r)if(M=r[m],r.hasOwnProperty(m)&&M!=null)switch(m){case"value":break;case"multiple":V=M;default:u.hasOwnProperty(m)||Gt(n,s,m,null,u,M)}for(p in u)if(m=u[p],M=r[p],u.hasOwnProperty(p)&&(m!=null||M!=null))switch(p){case"value":I=m;break;case"defaultValue":w=m;break;case"multiple":b=m;default:m!==M&&Gt(n,s,p,m,u,M)}s=w,r=b,u=V,I!=null?Ps(n,!!r,I,!1):!!u!=!!r&&(s!=null?Ps(n,!!r,s,!0):Ps(n,!!r,r?[]:"",!1));return;case"textarea":V=I=null;for(w in r)if(p=r[w],r.hasOwnProperty(w)&&p!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Gt(n,s,w,null,u,p)}for(b in u)if(p=u[b],m=r[b],u.hasOwnProperty(b)&&(p!=null||m!=null))switch(b){case"value":I=p;break;case"defaultValue":V=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==m&&Gt(n,s,b,p,u,m)}bf(n,I,V);return;case"option":for(var st in r)if(I=r[st],r.hasOwnProperty(st)&&I!=null&&!u.hasOwnProperty(st))switch(st){case"selected":n.selected=!1;break;default:Gt(n,s,st,null,u,I)}for(M in u)if(I=u[M],V=r[M],u.hasOwnProperty(M)&&I!==V&&(I!=null||V!=null))switch(M){case"selected":n.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:Gt(n,s,M,I,u,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in r)I=r[gt],r.hasOwnProperty(gt)&&I!=null&&!u.hasOwnProperty(gt)&&Gt(n,s,gt,null,u,I);for(U in u)if(I=u[U],V=r[U],u.hasOwnProperty(U)&&I!==V&&(I!=null||V!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(137,s));break;default:Gt(n,s,U,I,u,V)}return;default:if(Tc(s)){for(var Vt in r)I=r[Vt],r.hasOwnProperty(Vt)&&I!==void 0&&!u.hasOwnProperty(Vt)&&hh(n,s,Vt,void 0,u,I);for(q in u)I=u[q],V=r[q],!u.hasOwnProperty(q)||I===V||I===void 0&&V===void 0||hh(n,s,q,I,u,V);return}}for(var z in r)I=r[z],r.hasOwnProperty(z)&&I!=null&&!u.hasOwnProperty(z)&&Gt(n,s,z,null,u,I);for($ in u)I=u[$],V=r[$],!u.hasOwnProperty($)||I===V||I==null&&V==null||Gt(n,s,$,I,u,V)}function _m(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function iS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var p=r[u],m=p.transferSize,b=p.initiatorType,w=p.duration;if(m&&w&&_m(b)){for(b=0,w=p.responseEnd,u+=1;u<r.length;u++){var M=r[u],U=M.startTime;if(U>w)break;var q=M.transferSize,$=M.initiatorType;q&&_m($)&&(M=M.responseEnd,b+=q*(M<w?1:(w-U)/(M-U)))}if(--u,s+=8*(m+b)/(p.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var dh=null,fh=null;function fl(n){return n.nodeType===9?n:n.ownerDocument}function wm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tm(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function ph(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var gh=null;function sS(){var n=window.event;return n&&n.type==="popstate"?n===gh?!1:(gh=n,!0):(gh=null,!1)}var Cm=typeof setTimeout=="function"?setTimeout:void 0,aS=typeof clearTimeout=="function"?clearTimeout:void 0,xm=typeof Promise=="function"?Promise:void 0,rS=typeof queueMicrotask=="function"?queueMicrotask:typeof xm<"u"?function(n){return xm.resolve(null).then(n).catch(oS)}:Cm;function oS(n){setTimeout(function(){throw n})}function Ui(n){return n==="head"}function Rm(n,s){var r=s,u=0;do{var p=r.nextSibling;if(n.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(u===0){n.removeChild(p),pa(s);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")_r(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,_r(r);for(var m=r.firstChild;m;){var b=m.nextSibling,w=m.nodeName;m[Ha]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=b}}else r==="body"&&_r(n.ownerDocument.body);r=p}while(r);pa(s)}function Mm(n,s){var r=n;n=0;do{var u=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=u}while(r)}function mh(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":mh(r),Sc(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function lS(n,s,r,u){for(;n.nodeType===1;){var p=r;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ha])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==p.rel||n.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||n.getAttribute("title")!==(p.title==null?null:p.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(p.src==null?null:p.src)||n.getAttribute("type")!==(p.type==null?null:p.type)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=An(n.nextSibling),n===null)break}return null}function cS(n,s,r){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=An(n.nextSibling),n===null))return null;return n}function Dm(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=An(n.nextSibling),n===null))return null;return n}function yh(n){return n.data==="$?"||n.data==="$~"}function vh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function uS(n,s){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||r.readyState!=="loading")s();else{var u=function(){s(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function An(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var bh=null;function Om(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(s===0)return An(n.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}n=n.nextSibling}return null}function Lm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return n;s--}else r!=="/$"&&r!=="/&"||s++}n=n.previousSibling}return null}function Nm(n,s,r){switch(s=fl(r),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function _r(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Sc(n)}var Sn=new Map,km=new Set;function pl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ci=H.d;H.d={f:hS,r:dS,D:fS,C:pS,L:gS,m:mS,X:vS,S:yS,M:bS};function hS(){var n=ci.f(),s=al();return n||s}function dS(n){var s=Ns(n);s!==null&&s.tag===5&&s.type==="form"?Qp(s):ci.r(n)}var ha=typeof document>"u"?null:document;function Bm(n,s,r){var u=ha;if(u&&typeof s=="string"&&s){var p=fn(s);p='link[rel="'+n+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),km.has(p)||(km.add(p),n={rel:n,crossOrigin:r,href:s},u.querySelector(p)===null&&(s=u.createElement("link"),xe(s,"link",n),ye(s),u.head.appendChild(s)))}}function fS(n){ci.D(n),Bm("dns-prefetch",n,null)}function pS(n,s){ci.C(n,s),Bm("preconnect",n,s)}function gS(n,s,r){ci.L(n,s,r);var u=ha;if(u&&n&&s){var p='link[rel="preload"][as="'+fn(s)+'"]';s==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+fn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+fn(r.imageSizes)+'"]')):p+='[href="'+fn(n)+'"]';var m=p;switch(s){case"style":m=da(n);break;case"script":m=fa(n)}Sn.has(m)||(n=y({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:n,as:s},r),Sn.set(m,n),u.querySelector(p)!==null||s==="style"&&u.querySelector(wr(m))||s==="script"&&u.querySelector(Tr(m))||(s=u.createElement("link"),xe(s,"link",n),ye(s),u.head.appendChild(s)))}}function mS(n,s){ci.m(n,s);var r=ha;if(r&&n){var u=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+fn(u)+'"][href="'+fn(n)+'"]',m=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=fa(n)}if(!Sn.has(m)&&(n=y({rel:"modulepreload",href:n},s),Sn.set(m,n),r.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Tr(m)))return}u=r.createElement("link"),xe(u,"link",n),ye(u),r.head.appendChild(u)}}}function yS(n,s,r){ci.S(n,s,r);var u=ha;if(u&&n){var p=ks(u).hoistableStyles,m=da(n);s=s||"default";var b=p.get(m);if(!b){var w={loading:0,preload:null};if(b=u.querySelector(wr(m)))w.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":s},r),(r=Sn.get(m))&&Ah(n,r);var M=b=u.createElement("link");ye(M),xe(M,"link",n),M._p=new Promise(function(U,q){M.onload=U,M.onerror=q}),M.addEventListener("load",function(){w.loading|=1}),M.addEventListener("error",function(){w.loading|=2}),w.loading|=4,gl(b,s,u)}b={type:"stylesheet",instance:b,count:1,state:w},p.set(m,b)}}}function vS(n,s){ci.X(n,s);var r=ha;if(r&&n){var u=ks(r).hoistableScripts,p=fa(n),m=u.get(p);m||(m=r.querySelector(Tr(p)),m||(n=y({src:n,async:!0},s),(s=Sn.get(p))&&Sh(n,s),m=r.createElement("script"),ye(m),xe(m,"link",n),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(p,m))}}function bS(n,s){ci.M(n,s);var r=ha;if(r&&n){var u=ks(r).hoistableScripts,p=fa(n),m=u.get(p);m||(m=r.querySelector(Tr(p)),m||(n=y({src:n,async:!0,type:"module"},s),(s=Sn.get(p))&&Sh(n,s),m=r.createElement("script"),ye(m),xe(m,"link",n),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(p,m))}}function Pm(n,s,r,u){var p=(p=ht.current)?pl(p):null;if(!p)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=da(r.href),r=ks(p).hoistableStyles,u=r.get(s),u||(u={type:"style",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=da(r.href);var m=ks(p).hoistableStyles,b=m.get(n);if(b||(p=p.ownerDocument||p,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,b),(m=p.querySelector(wr(n)))&&!m._p&&(b.instance=m,b.state.loading=5),Sn.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Sn.set(n,r),m||AS(p,n,r,b.state))),s&&u===null)throw Error(i(528,""));return b}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=fa(r),r=ks(p).hoistableScripts,u=r.get(s),u||(u={type:"script",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function da(n){return'href="'+fn(n)+'"'}function wr(n){return'link[rel="stylesheet"]['+n+"]"}function zm(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function AS(n,s,r,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),xe(s,"link",r),ye(s),n.head.appendChild(s))}function fa(n){return'[src="'+fn(n)+'"]'}function Tr(n){return"script[async]"+n}function Fm(n,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+fn(r.href)+'"]');if(u)return s.instance=u,ye(u),u;var p=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),ye(u),xe(u,"style",p),gl(u,r.precedence,n),s.instance=u;case"stylesheet":p=da(r.href);var m=n.querySelector(wr(p));if(m)return s.state.loading|=4,s.instance=m,ye(m),m;u=zm(r),(p=Sn.get(p))&&Ah(u,p),m=(n.ownerDocument||n).createElement("link"),ye(m);var b=m;return b._p=new Promise(function(w,M){b.onload=w,b.onerror=M}),xe(m,"link",u),s.state.loading|=4,gl(m,r.precedence,n),s.instance=m;case"script":return m=fa(r.src),(p=n.querySelector(Tr(m)))?(s.instance=p,ye(p),p):(u=r,(p=Sn.get(m))&&(u=y({},r),Sh(u,p)),n=n.ownerDocument||n,p=n.createElement("script"),ye(p),xe(p,"link",u),n.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,gl(u,r.precedence,n));return s.instance}function gl(n,s,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,m=p,b=0;b<u.length;b++){var w=u[b];if(w.dataset.precedence===s)m=w;else if(m!==p)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(n,s.firstChild))}function Ah(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Sh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var ml=null;function Um(n,s,r){if(ml===null){var u=new Map,p=ml=new Map;p.set(r,u)}else p=ml,u=p.get(r),u||(u=new Map,p.set(r,u));if(u.has(n))return u;for(u.set(n,null),r=r.getElementsByTagName(n),p=0;p<r.length;p++){var m=r[p];if(!(m[Ha]||m[_e]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(s)||"";b=n+b;var w=u.get(b);w?w.push(m):u.set(b,[m])}}return u}function Im(n,s,r){n=n.ownerDocument||n,n.head.insertBefore(r,s==="title"?n.querySelector("head > title"):null)}function SS(n,s,r){if(r===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Hm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function ES(n,s,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=da(u.href),m=s.querySelector(wr(p));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=yl.bind(n),s.then(n,n)),r.state.loading|=4,r.instance=m,ye(m);return}m=s.ownerDocument||s,u=zm(u),(p=Sn.get(p))&&Ah(u,p),m=m.createElement("link"),ye(m);var b=m;b._p=new Promise(function(w,M){b.onload=w,b.onerror=M}),xe(m,"link",u),r.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=yl.bind(n),s.addEventListener("load",r),s.addEventListener("error",r))}}var Eh=0;function _S(n,s){return n.stylesheets&&n.count===0&&bl(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var u=setTimeout(function(){if(n.stylesheets&&bl(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Eh===0&&(Eh=62500*iS());var p=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&bl(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Eh?50:800)+s);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function yl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bl(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var vl=null;function bl(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,vl=new Map,s.forEach(wS,n),vl=null,yl.call(n))}function wS(n,s){if(!(s.state.loading&4)){var r=vl.get(n);if(r)var u=r.get(null);else{r=new Map,vl.set(n,r);for(var p=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var b=p[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),u=b)}u&&r.set(null,u)}p=s.instance,b=p.getAttribute("data-precedence"),m=r.get(b)||u,m===u&&r.set(null,p),r.set(b,p),this.count++,u=yl.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),m?m.parentNode.insertBefore(p,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(p,n.firstChild)),s.state.loading|=4}}var Cr={$$typeof:C,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function TS(n,s,r,u,p,m,b,w,M){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yc(0),this.hiddenUpdates=yc(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function jm(n,s,r,u,p,m,b,w,M,U,q,$){return n=new TS(n,s,r,b,M,U,q,$,w),s=1,m===!0&&(s|=24),m=tn(3,null,null,s),n.current=m,m.stateNode=n,s=eu(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:r,cache:s},au(m),n}function Gm(n){return n?(n=Vs,n):Vs}function Vm(n,s,r,u,p,m){p=Gm(p),u.context===null?u.context=p:u.pendingContext=p,u=Ri(s),u.payload={element:r},m=m===void 0?null:m,m!==null&&(u.callback=m),r=Mi(n,u,s),r!==null&&(Xe(r,n,s),sr(r,n,s))}function qm(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<s?r:s}}function _h(n,s){qm(n,s),(n=n.alternate)&&qm(n,s)}function Xm(n){if(n.tag===13||n.tag===31){var s=is(n,67108864);s!==null&&Xe(s,n,67108864),_h(n,67108864)}}function Ym(n){if(n.tag===13||n.tag===31){var s=rn();s=vc(s);var r=is(n,s);r!==null&&Xe(r,n,s),_h(n,s)}}var Al=!0;function CS(n,s,r,u){var p=L.T;L.T=null;var m=H.p;try{H.p=2,wh(n,s,r,u)}finally{H.p=m,L.T=p}}function xS(n,s,r,u){var p=L.T;L.T=null;var m=H.p;try{H.p=8,wh(n,s,r,u)}finally{H.p=m,L.T=p}}function wh(n,s,r,u){if(Al){var p=Th(u);if(p===null)uh(n,s,u,Sl,r),Km(n,u);else if(MS(p,n,s,r,u))u.stopPropagation();else if(Km(n,u),s&4&&-1<RS.indexOf(n)){for(;p!==null;){var m=Ns(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Zi(m.pendingLanes);if(b!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var M=1<<31-Ze(b);w.entanglements[1]|=M,b&=~M}zn(m),(Ft&6)===0&&(il=Pe()+500,Ar(0))}}break;case 31:case 13:w=is(m,2),w!==null&&Xe(w,m,2),al(),_h(m,2)}if(m=Th(u),m===null&&uh(n,s,u,Sl,r),m===p)break;p=m}p!==null&&u.stopPropagation()}else uh(n,s,u,null,r)}}function Th(n){return n=xc(n),Ch(n)}var Sl=null;function Ch(n){if(Sl=null,n=Ls(n),n!==null){var s=o(n);if(s===null)n=null;else{var r=s.tag;if(r===13){if(n=l(s),n!==null)return n;n=null}else if(r===31){if(n=h(s),n!==null)return n;n=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Sl=n,null}function $m(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mc()){case co:return 2;case Tn:return 8;case Cn:case Nn:return 32;case Ds:return 268435456;default:return 32}default:return 32}}var xh=!1,Ii=null,Hi=null,ji=null,xr=new Map,Rr=new Map,Gi=[],RS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Km(n,s){switch(n){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":xr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rr.delete(s.pointerId)}}function Mr(n,s,r,u,p,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:r,eventSystemFlags:u,nativeEvent:m,targetContainers:[p]},s!==null&&(s=Ns(s),s!==null&&Xm(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),n)}function MS(n,s,r,u,p){switch(s){case"focusin":return Ii=Mr(Ii,n,s,r,u,p),!0;case"dragenter":return Hi=Mr(Hi,n,s,r,u,p),!0;case"mouseover":return ji=Mr(ji,n,s,r,u,p),!0;case"pointerover":var m=p.pointerId;return xr.set(m,Mr(xr.get(m)||null,n,s,r,u,p)),!0;case"gotpointercapture":return m=p.pointerId,Rr.set(m,Mr(Rr.get(m)||null,n,s,r,u,p)),!0}return!1}function Wm(n){var s=Ls(n.target);if(s!==null){var r=o(s);if(r!==null){if(s=r.tag,s===13){if(s=l(r),s!==null){n.blockedOn=s,uf(n.priority,function(){Ym(r)});return}}else if(s===31){if(s=h(r),s!==null){n.blockedOn=s,uf(n.priority,function(){Ym(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function El(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var r=Th(n.nativeEvent);if(r===null){r=n.nativeEvent;var u=new r.constructor(r.type,r);Cc=u,r.target.dispatchEvent(u),Cc=null}else return s=Ns(r),s!==null&&Xm(s),n.blockedOn=r,!1;s.shift()}return!0}function Qm(n,s,r){El(n)&&r.delete(s)}function DS(){xh=!1,Ii!==null&&El(Ii)&&(Ii=null),Hi!==null&&El(Hi)&&(Hi=null),ji!==null&&El(ji)&&(ji=null),xr.forEach(Qm),Rr.forEach(Qm)}function _l(n,s){n.blockedOn===s&&(n.blockedOn=null,xh||(xh=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,DS)))}var wl=null;function Zm(n){wl!==n&&(wl=n,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){wl===n&&(wl=null);for(var s=0;s<n.length;s+=3){var r=n[s],u=n[s+1],p=n[s+2];if(typeof u!="function"){if(Ch(u||r)===null)continue;break}var m=Ns(r);m!==null&&(n.splice(s,3),s-=3,Tu(m,{pending:!0,data:p,method:r.method,action:u},u,p))}}))}function pa(n){function s(M){return _l(M,n)}Ii!==null&&_l(Ii,n),Hi!==null&&_l(Hi,n),ji!==null&&_l(ji,n),xr.forEach(s),Rr.forEach(s);for(var r=0;r<Gi.length;r++){var u=Gi[r];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Gi.length&&(r=Gi[0],r.blockedOn===null);)Wm(r),r.blockedOn===null&&Gi.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var p=r[u],m=r[u+1],b=p[Ie]||null;if(typeof m=="function")b||Zm(r);else if(b){var w=null;if(m&&m.hasAttribute("formAction")){if(p=m,b=m[Ie]||null)w=b.formAction;else if(Ch(p)!==null)continue}else w=b.action;typeof w=="function"?r[u+1]=w:(r.splice(u,3),u-=3),Zm(r)}}}function Jm(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return p=b})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function Rh(n){this._internalRoot=n}Tl.prototype.render=Rh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var r=s.current,u=rn();Vm(r,u,n,s,null,null)},Tl.prototype.unmount=Rh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Vm(n.current,2,null,n,null,null),al(),s[Os]=null}};function Tl(n){this._internalRoot=n}Tl.prototype.unstable_scheduleHydration=function(n){if(n){var s=cf();n={blockedOn:null,target:n,priority:s};for(var r=0;r<Gi.length&&s!==0&&s<Gi[r].priority;r++);Gi.splice(r,0,n),r===0&&Wm(n)}};var ty=t.version;if(ty!=="19.2.0")throw Error(i(527,ty,"19.2.0"));H.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var OS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cl.isDisabled&&Cl.supportsFiber)try{Fa=Cl.inject(OS),Qe=Cl}catch{}}return Or.createRoot=function(n,s){if(!a(n))throw Error(i(299));var r=!1,u="",p=og,m=lg,b=cg;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=jm(n,1,!1,null,null,r,u,null,p,m,b,Jm),n[Os]=s.current,ch(n),new Rh(s)},Or.hydrateRoot=function(n,s,r){if(!a(n))throw Error(i(299));var u=!1,p="",m=og,b=lg,w=cg,M=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError),r.formState!==void 0&&(M=r.formState)),s=jm(n,1,!0,s,r??null,u,p,M,m,b,w,Jm),s.context=Gm(null),r=s.current,u=rn(),u=vc(u),p=Ri(u),p.callback=null,Mi(r,p,u),r=u,s.current.lanes=r,Ia(s,r),zn(s),n[Os]=s.current,ch(n),new Tl(s)},Or.version="19.2.0",Or}var Ey;function XE(){if(Ey)return kh.exports;Ey=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(t){console.error(t)}}return c(),kh.exports=qE(),kh.exports}var YE=XE(),zh={exports:{}};var _y;function $E(){return _y||(_y=1,(function(c){(function(){var t={}.hasOwnProperty;function e(){for(var o="",l=0;l<arguments.length;l++){var h=arguments[l];h&&(o=a(o,i(h)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return e.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var h in o)t.call(o,h)&&o[h]&&(l=a(l,h));return l}function a(o,l){return l?o?o+" "+l:o+l:o}c.exports?(e.default=e,c.exports=e):window.classNames=e})()})(zh)),zh.exports}var KE=$E();const Ee=Zr(KE),WE=["xxl","xl","lg","md","sm","xs"],QE="xs",Pv=x.createContext({prefixes:{},breakpoints:WE,minBreakpoint:QE}),{Consumer:MC,Provider:DC}=Pv;function We(c,t){const{prefixes:e}=x.useContext(Pv);return c||e[t]||t}const zv=x.forwardRef(({bsPrefix:c,fluid:t=!1,as:e="div",className:i,...a},o)=>{const l=We(c,"container"),h=typeof t=="string"?`-${t}`:"-fluid";return W.jsx(e,{ref:o,...a,className:Ee(i,t?`${l}${h}`:l)})});zv.displayName="Container";function ld(){return ld=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(c[i]=e[i])}return c},ld.apply(null,arguments)}function Fv(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)!==-1)continue;e[i]=c[i]}return e}function wy(c){return"default"+c.charAt(0).toUpperCase()+c.substr(1)}function ZE(c){var t=JE(c,"string");return typeof t=="symbol"?t:String(t)}function JE(c,t){if(typeof c!="object"||c===null)return c;var e=c[Symbol.toPrimitive];if(e!==void 0){var i=e.call(c,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(c)}function t1(c,t,e){var i=x.useRef(c!==void 0),a=x.useState(t),o=a[0],l=a[1],h=c!==void 0,d=i.current;return i.current=h,!h&&d&&o!==t&&l(t),[h?c:o,x.useCallback(function(f){for(var g=arguments.length,y=new Array(g>1?g-1:0),v=1;v<g;v++)y[v-1]=arguments[v];e&&e.apply(void 0,[f].concat(y)),l(f)},[e])]}function Uv(c,t){return Object.keys(t).reduce(function(e,i){var a,o=e,l=o[wy(i)],h=o[i],d=Fv(o,[wy(i),i].map(ZE)),f=t[i],g=t1(h,l,c[f]),y=g[0],v=g[1];return ld({},d,(a={},a[i]=y,a[f]=v,a))},c)}function cd(c,t){return cd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},cd(c,t)}function e1(c,t){c.prototype=Object.create(t.prototype),c.prototype.constructor=c,cd(c,t)}var n1=Function.prototype.bind.call(Function.prototype.call,[].slice);function ys(c,t){return n1(c.querySelectorAll(t))}function i1(){const[,c]=x.useReducer(t=>t+1,0);return c}const Ty=c=>!c||typeof c=="function"?c:t=>{c.current=t};function s1(c,t){const e=Ty(c),i=Ty(t);return a=>{e&&e(a),i&&i(a)}}function Zl(c,t){return x.useMemo(()=>s1(c,t),[c,t])}const Md=x.createContext(null);Md.displayName="NavContext";const Hl=x.createContext(null),Dd=(c,t=null)=>c!=null?String(c):t||null,Iv=x.createContext(null),a1="data-rr-ui-",r1="rrUi";function Jl(c){return`${a1}${c}`}function o1(c){return`${r1}${c}`}function l1(c){const t=x.useRef(c);return x.useEffect(()=>{t.current=c},[c]),t}function di(c){const t=l1(c);return x.useCallback(function(...e){return t.current&&t.current(...e)},[t])}const c1=["as","disabled"];function u1(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}function h1(c){return!c||c.trim()==="#"}function Hv({tagName:c,disabled:t,href:e,target:i,rel:a,role:o,onClick:l,tabIndex:h=0,type:d}){c||(e!=null||i!=null||a!=null?c="a":c="button");const f={tagName:c};if(c==="button")return[{type:d||"button",disabled:t},f];const g=v=>{if((t||c==="a"&&h1(e))&&v.preventDefault(),t){v.stopPropagation();return}l?.(v)},y=v=>{v.key===" "&&(v.preventDefault(),g(v))};return c==="a"&&(e||(e="#"),t&&(e=void 0)),[{role:o??"button",disabled:void 0,tabIndex:t?void 0:h,href:e,target:c==="a"?i:void 0,"aria-disabled":t||void 0,rel:c==="a"?a:void 0,onClick:g,onKeyDown:y},f]}const jv=x.forwardRef((c,t)=>{let{as:e,disabled:i}=c,a=u1(c,c1);const[o,{tagName:l}]=Hv(Object.assign({tagName:e,disabled:i},a));return W.jsx(l,Object.assign({},a,o,{ref:t}))});jv.displayName="Button";const d1=["as","active","eventKey"];function f1(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}function Gv({key:c,onClick:t,active:e,id:i,role:a,disabled:o}){const l=x.useContext(Hl),h=x.useContext(Md),d=x.useContext(Iv);let f=e;const g={role:a};if(h){!a&&h.role==="tablist"&&(g.role="tab");const y=h.getControllerId(c??null),v=h.getControlledId(c??null);g[Jl("event-key")]=c,g.id=y||i,f=e==null&&c!=null?h.activeKey===c:e,(f||!(d!=null&&d.unmountOnExit)&&!(d!=null&&d.mountOnEnter))&&(g["aria-controls"]=v)}return g.role==="tab"&&(g["aria-selected"]=f,f||(g.tabIndex=-1),o&&(g.tabIndex=-1,g["aria-disabled"]=!0)),g.onClick=di(y=>{o||(t?.(y),c!=null&&l&&!y.isPropagationStopped()&&l(c,y))}),[g,{isActive:f}]}const Vv=x.forwardRef((c,t)=>{let{as:e=jv,active:i,eventKey:a}=c,o=f1(c,d1);const[l,h]=Gv(Object.assign({key:Dd(a,o.href),active:i},o));return l[Jl("active")]=h.isActive,W.jsx(e,Object.assign({},o,l,{ref:t}))});Vv.displayName="NavItem";const p1=["as","onSelect","activeKey","role","onKeyDown"];function g1(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}const Cy=()=>{},xy=Jl("event-key"),qv=x.forwardRef((c,t)=>{let{as:e="div",onSelect:i,activeKey:a,role:o,onKeyDown:l}=c,h=g1(c,p1);const d=i1(),f=x.useRef(!1),g=x.useContext(Hl),y=x.useContext(Iv);let v,A;y&&(o=o||"tablist",a=y.activeKey,v=y.getControlledId,A=y.getControllerId);const E=x.useRef(null),S=C=>{const D=E.current;if(!D)return null;const N=ys(D,`[${xy}]:not([aria-disabled=true])`),B=D.querySelector("[aria-selected=true]");if(!B||B!==document.activeElement)return null;const P=N.indexOf(B);if(P===-1)return null;let j=P+C;return j>=N.length&&(j=0),j<0&&(j=N.length-1),N[j]},_=(C,D)=>{C!=null&&(i?.(C,D),g?.(C,D))},T=C=>{if(l?.(C),!y)return;let D;switch(C.key){case"ArrowLeft":case"ArrowUp":D=S(-1);break;case"ArrowRight":case"ArrowDown":D=S(1);break;default:return}D&&(C.preventDefault(),_(D.dataset[o1("EventKey")]||null,C),f.current=!0,d())};x.useEffect(()=>{if(E.current&&f.current){const C=E.current.querySelector(`[${xy}][aria-selected=true]`);C?.focus()}f.current=!1});const R=Zl(t,E);return W.jsx(Hl.Provider,{value:_,children:W.jsx(Md.Provider,{value:{role:o,activeKey:Dd(a),getControlledId:v||Cy,getControllerId:A||Cy},children:W.jsx(e,Object.assign({},h,{onKeyDown:T,ref:R,role:o}))})})});qv.displayName="Nav";const m1=Object.assign(qv,{Item:Vv}),Na=x.createContext(null);Na.displayName="NavbarContext";const Xv=x.createContext(null);Xv.displayName="CardHeaderContext";const Yv=x.forwardRef(({className:c,bsPrefix:t,as:e="div",...i},a)=>(t=We(t,"nav-item"),W.jsx(e,{ref:a,className:Ee(c,t),...i})));Yv.displayName="NavItem";function y1(){const c=x.useRef(!0),t=x.useRef(()=>c.current);return x.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]),t.current}function v1(c){const t=x.useRef(null);return x.useEffect(()=>{t.current=c}),t.current}const b1=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",A1=typeof document<"u",Ry=A1||b1?x.useLayoutEffect:x.useEffect,S1=["onKeyDown"];function E1(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}function _1(c){return!c||c.trim()==="#"}const $v=x.forwardRef((c,t)=>{let{onKeyDown:e}=c,i=E1(c,S1);const[a]=Hv(Object.assign({tagName:"a"},i)),o=di(l=>{a.onKeyDown(l),e?.(l)});return _1(i.href)||i.role==="button"?W.jsx("a",Object.assign({ref:t},i,a,{onKeyDown:o})):W.jsx("a",Object.assign({ref:t},i,{onKeyDown:e}))});$v.displayName="Anchor";const Kv=x.forwardRef(({bsPrefix:c,className:t,as:e=$v,active:i,eventKey:a,disabled:o=!1,...l},h)=>{c=We(c,"nav-link");const[d,f]=Gv({key:Dd(a,l.href),active:i,disabled:o,...l});return W.jsx(e,{...l,...d,ref:h,disabled:o,className:Ee(t,c,o&&"disabled",f.isActive&&"active")})});Kv.displayName="NavLink";const Wv=x.forwardRef((c,t)=>{const{as:e="div",bsPrefix:i,variant:a,fill:o=!1,justify:l=!1,navbar:h,navbarScroll:d,className:f,activeKey:g,...y}=Uv(c,{activeKey:"onSelect"}),v=We(i,"nav");let A,E,S=!1;const _=x.useContext(Na),T=x.useContext(Xv);return _?(A=_.bsPrefix,S=h??!0):T&&({cardHeaderBsPrefix:E}=T),W.jsx(m1,{as:e,ref:t,activeKey:g,className:Ee(f,{[v]:!S,[`${A}-nav`]:S,[`${A}-nav-scroll`]:S&&d,[`${E}-${a}`]:!!E,[`${v}-${a}`]:!!a,[`${v}-fill`]:o,[`${v}-justified`]:l}),...y})});Wv.displayName="Nav";const Fh=Object.assign(Wv,{Item:Yv,Link:Kv}),Qv=x.forwardRef(({bsPrefix:c,className:t,as:e,...i},a)=>{c=We(c,"navbar-brand");const o=e||(i.href?"a":"span");return W.jsx(o,{...i,ref:a,className:Ee(t,c)})});Qv.displayName="NavbarBrand";function Od(c){return c&&c.ownerDocument||document}function w1(c){var t=Od(c);return t&&t.defaultView||window}function T1(c,t){return w1(c).getComputedStyle(c,t)}var C1=/([A-Z])/g;function x1(c){return c.replace(C1,"-$1").toLowerCase()}var R1=/^ms-/;function xl(c){return x1(c).replace(R1,"-ms-")}var M1=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function D1(c){return!!(c&&M1.test(c))}function pi(c,t){var e="",i="";if(typeof t=="string")return c.style.getPropertyValue(xl(t))||T1(c).getPropertyValue(xl(t));Object.keys(t).forEach(function(a){var o=t[a];!o&&o!==0?c.style.removeProperty(xl(a)):D1(a)?i+=a+"("+o+") ":e+=xl(a)+": "+o+";"}),i&&(e+="transform: "+i+";"),c.style.cssText+=";"+e}var Uh={exports:{}},Ih,My;function O1(){if(My)return Ih;My=1;var c="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ih=c,Ih}var Hh,Dy;function L1(){if(Dy)return Hh;Dy=1;var c=O1();function t(){}function e(){}return e.resetWarningCache=t,Hh=function(){function i(l,h,d,f,g,y){if(y!==c){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}i.isRequired=i;function a(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:a,element:i,elementType:i,instanceOf:a,node:i,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:e,resetWarningCache:t};return o.PropTypes=o,o},Hh}var Oy;function N1(){return Oy||(Oy=1,Uh.exports=L1()()),Uh.exports}var k1=N1();const jh=Zr(k1),Ly={disabled:!1},Zv=De.createContext(null);var B1=function(t){return t.scrollTop},zr="unmounted",qi="exited",On="entering",fi="entered",qr="exiting",yi=(function(c){e1(t,c);function t(i,a){var o;o=c.call(this,i,a)||this;var l=a,h=l&&!l.isMounting?i.enter:i.appear,d;return o.appearStatus=null,i.in?h?(d=qi,o.appearStatus=On):d=fi:i.unmountOnExit||i.mountOnEnter?d=zr:d=qi,o.state={status:d},o.nextCallback=null,o}t.getDerivedStateFromProps=function(a,o){var l=a.in;return l&&o.status===zr?{status:qi}:null};var e=t.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(a){var o=null;if(a!==this.props){var l=this.state.status;this.props.in?l!==On&&l!==fi&&(o=On):(l===On||l===fi)&&(o=qr)}this.updateStatus(!1,o)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var a=this.props.timeout,o,l,h;return o=l=h=a,a!=null&&typeof a!="number"&&(o=a.exit,l=a.enter,h=a.appear!==void 0?a.appear:l),{exit:o,enter:l,appear:h}},e.updateStatus=function(a,o){if(a===void 0&&(a=!1),o!==null)if(this.cancelNextCallback(),o===On){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:Aa.findDOMNode(this);l&&B1(l)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===qi&&this.setState({status:zr})},e.performEnter=function(a){var o=this,l=this.props.enter,h=this.context?this.context.isMounting:a,d=this.props.nodeRef?[h]:[Aa.findDOMNode(this),h],f=d[0],g=d[1],y=this.getTimeouts(),v=h?y.appear:y.enter;if(!a&&!l||Ly.disabled){this.safeSetState({status:fi},function(){o.props.onEntered(f)});return}this.props.onEnter(f,g),this.safeSetState({status:On},function(){o.props.onEntering(f,g),o.onTransitionEnd(v,function(){o.safeSetState({status:fi},function(){o.props.onEntered(f,g)})})})},e.performExit=function(){var a=this,o=this.props.exit,l=this.getTimeouts(),h=this.props.nodeRef?void 0:Aa.findDOMNode(this);if(!o||Ly.disabled){this.safeSetState({status:qi},function(){a.props.onExited(h)});return}this.props.onExit(h),this.safeSetState({status:qr},function(){a.props.onExiting(h),a.onTransitionEnd(l.exit,function(){a.safeSetState({status:qi},function(){a.props.onExited(h)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(a,o){o=this.setNextCallback(o),this.setState(a,o)},e.setNextCallback=function(a){var o=this,l=!0;return this.nextCallback=function(h){l&&(l=!1,o.nextCallback=null,a(h))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},e.onTransitionEnd=function(a,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:Aa.findDOMNode(this),h=a==null&&!this.props.addEndListener;if(!l||h){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],f=d[0],g=d[1];this.props.addEndListener(f,g)}a!=null&&setTimeout(this.nextCallback,a)},e.render=function(){var a=this.state.status;if(a===zr)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var h=Fv(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return De.createElement(Zv.Provider,{value:null},typeof l=="function"?l(a,h):De.cloneElement(De.Children.only(l),h))},t})(De.Component);yi.contextType=Zv;yi.propTypes={};function ga(){}yi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ga,onEntering:ga,onEntered:ga,onExit:ga,onExiting:ga,onExited:ga};yi.UNMOUNTED=zr;yi.EXITED=qi;yi.ENTERING=On;yi.ENTERED=fi;yi.EXITING=qr;function P1(c){return c.code==="Escape"||c.keyCode===27}function z1(){const c=x.version.split(".");return{major:+c[0],minor:+c[1],patch:+c[2]}}function ka(c){if(!c||typeof c=="function")return null;const{major:t}=z1();return t>=19?c.props.ref:c.ref}const tc=!!(typeof window<"u"&&window.document&&window.document.createElement);var ud=!1,hd=!1;try{var Gh={get passive(){return ud=!0},get once(){return hd=ud=!0}};tc&&(window.addEventListener("test",Gh,Gh),window.removeEventListener("test",Gh,!0))}catch{}function F1(c,t,e,i){if(i&&typeof i!="boolean"&&!hd){var a=i.once,o=i.capture,l=e;!hd&&a&&(l=e.__once||function h(d){this.removeEventListener(t,h,o),e.call(this,d)},e.__once=l),c.addEventListener(t,l,ud?i:o)}c.addEventListener(t,e,i)}function U1(c,t,e,i){var a=i&&typeof i!="boolean"?i.capture:i;c.removeEventListener(t,e,a),e.__once&&c.removeEventListener(t,e.__once,a)}function jl(c,t,e,i){return F1(c,t,e,i),function(){U1(c,t,e,i)}}function I1(c,t,e,i){if(i===void 0&&(i=!0),c){var a=document.createEvent("HTMLEvents");a.initEvent(t,e,i),c.dispatchEvent(a)}}function H1(c){var t=pi(c,"transitionDuration")||"",e=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*e}function j1(c,t,e){e===void 0&&(e=5);var i=!1,a=setTimeout(function(){i||I1(c,"transitionend",!0)},t+e),o=jl(c,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(a),o()}}function G1(c,t,e,i){e==null&&(e=H1(c)||0);var a=j1(c,e,i),o=jl(c,"transitionend",t);return function(){a(),o()}}function Ny(c,t){const e=pi(c,t)||"",i=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*i}function Ld(c,t){const e=Ny(c,"transitionDuration"),i=Ny(c,"transitionDelay"),a=G1(c,o=>{o.target===c&&(a(),t(o))},e+i)}function Lr(...c){return c.filter(t=>t!=null).reduce((t,e)=>{if(typeof e!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?e:function(...a){t.apply(this,a),e.apply(this,a)}},null)}function Jv(c){c.offsetHeight}const ky=c=>!c||typeof c=="function"?c:t=>{c.current=t};function V1(c,t){const e=ky(c),i=ky(t);return a=>{e&&e(a),i&&i(a)}}function q1(c,t){return x.useMemo(()=>V1(c,t),[c,t])}function X1(c){return c&&"setState"in c?Aa.findDOMNode(c):c??null}const ec=De.forwardRef(({onEnter:c,onEntering:t,onEntered:e,onExit:i,onExiting:a,onExited:o,addEndListener:l,children:h,childRef:d,...f},g)=>{const y=x.useRef(null),v=q1(y,d),A=B=>{v(X1(B))},E=B=>P=>{B&&y.current&&B(y.current,P)},S=x.useCallback(E(c),[c]),_=x.useCallback(E(t),[t]),T=x.useCallback(E(e),[e]),R=x.useCallback(E(i),[i]),C=x.useCallback(E(a),[a]),D=x.useCallback(E(o),[o]),N=x.useCallback(E(l),[l]);return W.jsx(yi,{ref:g,...f,onEnter:S,onEntered:T,onEntering:_,onExit:R,onExited:D,onExiting:C,addEndListener:N,nodeRef:y,children:typeof h=="function"?(B,P)=>h(B,{...P,ref:A}):De.cloneElement(h,{ref:A})})});ec.displayName="TransitionWrapper";const Y1={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function $1(c,t){const e=`offset${c[0].toUpperCase()}${c.slice(1)}`,i=t[e],a=Y1[c];return i+parseInt(pi(t,a[0]),10)+parseInt(pi(t,a[1]),10)}const K1={[qi]:"collapse",[qr]:"collapsing",[On]:"collapsing",[fi]:"collapse show"},tb=De.forwardRef(({onEnter:c,onEntering:t,onEntered:e,onExit:i,onExiting:a,className:o,children:l,dimension:h="height",in:d=!1,timeout:f=300,mountOnEnter:g=!1,unmountOnExit:y=!1,appear:v=!1,getDimensionValue:A=$1,...E},S)=>{const _=typeof h=="function"?h():h,T=x.useMemo(()=>Lr(B=>{B.style[_]="0"},c),[_,c]),R=x.useMemo(()=>Lr(B=>{const P=`scroll${_[0].toUpperCase()}${_.slice(1)}`;B.style[_]=`${B[P]}px`},t),[_,t]),C=x.useMemo(()=>Lr(B=>{B.style[_]=null},e),[_,e]),D=x.useMemo(()=>Lr(B=>{B.style[_]=`${A(_,B)}px`,Jv(B)},i),[i,A,_]),N=x.useMemo(()=>Lr(B=>{B.style[_]=null},a),[_,a]);return W.jsx(ec,{ref:S,addEndListener:Ld,...E,"aria-expanded":E.role?d:null,onEnter:T,onEntering:R,onEntered:C,onExit:D,onExiting:N,childRef:ka(l),in:d,timeout:f,mountOnEnter:g,unmountOnExit:y,appear:v,children:(B,P)=>De.cloneElement(l,{...P,className:Ee(o,l.props.className,K1[B],_==="width"&&"collapse-horizontal")})})});tb.displayName="Collapse";const eb=x.forwardRef(({children:c,bsPrefix:t,...e},i)=>{t=We(t,"navbar-collapse");const a=x.useContext(Na);return W.jsx(tb,{in:!!(a&&a.expanded),...e,children:W.jsx("div",{ref:i,className:t,children:c})})});eb.displayName="NavbarCollapse";function W1(c){const t=x.useRef(c);return x.useEffect(()=>{t.current=c},[c]),t}function nc(c){const t=W1(c);return x.useCallback(function(...e){return t.current&&t.current(...e)},[t])}const nb=x.forwardRef(({bsPrefix:c,className:t,children:e,label:i="Toggle navigation",as:a="button",onClick:o,...l},h)=>{c=We(c,"navbar-toggler");const{onToggle:d,expanded:f}=x.useContext(Na)||{},g=nc(y=>{o&&o(y),d&&d()});return a==="button"&&(l.type="button"),W.jsx(a,{...l,ref:h,onClick:g,"aria-label":i,className:Ee(t,c,!f&&"collapsed"),children:e||W.jsx("span",{className:`${c}-icon`})})});nb.displayName="NavbarToggle";const Q1=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Z1=typeof document<"u",J1=Z1||Q1?x.useLayoutEffect:x.useEffect,dd=new WeakMap,By=(c,t)=>{if(!c||!t)return;const e=dd.get(t)||new Map;dd.set(t,e);let i=e.get(c);return i||(i=t.matchMedia(c),i.refCount=0,e.set(i.media,i)),i};function t_(c,t=typeof window>"u"?void 0:window){const e=By(c,t),[i,a]=x.useState(()=>e?e.matches:!1);return J1(()=>{let o=By(c,t);if(!o)return a(!1);let l=dd.get(t);const h=()=>{a(o.matches)};return o.refCount++,o.addListener(h),h(),()=>{o.removeListener(h),o.refCount--,o.refCount<=0&&l?.delete(o.media),o=void 0}},[c]),i}function e_(c){const t=Object.keys(c);function e(h,d){return h===d?d:h?`${h} and ${d}`:d}function i(h){return t[Math.min(t.indexOf(h)+1,t.length-1)]}function a(h){const d=i(h);let f=c[d];return typeof f=="number"?f=`${f-.2}px`:f=`calc(${f} - 0.2px)`,`(max-width: ${f})`}function o(h){let d=c[h];return typeof d=="number"&&(d=`${d}px`),`(min-width: ${d})`}function l(h,d,f){let g;typeof h=="object"?(g=h,f=d,d=!0):(d=d||!0,g={[h]:d});let y=x.useMemo(()=>Object.entries(g).reduce((v,[A,E])=>((E==="up"||E===!0)&&(v=e(v,o(A))),(E==="down"||E===!0)&&(v=e(v,a(A))),v),""),[JSON.stringify(g)]);return t_(y,f)}return l}const n_=e_({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function Vh(c){c===void 0&&(c=Od());try{var t=c.activeElement;return!t||!t.nodeName?null:t}catch{return c.body}}function Py(c,t){if(c.contains)return c.contains(t);if(c.compareDocumentPosition)return c===t||!!(c.compareDocumentPosition(t)&16)}function i_(c){const t=x.useRef(c);return t.current=c,t}function s_(c){const t=i_(c);x.useEffect(()=>()=>t.current(),[])}function a_(c=document){const t=c.defaultView;return Math.abs(t.innerWidth-c.documentElement.clientWidth)}const zy=Jl("modal-open");class Nd{constructor({ownerDocument:t,handleContainerOverflow:e=!0,isRTL:i=!1}={}){this.handleContainerOverflow=e,this.isRTL=i,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return a_(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const e={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",a=this.getElement();t.style={overflow:a.style.overflow,[i]:a.style[i]},t.scrollBarWidth&&(e[i]=`${parseInt(pi(a,i)||"0",10)+t.scrollBarWidth}px`),a.setAttribute(zy,""),pi(a,e)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const e=this.getElement();e.removeAttribute(zy),Object.assign(e.style,t.style)}add(t){let e=this.modals.indexOf(t);return e!==-1||(e=this.modals.length,this.modals.push(t),this.setModalAttributes(t),e!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),e}remove(t){const e=this.modals.indexOf(t);e!==-1&&(this.modals.splice(e,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const ib=x.createContext(tc?window:void 0);ib.Provider;function kd(){return x.useContext(ib)}const qh=(c,t)=>tc?c==null?(t||Od()).body:(typeof c=="function"&&(c=c()),c&&"current"in c&&(c=c.current),c&&("nodeType"in c||c.getBoundingClientRect)?c:null):null;function r_(c,t){const e=kd(),[i,a]=x.useState(()=>qh(c,e?.document));if(!i){const o=qh(c);o&&a(o)}return x.useEffect(()=>{},[t,i]),x.useEffect(()=>{const o=qh(c);o!==i&&a(o)},[c,i]),i}function o_({children:c,in:t,onExited:e,mountOnEnter:i,unmountOnExit:a}){const o=x.useRef(null),l=x.useRef(t),h=di(e);x.useEffect(()=>{t?l.current=!0:h(o.current)},[t,h]);const d=Zl(o,ka(c)),f=x.cloneElement(c,{ref:d});return t?f:a||!l.current&&i?null:f}const l_=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function c_(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}function u_(c){let{onEnter:t,onEntering:e,onEntered:i,onExit:a,onExiting:o,onExited:l,addEndListener:h,children:d}=c,f=c_(c,l_);const g=x.useRef(null),y=Zl(g,ka(d)),v=D=>N=>{D&&g.current&&D(g.current,N)},A=x.useCallback(v(t),[t]),E=x.useCallback(v(e),[e]),S=x.useCallback(v(i),[i]),_=x.useCallback(v(a),[a]),T=x.useCallback(v(o),[o]),R=x.useCallback(v(l),[l]),C=x.useCallback(v(h),[h]);return Object.assign({},f,{nodeRef:g},t&&{onEnter:A},e&&{onEntering:E},i&&{onEntered:S},a&&{onExit:_},o&&{onExiting:T},l&&{onExited:R},h&&{addEndListener:C},{children:typeof d=="function"?(D,N)=>d(D,Object.assign({},N,{ref:y})):x.cloneElement(d,{ref:y})})}const h_=["component"];function d_(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}const f_=x.forwardRef((c,t)=>{let{component:e}=c,i=d_(c,h_);const a=u_(i);return W.jsx(e,Object.assign({ref:t},a))});function p_({in:c,onTransition:t}){const e=x.useRef(null),i=x.useRef(!0),a=di(t);return Ry(()=>{if(!e.current)return;let o=!1;return a({in:c,element:e.current,initial:i.current,isStale:()=>o}),()=>{o=!0}},[c,a]),Ry(()=>(i.current=!1,()=>{i.current=!0}),[]),e}function g_({children:c,in:t,onExited:e,onEntered:i,transition:a}){const[o,l]=x.useState(!t);t&&o&&l(!1);const h=p_({in:!!t,onTransition:f=>{const g=()=>{f.isStale()||(f.in?i?.(f.element,f.initial):(l(!0),e?.(f.element)))};Promise.resolve(a(f)).then(g,y=>{throw f.in||l(!0),y})}}),d=Zl(h,ka(c));return o&&!t?null:x.cloneElement(c,{ref:d})}function Fy(c,t,e){return c?W.jsx(f_,Object.assign({},e,{component:c})):t?W.jsx(g_,Object.assign({},e,{transition:t})):W.jsx(o_,Object.assign({},e))}const m_=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function y_(c,t){if(c==null)return{};var e={};for(var i in c)if({}.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}let Xh;function v_(c){return Xh||(Xh=new Nd({ownerDocument:c?.document})),Xh}function b_(c){const t=kd(),e=c||v_(t),i=x.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>e.add(i.current),remove:()=>e.remove(i.current),isTopModal:()=>e.isTopModal(i.current),setDialogRef:x.useCallback(a=>{i.current.dialog=a},[]),setBackdropRef:x.useCallback(a=>{i.current.backdrop=a},[])})}const sb=x.forwardRef((c,t)=>{let{show:e=!1,role:i="dialog",className:a,style:o,children:l,backdrop:h=!0,keyboard:d=!0,onBackdropClick:f,onEscapeKeyDown:g,transition:y,runTransition:v,backdropTransition:A,runBackdropTransition:E,autoFocus:S=!0,enforceFocus:_=!0,restoreFocus:T=!0,restoreFocusOptions:R,renderDialog:C,renderBackdrop:D=vt=>W.jsx("div",Object.assign({},vt)),manager:N,container:B,onShow:P,onHide:j=()=>{},onExit:X,onExited:Z,onExiting:J,onEnter:lt,onEntering:ct,onEntered:at}=c,pt=y_(c,m_);const L=kd(),H=r_(B),Q=b_(N),ut=y1(),yt=v1(e),[O,G]=x.useState(!e),K=x.useRef(null);x.useImperativeHandle(t,()=>Q,[Q]),tc&&!yt&&e&&(K.current=Vh(L?.document)),e&&O&&G(!1);const tt=di(()=>{if(Q.add(),Bt.current=jl(document,"keydown",Ht),_t.current=jl(document,"focus",()=>setTimeout(ht),!0),P&&P(),S){var vt,Kt;const hn=Vh((vt=(Kt=Q.dialog)==null?void 0:Kt.ownerDocument)!=null?vt:L?.document);Q.dialog&&hn&&!Py(Q.dialog,hn)&&(K.current=hn,Q.dialog.focus())}}),it=di(()=>{if(Q.remove(),Bt.current==null||Bt.current(),_t.current==null||_t.current(),T){var vt;(vt=K.current)==null||vt.focus==null||vt.focus(R),K.current=null}});x.useEffect(()=>{!e||!H||tt()},[e,H,tt]),x.useEffect(()=>{O&&it()},[O,it]),s_(()=>{it()});const ht=di(()=>{if(!_||!ut()||!Q.isTopModal())return;const vt=Vh(L?.document);Q.dialog&&vt&&!Py(Q.dialog,vt)&&Q.dialog.focus()}),ot=di(vt=>{vt.target===vt.currentTarget&&(f?.(vt),h===!0&&j())}),Ht=di(vt=>{d&&P1(vt)&&Q.isTopModal()&&(g?.(vt),vt.defaultPrevented||j())}),_t=x.useRef(),Bt=x.useRef(),Oe=(...vt)=>{G(!0),Z?.(...vt)};if(!H)return null;const Le=Object.assign({role:i,ref:Q.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},pt,{style:o,className:a,tabIndex:-1});let Ct=C?C(Le):W.jsx("div",Object.assign({},Le,{children:x.cloneElement(l,{role:"document"})}));Ct=Fy(y,v,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!e,onExit:X,onExiting:J,onExited:Oe,onEnter:lt,onEntering:ct,onEntered:at,children:Ct});let xt=null;return h&&(xt=D({ref:Q.setBackdropRef,onClick:ot}),xt=Fy(A,E,{in:!!e,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:xt})),W.jsx(W.Fragment,{children:Aa.createPortal(W.jsxs(W.Fragment,{children:[xt,Ct]}),H)})});sb.displayName="Modal";const A_=Object.assign(sb,{Manager:Nd}),S_={[On]:"show",[fi]:"show"},ab=x.forwardRef(({className:c,children:t,transitionClasses:e={},onEnter:i,...a},o)=>{const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},h=x.useCallback((d,f)=>{Jv(d),i?.(d,f)},[i]);return W.jsx(ec,{ref:o,addEndListener:Ld,...l,onEnter:h,childRef:ka(t),children:(d,f)=>x.cloneElement(t,{...f,className:Ee("fade",c,t.props.className,S_[d],e[d])})})});ab.displayName="Fade";const rb=x.forwardRef(({className:c,bsPrefix:t,as:e="div",...i},a)=>(t=We(t,"offcanvas-body"),W.jsx(e,{ref:a,className:Ee(c,t),...i})));rb.displayName="OffcanvasBody";const E_={[On]:"show",[fi]:"show"},ob=x.forwardRef(({bsPrefix:c,className:t,children:e,in:i=!1,mountOnEnter:a=!1,unmountOnExit:o=!1,appear:l=!1,...h},d)=>(c=We(c,"offcanvas"),W.jsx(ec,{ref:d,addEndListener:Ld,in:i,mountOnEnter:a,unmountOnExit:o,appear:l,...h,childRef:ka(e),children:(f,g)=>x.cloneElement(e,{...g,className:Ee(t,e.props.className,(f===On||f===qr)&&`${c}-toggling`,E_[f])})})));ob.displayName="OffcanvasToggling";const lb=x.createContext({onHide(){}}),__={"aria-label":jh.string,onClick:jh.func,variant:jh.oneOf(["white"])},Bd=x.forwardRef(({className:c,variant:t,"aria-label":e="Close",...i},a)=>W.jsx("button",{ref:a,type:"button",className:Ee("btn-close",t&&`btn-close-${t}`,c),"aria-label":e,...i}));Bd.displayName="CloseButton";Bd.propTypes=__;const cb=x.forwardRef(({closeLabel:c="Close",closeVariant:t,closeButton:e=!1,onHide:i,children:a,...o},l)=>{const h=x.useContext(lb),d=nc(()=>{h?.onHide(),i?.()});return W.jsxs("div",{ref:l,...o,children:[a,e&&W.jsx(Bd,{"aria-label":c,variant:t,onClick:d})]})});cb.displayName="AbstractModalHeader";const ub=x.forwardRef(({bsPrefix:c,className:t,closeLabel:e="Close",closeButton:i=!1,...a},o)=>(c=We(c,"offcanvas-header"),W.jsx(cb,{ref:o,...a,className:Ee(t,c),closeLabel:e,closeButton:i})));ub.displayName="OffcanvasHeader";const w_=(c=>x.forwardRef((t,e)=>W.jsx("div",{...t,ref:e,className:Ee(t.className,c)}))),T_=w_("h5"),hb=x.forwardRef(({className:c,bsPrefix:t,as:e=T_,...i},a)=>(t=We(t,"offcanvas-title"),W.jsx(e,{ref:a,className:Ee(c,t),...i})));hb.displayName="OffcanvasTitle";function C_(c,t){return c.classList?c.classList.contains(t):(" "+(c.className.baseVal||c.className)+" ").indexOf(" "+t+" ")!==-1}function x_(c,t){c.classList?c.classList.add(t):C_(c,t)||(typeof c.className=="string"?c.className=c.className+" "+t:c.setAttribute("class",(c.className&&c.className.baseVal||"")+" "+t))}function Uy(c,t){return c.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function R_(c,t){c.classList?c.classList.remove(t):typeof c.className=="string"?c.className=Uy(c.className,t):c.setAttribute("class",Uy(c.className&&c.className.baseVal||"",t))}const ma={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class db extends Nd{adjustAndStore(t,e,i){const a=e.style[t];e.dataset[t]=a,pi(e,{[t]:`${parseFloat(pi(e,t))+i}px`})}restore(t,e){const i=e.dataset[t];i!==void 0&&(delete e.dataset[t],pi(e,{[t]:i}))}setContainerStyle(t){super.setContainerStyle(t);const e=this.getElement();if(x_(e,"modal-open"),!t.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";ys(e,ma.FIXED_CONTENT).forEach(o=>this.adjustAndStore(i,o,t.scrollBarWidth)),ys(e,ma.STICKY_CONTENT).forEach(o=>this.adjustAndStore(a,o,-t.scrollBarWidth)),ys(e,ma.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(a,o,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const e=this.getElement();R_(e,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";ys(e,ma.FIXED_CONTENT).forEach(o=>this.restore(i,o)),ys(e,ma.STICKY_CONTENT).forEach(o=>this.restore(a,o)),ys(e,ma.NAVBAR_TOGGLER).forEach(o=>this.restore(a,o))}}let Yh;function M_(c){return Yh||(Yh=new db(c)),Yh}function D_(c){return W.jsx(ob,{...c})}function O_(c){return W.jsx(ab,{...c})}const fb=x.forwardRef(({bsPrefix:c,className:t,children:e,"aria-labelledby":i,placement:a="start",responsive:o,show:l=!1,backdrop:h=!0,keyboard:d=!0,scroll:f=!1,onEscapeKeyDown:g,onShow:y,onHide:v,container:A,autoFocus:E=!0,enforceFocus:S=!0,restoreFocus:_=!0,restoreFocusOptions:T,onEntered:R,onExit:C,onExiting:D,onEnter:N,onEntering:B,onExited:P,backdropClassName:j,manager:X,renderStaticNode:Z=!1,...J},lt)=>{const ct=x.useRef();c=We(c,"offcanvas");const[at,pt]=x.useState(!1),L=nc(v),H=n_(o||"xs","up");x.useEffect(()=>{pt(o?l&&!H:l)},[l,o,H]);const Q=x.useMemo(()=>({onHide:L}),[L]);function ut(){return X||(f?(ct.current||(ct.current=new db({handleContainerOverflow:!1})),ct.current):M_())}const yt=(tt,...it)=>{tt&&(tt.style.visibility="visible"),N?.(tt,...it)},O=(tt,...it)=>{tt&&(tt.style.visibility=""),P?.(...it)},G=x.useCallback(tt=>W.jsx("div",{...tt,className:Ee(`${c}-backdrop`,j)}),[j,c]),K=tt=>W.jsx("div",{...tt,...J,className:Ee(t,o?`${c}-${o}`:c,`${c}-${a}`),"aria-labelledby":i,children:e});return W.jsxs(W.Fragment,{children:[!at&&(o||Z)&&K({}),W.jsx(lb.Provider,{value:Q,children:W.jsx(A_,{show:at,ref:lt,backdrop:h,container:A,keyboard:d,autoFocus:E,enforceFocus:S&&!f,restoreFocus:_,restoreFocusOptions:T,onEscapeKeyDown:g,onShow:y,onHide:L,onEnter:yt,onEntering:B,onEntered:R,onExit:C,onExiting:D,onExited:O,manager:ut(),transition:D_,backdropTransition:O_,renderBackdrop:G,renderDialog:K})})]})});fb.displayName="Offcanvas";const L_=Object.assign(fb,{Body:rb,Header:ub,Title:hb}),pb=x.forwardRef(({onHide:c,...t},e)=>{const i=x.useContext(Na),a=nc(()=>{i==null||i.onToggle==null||i.onToggle(),c?.()});return W.jsx(L_,{ref:e,show:!!(i!=null&&i.expanded),...t,renderStaticNode:!0,onHide:a})});pb.displayName="NavbarOffcanvas";const gb=x.forwardRef(({className:c,bsPrefix:t,as:e="span",...i},a)=>(t=We(t,"navbar-text"),W.jsx(e,{ref:a,className:Ee(c,t),...i})));gb.displayName="NavbarText";const mb=x.forwardRef((c,t)=>{const{bsPrefix:e,expand:i=!0,variant:a="light",bg:o,fixed:l,sticky:h,className:d,as:f="nav",expanded:g,onToggle:y,onSelect:v,collapseOnSelect:A=!1,...E}=Uv(c,{expanded:"onToggle"}),S=We(e,"navbar"),_=x.useCallback((...C)=>{v?.(...C),A&&g&&y?.(!1)},[v,A,g,y]);E.role===void 0&&f!=="nav"&&(E.role="navigation");let T=`${S}-expand`;typeof i=="string"&&(T=`${T}-${i}`);const R=x.useMemo(()=>({onToggle:()=>y?.(!g),bsPrefix:S,expanded:!!g,expand:i}),[S,g,i,y]);return W.jsx(Na.Provider,{value:R,children:W.jsx(Hl.Provider,{value:_,children:W.jsx(f,{ref:t,...E,className:Ee(d,S,i&&T,a&&`${S}-${a}`,o&&`bg-${o}`,h&&`sticky-${h}`,l&&`fixed-${l}`)})})})});mb.displayName="Navbar";const $h=Object.assign(mb,{Brand:Qv,Collapse:eb,Offcanvas:pb,Text:gb,Toggle:nb});function N_({darkMode:c}){return W.jsx($h,{expand:"lg",bg:c?"dark":"white",variant:c?"dark":"light","data-bs-theme":c?"dark":"light",className:c?"bg-dark navbar-dark":"bg-white navbar-light",children:W.jsxs(zv,{className:"justify-content-center",children:[W.jsx($h.Toggle,{"aria-controls":"basic-navbar-nav"}),W.jsx($h.Collapse,{id:"basic-navbar-nav",className:"justify-content-center",children:W.jsxs(Fh,{className:"ms-auto",children:[W.jsx(Fh.Link,{as:my,to:"/",children:"Home"}),W.jsx(Fh.Link,{as:my,to:"/resume",children:"Resume"})," "]})})]})})}function k_(){return W.jsxs("div",{className:"home-container",children:[W.jsx("h2",{className:"home-header",children:"About me"}),W.jsx("p",{children:"Hey, I'm Kevin"})]})}function B_(){return W.jsxs("div",{className:"brand-container",children:[" ",W.jsx("h1",{className:"brand-name",children:"Kevin Lee"}),W.jsx("p",{className:"brand-subtitle",children:"Software Engineer"})," "]})}const Fe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),fd=[.001,0,0,.001,0,0],Kh=1.35,on={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},qn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Xr="pdfjs_internal_editor_",At={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Lt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},yb={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Re={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Hr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},le={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},va={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},to={ERRORS:0,WARNINGS:1,INFOS:5},Ma={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Rl={moveTo:0,lineTo:1,curveTo:2,closePath:3},vb={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ic=to.WARNINGS;function P_(c){Number.isInteger(c)&&(ic=c)}function z_(){return ic}function sc(c){ic>=to.INFOS&&console.info(`Info: ${c}`)}function St(c){ic>=to.WARNINGS&&console.warn(`Warning: ${c}`)}function $t(c){throw new Error(c)}function kt(c,t){c||$t(t)}function F_(c){switch(c?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Pd(c,t=null,e=null){if(!c)return null;if(e&&typeof c=="string"&&(e.addDefaultProtocol&&c.startsWith("www.")&&c.match(/\./g)?.length>=2&&(c=`http://${c}`),e.tryConvertEncoding))try{c=G_(c)}catch{}const i=t?URL.parse(c,t):URL.parse(c);return F_(i)?i:null}function zd(c,t,e=!1){const i=URL.parse(c);return i?(i.hash=t,i.href):e&&Pd(c,"http://example.com")?c.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Tt(c,t,e,i=!1){return Object.defineProperty(c,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Rs=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class Iy extends Rs{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Wh extends Rs{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Gl extends Rs{constructor(t){super(t,"InvalidPDFException")}}class Yr extends Rs{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class U_ extends Rs{constructor(t){super(t,"FormatError")}}class gi extends Rs{constructor(t){super(t,"AbortException")}}function bb(c){(typeof c!="object"||c?.length===void 0)&&$t("Invalid argument for bytesToString");const t=c.length,e=8192;if(t<e)return String.fromCharCode.apply(null,c);const i=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),l=c.subarray(a,o);i.push(String.fromCharCode.apply(null,l))}return i.join("")}function eo(c){typeof c!="string"&&$t("Invalid argument for stringToBytes");const t=c.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=c.charCodeAt(i)&255;return e}function I_(c){return String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255)}function H_(){const c=new Uint8Array(4);return c[0]=1,new Uint32Array(c.buffer,0,1)[0]===1}function j_(){try{return new Function(""),!0}catch{return!1}}class Se{static get isLittleEndian(){return Tt(this,"isLittleEndian",H_())}static get isEvalSupported(){return Tt(this,"isEvalSupported",j_())}static get isOffscreenCanvasSupported(){return Tt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Tt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Tt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Tt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Qh=Array.from(Array(256).keys(),c=>c.toString(16).padStart(2,"0"));class nt{static makeHexColor(t,e,i){return`#${Qh[t]}${Qh[e]}${Qh[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const a=t[i],o=t[i+1];t[i]=a*e[0]+o*e[2]+e[4],t[i+1]=a*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const a=e[0],o=e[1],l=e[2],h=e[3],d=e[4],f=e[5];for(let g=0;g<6;g+=2){const y=t[i+g],v=t[i+g+1];t[i+g]=y*a+v*l+d,t[i+g+1]=y*o+v*h+f}}static applyInverseTransform(t,e){const i=t[0],a=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-i*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,i){const a=e[0],o=e[1],l=e[2],h=e[3],d=e[4],f=e[5],g=t[0],y=t[1],v=t[2],A=t[3];let E=a*g+d,S=E,_=a*v+d,T=_,R=h*y+f,C=R,D=h*A+f,N=D;if(o!==0||l!==0){const B=o*g,P=o*v,j=l*y,X=l*A;E+=j,T+=j,_+=X,S+=X,R+=B,N+=B,D+=P,C+=P}i[0]=Math.min(i[0],E,_,S,T),i[1]=Math.min(i[1],R,D,C,N),i[2]=Math.max(i[2],E,_,S,T),i[3]=Math.max(i[3],R,D,C,N)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],a=t[1],o=t[2],l=t[3],h=i**2+a**2,d=i*o+a*l,f=o**2+l**2,g=(h+f)/2,y=Math.sqrt(g**2-(h*f-d**2));e[0]=Math.sqrt(g+y||1),e[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[i,o,a,l]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,a,o){o[0]=Math.min(o[0],t,i),o[1]=Math.min(o[1],e,a),o[2]=Math.max(o[2],t,i),o[3]=Math.max(o[3],e,a)}static#t(t,e,i,a,o,l,h,d,f,g){if(f<=0||f>=1)return;const y=1-f,v=f*f,A=v*f,E=y*(y*(y*t+3*f*e)+3*v*i)+A*a,S=y*(y*(y*o+3*f*l)+3*v*h)+A*d;g[0]=Math.min(g[0],E),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],E),g[3]=Math.max(g[3],S)}static#e(t,e,i,a,o,l,h,d,f,g,y,v){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,e,i,a,o,l,h,d,-y/g,v);return}const A=g**2-4*y*f;if(A<0)return;const E=Math.sqrt(A),S=2*f;this.#t(t,e,i,a,o,l,h,d,(-g+E)/S,v),this.#t(t,e,i,a,o,l,h,d,(-g-E)/S,v)}static bezierBoundingBox(t,e,i,a,o,l,h,d,f){f[0]=Math.min(f[0],t,h),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,h),f[3]=Math.max(f[3],e,d),this.#e(t,i,o,h,e,a,l,d,3*(-t+3*(i-o)+h),6*(t-2*i+o),3*(i-t),f),this.#e(t,i,o,h,e,a,l,d,3*(-e+3*(a-l)+d),6*(e-2*a+l),3*(a-e),f)}}function G_(c){return decodeURIComponent(escape(c))}let Zh=null,Hy=null;function Ab(c){return Zh||(Zh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Hy=new Map([["","t"]])),c.replaceAll(Zh,(t,e,i)=>e?e.normalize("NFKC"):Hy.get(i))}function Fd(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const c=new Uint8Array(32);return crypto.getRandomValues(c),bb(c)}const Ud="pdfjs_internal_id_";function V_(c,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,a,...o]=e;if(!c(i)&&!Number.isInteger(i)||!t(a))return!1;const l=o.length;let h=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;h=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||h&&d===null))return!1;return!0}function ke(c,t,e){return Math.min(Math.max(c,t),e)}function Sb(c){return Uint8Array.prototype.toBase64?c.toBase64():btoa(bb(c))}function q_(c){return Uint8Array.fromBase64?Uint8Array.fromBase64(c):eo(atob(c))}typeof Promise.try!="function"&&(Promise.try=function(c,...t){return new Promise(e=>{e(c(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(c){return c.reduce((t,e)=>t+e,0)});class $r{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const h=o.name;if(h==="#text")l=o.value;else if($r.shouldBuildText(h))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const d of o.children)a(d)}return a(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Id{static setupStorage(t,e,i,a,o){const l=a.getValue(e,{value:null});switch(i.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(l.value===i.attributes.xfaOn?t.setAttribute("checked",!0):l.value===i.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",h=>{a.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const h of i.children)h.attributes.value===l.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const d=h.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:a,linkService:o}){const{attributes:l}=e,h=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!h||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}h&&o.addLinkAttributes(t,l.href,l.newWindow),i&&l.dataId&&this.setupStorage(t,l.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:i});const h=o!=="richText",d=t.div;if(d.append(l),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}h&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);l.append(y),h&&$r.shouldBuildText(a.name)&&f.push(y)}return{textDivs:f}}const g=[[a,-1,l]];for(;g.length>0;){const[y,v,A]=g.at(-1);if(v+1===y.children.length){g.pop();continue}const E=y.children[++g.at(-1)[1]];if(E===null)continue;const{name:S}=E;if(S==="#text"){const T=document.createTextNode(E.value);f.push(T),A.append(T);continue}const _=E?.attributes?.xmlns?document.createElementNS(E.attributes.xmlns,S):document.createElement(S);if(A.append(_),E.attributes&&this.setAttributes({html:_,element:E,storage:e,intent:o,linkService:i}),E.children?.length>0)g.push([E,-1,_]);else if(E.value){const T=document.createTextNode(E.value);h&&$r.shouldBuildText(S)&&f.push(T),_.append(T)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ui="http://www.w3.org/2000/svg";class _s{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ba(c,t="text"){if(Fr(c,document.baseURI)){const e=await fetch(c);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const a=new XMLHttpRequest;a.open("GET",c,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class no{constructor({viewBox:t,userUnit:e,scale:i,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=a,this.offsetX=o,this.offsetY=l,i*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,y,v,A;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,y=0,v=0,A=1;break;case 90:g=0,y=1,v=1,A=0;break;case 270:g=0,y=-1,v=-1,A=0;break;case 0:g=1,y=0,v=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(v=-v,A=-A);let E,S,_,T;g===0?(E=Math.abs(f-t[1])*i+o,S=Math.abs(d-t[0])*i+l,_=(t[3]-t[1])*i,T=(t[2]-t[0])*i):(E=Math.abs(d-t[0])*i+o,S=Math.abs(f-t[1])*i+l,_=(t[2]-t[0])*i,T=(t[3]-t[1])*i),this.transform=[g*i,y*i,v*i,A*i,E-g*i*d-v*i*f,S-y*i*d-A*i*f],this.width=_,this.height=T}get rawDims(){const t=this.viewBox;return Tt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new no({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){const i=[t,e];return nt.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];nt.applyTransform(e,this.transform);const i=[t[2],t[3]];return nt.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return nt.applyInverseTransform(i,this.transform),i}}class ac extends Rs{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function io(c){const t=c.length;let e=0;for(;e<t&&c[e].trim()==="";)e++;return c.substring(e,e+5).toLowerCase()==="data:"}function rc(c){return typeof c=="string"&&/\.pdf$/i.test(c)}function Eb(c){return[c]=c.split(/[#?]/,1),c.substring(c.lastIndexOf("/")+1)}function _b(c,t="document.pdf"){if(typeof c!="string")return t;if(io(c))return St('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(c);if(!i)return t;const a=h=>{try{let d=decodeURIComponent(h);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:h):d}catch{return h}},o=/\.pdf$/i,l=i.pathname.split("/").at(-1);if(o.test(l))return a(l);if(i.searchParams.size>0){const h=Array.from(i.searchParams.values()).reverse();for(const f of h)if(o.test(f))return a(f);const d=Array.from(i.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return a(f)}if(i.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(d)return a(d[0])}return t}class jy{started=Object.create(null);times=[];time(t){t in this.started&&St(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||St(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:a,end:o}of this.times)t.push(`${i.padEnd(e)} ${o-a}ms
`);return t.join("")}}function Fr(c,t){const e=t?URL.parse(c,t):URL.parse(c);return e?.protocol==="http:"||e?.protocol==="https:"}function un(c){c.preventDefault()}function ne(c){c.preventDefault(),c.stopPropagation()}function X_(c){console.log("Deprecated API usage: "+c)}class Vl{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(l+=g,h+=y):f==="+"&&(l-=g,h-=y),new Date(Date.UTC(i,a,o,l,h,d))}}function wb(c,{scale:t=1,rotation:e=0}){const{width:i,height:a}=c.attributes.style,o=[0,0,parseInt(i),parseInt(a)];return new no({viewBox:o,userUnit:1,scale:t,rotation:e})}function Pa(c){if(c.startsWith("#")){const t=parseInt(c.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return c.startsWith("rgb(")?c.slice(4,-1).split(",").map(t=>parseInt(t)):c.startsWith("rgba(")?c.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(St(`Not a valid color format: "${c}"`),[0,0,0])}function Y_(c){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of c.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;c.set(e,Pa(i))}t.remove()}function ee(c){const{a:t,b:e,c:i,d:a,e:o,f:l}=c.getTransform();return[t,e,i,a,o,l]}function In(c){const{a:t,b:e,c:i,d:a,e:o,f:l}=c.getTransform().invertSelf();return[t,e,i,a,o,l]}function Wi(c,t,e=!1,i=!0){if(t instanceof no){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=c,h=Se.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${o}px`,g=h?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=h?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=g,l.height=y):(l.width=y,l.height=g)}i&&c.setAttribute("data-main-rotation",t.rotation)}class Ln{constructor(){const{pixelRatio:t}=Ln;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,a,o=-1){let l=1/0,h=1/0,d=1/0;i=Ln.capPixels(i,o),i>0&&(l=Math.sqrt(i/(t*e))),a!==-1&&(h=a/t,d=a/e);const f=Math.min(l,h,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const ql=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class $_{static get isDarkMode(){return Tt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Tb{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),Tt(this,"commentForegroundColor",Pa(i))}}function Cb(c,t,e,i){i=Math.min(Math.max(i??1,0),1);const a=255*(1-i);return c=Math.round(c*i+a),t=Math.round(t*i+a),e=Math.round(e*i+a),[c,t,e]}function Gy(c,t){const e=c[0]/255,i=c[1]/255,a=c[2]/255,o=Math.max(e,i,a),l=Math.min(e,i,a),h=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=h<.5?d/(o+l):d/(2-o-l),o){case e:t[0]=((i-a)/d+(i<a?6:0))*60;break;case i:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-i)/d+4)*60;break}}t[2]=h}function pd(c,t){const e=c[0],i=c[1],a=c[2],o=(1-Math.abs(2*a-1))*i,l=o*(1-Math.abs(e/60%2-1)),h=a-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+h,t[1]=l+h,t[2]=h;break;case 1:t[0]=l+h,t[1]=o+h,t[2]=h;break;case 2:t[0]=h,t[1]=o+h,t[2]=l+h;break;case 3:t[0]=h,t[1]=l+h,t[2]=o+h;break;case 4:t[0]=l+h,t[1]=h,t[2]=o+h;break;case 5:case 6:t[0]=o+h,t[1]=h,t[2]=l+h;break}}function Vy(c){return c<=.03928?c/12.92:((c+.055)/1.055)**2.4}function qy(c,t,e){pd(c,e),e.map(Vy);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];pd(t,e),e.map(Vy);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>a?(i+.05)/(a+.05):(a+.05)/(i+.05)}const Xy=new Map;function xb(c,t){const e=c[0]+c[1]*256+c[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=Xy.get(e);if(i)return i;const a=new Float32Array(9),o=a.subarray(0,3),l=a.subarray(3,6);Gy(c,l);const h=a.subarray(6,9);Gy(t,h);const d=h[2]<.5,f=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),qy(l,h,o)<f){let g,y;d?(g=l[2],y=1):(g=0,y=l[2]);const v=.005;for(;y-g>v;){const A=l[2]=(g+y)/2;d===qy(l,h,o)<f?g=A:y=A}l[2]=d?y:g}return pd(l,o),i=nt.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),Xy.set(e,i),i}function Hd({html:c,dir:t,className:e},i){const a=document.createDocumentFragment();if(typeof c=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=c.split(/(?:\r\n?|\n)/);for(let h=0,d=l.length;h<d;++h){const f=l[h];o.append(document.createTextNode(f)),h<d-1&&o.append(document.createElement("br"))}a.append(o)}else Id.render({xfaHtml:c,div:a,intent:"richText"});a.firstChild.classList.add("richText",e),i.append(a)}class jr{#t=null;#e=null;#i;#n=null;#r=null;#s=null;#a=null;#o=null;static#c=null;constructor(t){this.#i=t,jr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",un,{signal:e}),t.addEventListener("pointerdown",jr.#l,{signal:e}));const i=this.#n=document.createElement("div");i.className="buttons",t.append(i);const a=this.#i.toolbarPosition;if(a){const{style:o}=t,l=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,ne(t)}#h(t){this.#i._focusEventsAllowed=!0,ne(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",un,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",jr.#c[t]),this.#f(i)&&i.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#n.append(i)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#m),this.#r=t}addComment(t,e=null){if(this.#s)return;const i=t.renderForToolbar();if(!i)return;this.#f(i);const a=this.#a=this.#m;e?(this.#n.insertBefore(i,e),this.#n.insertBefore(a,e)):this.#n.append(i,a),this.#s=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#m)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#m)}removeButton(t){switch(t){case"comment":this.#s?.removeToolbarCommentButton(),this.#s=null,this.#a?.remove(),this.#a=null;break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,i){const a=this.#n.querySelector(i);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class K_{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",un,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#i.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let i=0,a=0;for(const o of t){const l=o.y+o.height;if(l<i)continue;const h=o.x+(e?o.width:0);if(l>i){a=h,i=l;continue}e?h>a&&(a=h):h<a&&(a=h)}return[e?1-a:a,i]}show(t,e,i){const[a,o]=this.#r(e,i),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,e,i,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",i);const h=this.#i._signal;h instanceof AbortSignal&&!h.aborted&&(o.addEventListener("contextmenu",un,{signal:h}),o.addEventListener("click",a,{signal:h})),this.#t.append(o)}}function Rb(c,t,e){for(const i of e)t.addEventListener(i,c[i].bind(c))}class W_{#t=0;get id(){return`${Xr}${this.#t++}`}}class jd{#t=Fd();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Tt(this,"_isSVGFittingCanvas",o)}async#n(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(i.url=e,a=await Ba(e,"blob")):e instanceof File?a=i.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const o=jd._isSVGFittingCanvas,l=new FileReader,h=new Image,d=new Promise((f,g)=>{h.onload=()=>{i.bitmap=h,i.isSvg=!0,f()},l.onload=async()=>{const y=i.svgUrl=l.result;h.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=l.onerror=g});l.readAsDataURL(a),await d}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){St(a),i=null}return this.#i.set(t,i),i&&this.#i.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:a,type:o}=t;return this.#n(`${e}_${i}_${a}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const i=await e;return this.#n(t,i)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,i),this.#i.set(i.id,i),i}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class Q_{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:i,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:h=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:i,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(l&&this.#t[this.#n].type===o){h&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class so{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Se.platform;for(const[i,a,o={}]of t)for(const l of i){const h=l.startsWith("mac+");e&&h?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!h&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:h=null}}=i;h&&!h(t,e)||(a.bind(t,...l,e)(),o||ne(e))}}class Gd{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Y_(t),Tt(this,"_colors",t)}convert(t){const e=Pa(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,a]of this._colors)if(a.every((o,l)=>o===e[l]))return Gd._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?nt.makeHexColor(...e):t}}class mi{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#s=null;#a=null;#o=null;#c=new Q_;#l=null;#d=null;#h=null;#f=0;#m=new Set;#p=null;#u=null;#g=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#T=null;#_=null;#A=null;#x=null;#E=!1;#w=null;#D=new W_;#R=!1;#M=!1;#z=!1;#L=null;#k=null;#F=null;#B=null;#V=null;#C=At.NONE;#S=new Set;#N=null;#U=null;#H=null;#Y=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#P=null;#q=null;#Z=null;#J=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=mi.prototype,e=l=>l.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),i=(l,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Tt(this,"_keyboardManager",new so([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&l.#q.contains(h)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&l.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,i,a,o,l,h,d,f,g,y,v,A,E,S,_){const T=this._signal=this.#t.signal;this.#q=t,this.#Z=e,this.#J=i,this.#s=a,this.#l=o,this.#U=l,this.#X=d,this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:T}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:T}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:T}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:T}),h._on("setpreference",this.onSetPreference.bind(this),{signal:T}),h._on("switchannotationeditorparams",R=>this.updateParams(R.type,R.value),{signal:T}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:T}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:T}),this.#lt(),this.#dt(),this.#et(),this.#a=d.annotationStorage,this.#T=d.filterFactory,this.#H=f,this.#x=g||null,this.#y=y,this.#b=v,this.#v=A,this.#V=E||null,this.viewParameters={realScale:_s.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=_!==!1,o?.setSidebarUiManager(this)}destroy(){this.#I?.resolve(),this.#I=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#g.clear(),this.#B?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#w?.hide(),this.#w=null,this.#F?.destroy(),this.#F=null,this.#i=null,this.#_&&(clearTimeout(this.#_),this.#_=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Tt(this,"hcmFilter",this.#H?this.#T.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Tt(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return Tt(this,"_highlightColors",this.#x?new Map(this.#x.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Tt(this,"highlightColors",null);const e=new Map,i=!!this.#H;for(const[a,o]of t){const l=a.endsWith("_HCM");if(i&&l){e.set(a.replace("_HCM",""),o);continue}!i&&!l&&e.set(a,o)}return Tt(this,"highlightColors",e)}get highlightColorNames(){return Tt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,e=!1){this.#s?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,a){this.#l?.showDialog(this,t,e,i,a)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await i}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,e){for(const i of this.#r.values()){const{x:a,y:o,width:l,height:h}=i.div.getBoundingClientRect();if(t>=a&&t<=a+l&&e>=o&&e<=o+h)return i}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*_s.PDF_TO_CSS_UNITS;for(const e of this.#g)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#r.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:h}=i,d=i.toString(),g=this.#Q(i).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;i.empty();const v=this.#tt(g),A=this.#C===At.NONE,E=()=>{const S=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:h,text:d});A&&this.showAllEditors("highlight",!0,!0),e&&S?.editComment()};if(A){this.switchToMode(At.HIGHLIGHT,E);return}E()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#w||=new K_(this),this.#w.show(i,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const e=`${Xr}${t}`,i=this.#a.getRawValue(e);return i&&this.#a.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#N&&(this.#w?.hide(),this.#N=null,this.#O({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#N)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#N&&(this.#w?.hide(),this.#N=null,this.#O({hasSelectedText:!1}));return}if(this.#w?.hide(),this.#N=e,this.#O({hasSelectedText:!0}),!(this.#C!==At.HIGHLIGHT&&this.#C!==At.NONE)&&(this.#C===At.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#C===At.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#M){const l=new AbortController,h=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#C===At.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#S)if(e.div.contains(t)){this.#k=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[t,e]=this.#k;this.#k=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#L)return;this.#L=new AbortController;const t=this.combinedSignal(this.#L);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#L?.abort(),this.#L=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#it(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#it()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#S){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){St(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of i){const f=await a.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)this.#st(d);this.#at(o)},h=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:h,mustExec:!0})}catch(o){St(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==At.NONE&&!this.isEditorHandlingKeyboard&&mi._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#O(t){Object.entries(t).some(([i,a])=>this.#$[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#C===At.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Lt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#O({isEditing:this.#C!==At.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#it(),this.#O({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,a=!1,o=!1){if(this.#C!==t&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#C===At.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=t,t===At.NONE){this.setEditingState(!1),this.#pt();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#I.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();t===At.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#r.values())l.updateMode(t);if(t===At.POPUP){this.#i||=await this.#X.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,h=[];for(const d of this.#n.values()){const{annotationElementId:f,hasComment:g,deleted:y}=d;f&&l.add(f),g&&!y&&h.push(d.getData())}for(const d of this.#i){const{id:f,popupRef:g,contentsObj:y}=d;g&&y?.str&&!l.has(f)&&!this.#m.has(f)&&h.push(d)}this.#l?.showSidebar(h)}if(!e){i&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const l of this.#n.values())l.uid===e?(this.setSelected(l),o?l.editComment():a?l.enterInEditMode():l.focus()):l.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Lt.CREATE:this.currentLayer.addNewEditor(e);return;case Lt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#S)i.updateParams(t,e);else for(const i of this.#u)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const o of this.#n.values())o.editorType===t&&o.show(e);(this.#Y?.get(Lt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[Lt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#z!==t){this.#z=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.focusMainContainer(),this.#_=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#O({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const e of this.#S)e!==t&&e.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#O({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#O({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#S],i=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},a=()=>{for(const o of e)this.#st(o)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const e of this.#S)e.unselect();this.#S.clear();for(const e of t)e.isEmpty()||(this.#S.add(e),e.select());this.#O({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#at(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==At.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#O({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=e;const[a,o]=this.#j,l=[...this.#S],h=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},h);for(const d of l)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#S)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:a,y:o,pageIndex:l},h]of t)h.newX=a,h.newY=o,h.newPageIndex=l,e||=a!==h.savedX||o!==h.savedY||l!==h.savedPageIndex;if(!e)return!1;const i=(a,o,l,h)=>{if(this.#n.has(a.id)){const d=this.#r.get(h);d?a._setParentAndPosition(d,o,l):(a.pageIndex=h,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:h}]of t)i(a,o,l,h)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:h}]of t)i(a,o,l,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const i of this.#p.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==At.NONE}get imageManager(){return Tt(this,"imageManager",new jd)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,g=e.rangeCount;f<g;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:a,width:o,height:l}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(f,g,y,v)=>({x:(g-a)/l,y:1-(f+y-i)/o,width:v/l,height:y/o});break;case"180":h=(f,g,y,v)=>({x:1-(f+y-i)/o,y:1-(g+v-a)/l,width:y/o,height:v/l});break;case"270":h=(f,g,y,v)=>({x:1-(g+v-a)/l,y:(f-i)/o,width:v/l,height:y/o});break;default:h=(f,g,y,v)=>({x:(f-i)/o,y:(g-a)/l,width:y/o,height:v/l});break}const d=[];for(let f=0,g=e.rangeCount;f<g;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x:v,y:A,width:E,height:S}of y.getClientRects())E===0||S===0||d.push(h(v,A,E,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#a.getRawValue(e);i&&(this.#C===At.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const a=this.#B?.get(t);a&&(a.setCanvas(e,i),this.#B.delete(t))}addMissingCanvas(t,e){(this.#B||=new Map).set(t,e)}}class Gn{#t=null;#e=!1;#i=null;#n=null;#r=null;#s=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Gn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Gn._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Gn.#f.missing),e.setAttribute("data-l10n-id",Gn.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",un,{signal:i}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#a=!0,a(o))},{signal:i}),await this.#p(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Gn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:a,cancel:o=!1}){i&&(this.#l=i,this.#d=a),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Gn.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",Gn.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Ml{#t=null;#e=null;#i=!1;#n=null;#r=null;#s=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(i.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:a,y:o,width:l,height:h}=this.#n.parent.boundingClientRect;return[(t-a)/l,(e+i-o)/h]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",un,{signal:i}),e&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,ne(o)},{capture:!0,signal:i}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,ne(o)},{capture:!0,signal:i})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#i=!0,a(o))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),t}edit(t){const e=this.commentPopupPositionInLayer;let i,a;if(e)[i,a]=e;else{[i,a]=this.#n.commentButtonPosition;const{width:g,height:y,x:v,y:A}=this.#n;i=v+i*g,a=A+a*y}const o=this.#n.parent.boundingClientRect,{x:l,y:h,width:d,height:f}=o;this.#n._uiManager.editComment(this.#n,l+i*d,h+a*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#s,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#s=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#s=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#s=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class ao{#t;#e=!1;#i=null;#n;#r;#s;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:h}){this.#t=t,this.#i=i,this.#n=e,this.#r=a,this.#s=o,this.#a=l,this.#d=new AbortController,this.#c=AbortSignal.any([h,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ln.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),l=this.#t,h={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ne(f),d(f))},h),l.addEventListener("pointerup",d,h),l.addEventListener("pointercancel",d,h);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),l);const h=this.#p.bind(this);o.addEventListener("touchend",h,l),o.addEventListener("touchcancel",h,l),l.capture=!0,o.addEventListener("pointerdown",ne,l),o.addEventListener("pointermove",ne,l),o.addEventListener("pointercancel",ne,l),o.addEventListener("pointerup",ne,l),this.#r?.()}if(ne(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ne(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:a,screenY:o}=e,{screenX:l,screenY:h}=i,d=this.#l,{touch0X:f,touch0Y:g,touch1X:y,touch1Y:v}=d,A=y-f,E=v-g,S=l-a,_=h-o,T=Math.hypot(S,_)||1,R=Math.hypot(A,E)||1;if(!this.#e&&Math.abs(R-T)<=ao.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=l,d.touch1Y=h,!this.#e){this.#e=!0;return}const C=[(a+l)/2,(o+h)/2];this.#s?.(C,R,T)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(ne(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ft{#t=null;#e=null;#i=null;#n=null;#r=null;#s=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#p=!1;#u=null;#g=!1;#y=!1;#b=!1;#v=null;#T=0;#_=0;#A=null;#x=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#E=!1;#w=ft._zIndex++;static _borderLineWidth=-1;static _colorManager=new Gd;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ft.prototype._resizeWithKeyboard,e=mi.TRANSLATE_SMALL,i=mi.TRANSLATE_BIG;return Tt(this,"_resizerKeyboardManager",new so([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],ft.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[o,l];const[h,d]=this.parentDimensions;this.x=t.x/h,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Tt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Z_({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(ft._l10n??=t,ft._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ft._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ft._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){$t("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#E}set _isDraggable(t){this.#E=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#w}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,a){const[o,l]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(t+i)/o,this.y=(e+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,a]=this.parentDimensions;this.setAt(t*i,e*a,this.width*i,this.height*a),this._onTranslated()}#D([t,e],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#D(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:h}=this;const[d,f]=this.getBaseTranslation();l+=d,h+=f;const{style:g}=i;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*h).toFixed(2)}%`,this._onTranslating(l,h),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=ft,a=i/t,o=i/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,a]}=this;let{x:o,y:l,width:h,height:d}=this;if(h*=i,d*=a,o*=i,l*=a,this._mustFixPosition)switch(t){case 0:o=ke(o,0,i-h),l=ke(l,0,a-d);break;case 90:o=ke(o,0,i-d),l=ke(l,h,a);break;case 180:o=ke(o,h,i),l=ke(l,d,a);break;case 270:o=ke(o,d,i),l=ke(l,0,a-h);break}this.x=o/=i,this.y=l/=a;const[f,g]=this.getBaseTranslation();o+=f,l+=g,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return ft.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return ft.#R(t,e,360-this.parentRotation)}#M(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#z(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#L.bind(this,i),{signal:e}),a.addEventListener("contextmenu",un,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#c)}#L(t,e){e.preventDefault();const{isMac:i}=Se.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",ne,{passive:!1,signal:l}),window.addEventListener("contextmenu",un,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=d,this.#F()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#k(t,e,i,a){this.width=i,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:a}=this.#d;this.#d=null;const o=this.x,l=this.y,h=this.width,d=this.height;o===t&&l===e&&h===i&&d===a||this.addCommands({cmd:this.#k.bind(this,o,l,h,d),undo:this.#k.bind(this,t,e,i,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,e){const[i,a]=this.parentDimensions,o=this.x,l=this.y,h=this.width,d=this.height,f=ft.MIN_SIZE/i,g=ft.MIN_SIZE/a,y=this.#M(this.rotation),v=(L,H)=>[y[0]*L+y[2]*H,y[1]*L+y[3]*H],A=this.#M(360-this.rotation),E=(L,H)=>[A[0]*L+A[2]*H,A[1]*L+A[3]*H];let S,_,T=!1,R=!1;switch(t){case"topLeft":T=!0,S=(L,H)=>[0,0],_=(L,H)=>[L,H];break;case"topMiddle":S=(L,H)=>[L/2,0],_=(L,H)=>[L/2,H];break;case"topRight":T=!0,S=(L,H)=>[L,0],_=(L,H)=>[0,H];break;case"middleRight":R=!0,S=(L,H)=>[L,H/2],_=(L,H)=>[0,H/2];break;case"bottomRight":T=!0,S=(L,H)=>[L,H],_=(L,H)=>[0,0];break;case"bottomMiddle":S=(L,H)=>[L/2,H],_=(L,H)=>[L/2,0];break;case"bottomLeft":T=!0,S=(L,H)=>[0,H],_=(L,H)=>[L,0];break;case"middleLeft":R=!0,S=(L,H)=>[0,H/2],_=(L,H)=>[L,H/2];break}const C=S(h,d),D=_(h,d);let N=v(...D);const B=ft._round(o+N[0]),P=ft._round(l+N[1]);let j=1,X=1,Z,J;if(e.fromKeyboard)({deltaX:Z,deltaY:J}=e);else{const{screenX:L,screenY:H}=e,[Q,ut]=this.#l;[Z,J]=this.screenToPageTranslation(L-Q,H-ut),this.#l[0]=L,this.#l[1]=H}if([Z,J]=E(Z/i,J/a),T){const L=Math.hypot(h,d);j=X=Math.max(Math.min(Math.hypot(D[0]-C[0]-Z,D[1]-C[1]-J)/L,1/h,1/d),f/h,g/d)}else R?j=ke(Math.abs(D[0]-C[0]-Z),f,1)/h:X=ke(Math.abs(D[1]-C[1]-J),g,1)/d;const lt=ft._round(h*j),ct=ft._round(d*X);N=v(..._(lt,ct));const at=B-N[0],pt=P-N[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=lt,this.height=ct,this.x=at,this.y=pt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new jr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Gn.initialize(ft._l10n),this.#i=new Gn(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Ml(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:a}}=this.#n;return{text:e,richText:t,date:i,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Ml(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#n||=new Ml(this),this.#n.setInitialText(t,i),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Ml(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,h=l+o+1,d=a-100,f=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),Rb(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#x||=new ao({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,e,i){let o=.7*(i/e)+1-.7;if(o===1)return;const l=this.#M(this.rotation),h=(B,P)=>[l[0]*B+l[2]*P,l[1]*B+l[3]*P],[d,f]=this.parentDimensions,g=this.x,y=this.y,v=this.width,A=this.height,E=ft.MIN_SIZE/d,S=ft.MIN_SIZE/f;o=Math.max(Math.min(o,1/v,1/A),E/v,S/A);const _=ft._round(v*o),T=ft._round(A*o);if(_===v&&T===A)return;this.#u||=[g,y,v,A];const R=h(v/2,A/2),C=ft._round(g+R[0]),D=ft._round(y+R[1]),N=h(_/2,T/2);this.x=C-N[0],this.y=D-N[1],this.width=_,this.height=T,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:e}=Se.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#U(t);return}this.#N(t)}#N(t){const{isMac:e}=Se.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},h=f=>{a.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#N(f),i&&this._onStopDragging()};e&&(this.#T=t.clientX,this.#_=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:y,pointerId:v}=f;if(v!==this.#a){ne(f);return}const[A,E]=this.screenToPageTranslation(g-this.#T,y-this.#_);this.#T=g,this.#_=y,this._uiManager.dragSelectedEditors(A,E)},l),window.addEventListener("touchmove",ne,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#x||f.isPrimary)&&h(f),ne(f)},l));const d=f=>{if(!this.#a||this.#a===f.pointerId){h(f);return}ne(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[h,d]=this.pageTranslation,f=t/a,g=e/a,y=this.x*o,v=this.y*l,A=this.width*o,E=this.height*l;switch(i){case 0:return[y+f+h,l-v-g-E+d,y+f+A+h,l-v-g+d];case 90:return[y+g+h,l-v+f+d,y+g+E+h,l-v+f+A+d];case 180:return[y-f-A+h,l-v+g+d,y-f+h,l-v+g+E+d];case 270:return[y-g-E+h,l-v-f-A+d,y-g+h,l-v-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,a,o,l]=t,h=o-i,d=l-a;switch(this.rotation){case 0:return[i,e-l,h,d];case 90:return[i,e-a,d,h];case 180:return[o,e-a,h,d];case 270:return[o,e-l,d,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ft._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:a,deleted:o,richText:l},uid:h,pageIndex:d,creationDate:f,modificationDate:g}=this;return{id:h,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:i||g,popupRef:!o,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&a>0&&t<o&&i>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[h,d,f,g]=a.getRectInCurrentCoords(t.rect,l);return a.x=h/o,a.y=d/l,a.width=f/o,a.height=g/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#P(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#x?.destroy(),this.#x=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,a,o,l]=this.getPDFRect();return[ft._round(i+(o-i)*t),ft._round(a+(l-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const l=this.#Y.bind(this),h=this.#X.bind(this),d=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",h,{signal:d}),f.addEventListener("focus",this.#$.bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",ft._l10nResizer[g])}}const i=this.#e[0];let a=0;for(const l of e){if(l===i)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let h=0;h<a-o;h++)this.#c.append(this.#c.firstChild);else if(o>a)for(let h=0;h<o-a;h++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const h of e){const f=this.#e[l++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",ft._l10nResizer[f])}}this.#j(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){ft._resizerKeyboardManager.exec(this,t)}#X(t){this.#b&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#$(t){this.#m=this.#b?t:""}#j(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#b&&this.#B(this.#m,{deltaX:t,deltaY:e,fromKeyboard:!0})}#P(){this.#b=!1,this.#j(-1),this.#F()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:i}=t;let a=this.#A.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(i),this.#A.size===0&&(this.#A=null)},ft._telemetryTimeout),this.#A.set(i,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class Z_ extends ft{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Yy=3285377520,En=4294901760,Hn=65535;class Mb{constructor(t){this.h1=t?t&4294967295:Yy,this.h2=t?t&4294967295:Yy}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let S=0,_=t.length;S<_;S++){const T=t.charCodeAt(S);T<=255?e[i++]=T:(e[i++]=T>>>8,e[i++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,o=i-a*4,l=new Uint32Array(e.buffer,0,a);let h=0,d=0,f=this.h1,g=this.h2;const y=3432918353,v=461845907,A=y&Hn,E=v&Hn;for(let S=0;S<a;S++)S&1?(h=l[S],h=h*y&En|h*A&Hn,h=h<<15|h>>>17,h=h*v&En|h*E&Hn,f^=h,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[S],d=d*y&En|d*A&Hn,d=d<<15|d>>>17,d=d*v&En|d*E&Hn,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(h=0,o){case 3:h^=e[a*4+2]<<16;case 2:h^=e[a*4+1]<<8;case 1:h^=e[a*4],h=h*y&En|h*A&Hn,h=h<<15|h>>>17,h=h*v&En|h*E&Hn,a&1?f^=h:g^=h}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&En|t*36045&Hn,e=e*4283543511&En|((e<<16|t>>>16)*2950163797&En)>>>16,t^=e>>>1,t=t*444984403&En|t*60499&Hn,e=e*3301882366&En|((e<<16|t>>>16)*3120437893&En)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const gd=Object.freeze({map:null,hash:"",transfer:void 0});class Vd{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof ft&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof ft)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#n.get(t);let a=!1;if(i!==void 0)for(const[o,l]of Object.entries(e))i[o]!==l&&(a=!0,i[o]=l);else a=!0,this.#n.set(t,e);a&&this.#r(),e instanceof ft&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Db(this)}get serializable(){if(this.#n.size===0)return gd;const t=new Map,e=new Mb,i=[],a=Object.create(null);let o=!1;for(const[l,h]of this.#n){const d=h instanceof ft?h.serialize(!1,a):h;d&&(t.set(l,d),e.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&i.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:gd}get editorStats(){let t=null;const e=new Map;let i=0,a=0;for(const o of this.#n.values()){if(!(o instanceof ft)){o.popup&&(o.popup.deleted?a+=1:i+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(i+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:h}=l;e.has(h)||e.set(h,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[h]||=new Map;for(const[f,g]of Object.entries(l)){if(f==="type")continue;let y=d.get(f);y||(y=new Map,d.set(f,y));const v=y.get(g)??0;y.set(g,v+1)}}if((a>0||i>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:i}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const i=this.#i?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class Db extends Vd{#t;constructor(t){super();const{map:e,hash:i,transfer:a}=t.serializable,o=structuredClone(e,a?{transfer:a}:null);this.#t={map:o,hash:i,transfer:a}}get print(){$t("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Tt(this,"modifiedIds",{ids:new Set,hash:""})}}class J_{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(kt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,h=new FontFace(a,o,l);this.addNativeFontFace(h);try{await h.load(),this.#t.add(a),i?.(t)}catch{St(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}$t("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw St(`Failed to load font '${i.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Tt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Tt(this,"isSyncFontLoadingSupported",Fe||Se.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(kt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:e,callback:t};return i.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Tt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(D,N){return D.charCodeAt(N)<<24|D.charCodeAt(N+1)<<16|D.charCodeAt(N+2)<<8|D.charCodeAt(N+3)&255}function a(D,N,B,P){const j=D.substring(0,N),X=D.substring(N+B);return j+P+X}let o,l;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let f=0;function g(D,N){if(++f>30){St("Load test font never loaded."),N();return}if(d.font="30px "+D,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(g.bind(null,D,N))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=a(v,976,y.length,y);const E=16,S=1482184792;let _=i(v,E);for(o=0,l=y.length-3;o<l;o+=4)_=_-S+i(y,o)|0;o<y.length&&(_=_-S+i(y+"XXX",o)|0),v=a(v,E,4,I_(_));const T=`url(data:font/opentype;base64,${btoa(v)});`,R=`@font-face {font-family:"${y}";src:${T}}`;this.insertRule(R);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const D of[t.loadedName,y]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=D,C.append(N)}this._document.body.append(C),g(y,()=>{C.remove(),e.complete()})}}class tw{#t;constructor(t,e=null,i,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Sb(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let a;try{a=t.get(i)}catch(l){St(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function ew(c){if(c instanceof URL)return c.href;if(typeof c=="string"){if(Fe)return c;const t=URL.parse(c,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function nw(c){if(Fe&&typeof Buffer<"u"&&c instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength)return c;if(typeof c=="string")return eo(c);if(c instanceof ArrayBuffer||ArrayBuffer.isView(c)||typeof c=="object"&&!isNaN(c?.length))return new Uint8Array(c);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Dl(c){if(typeof c!="string")return null;if(c.endsWith("/"))return c;throw new Error(`Invalid factory url: "${c}" must include trailing slash.`)}const md=c=>typeof c=="object"&&Number.isInteger(c?.num)&&c.num>=0&&Number.isInteger(c?.gen)&&c.gen>=0,iw=c=>typeof c=="object"&&typeof c?.name=="string",Ob=V_.bind(null,md,iw);class sw{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,i)})}addEventListener(t,e,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:o}=i;if(o.aborted){St("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Ol={DATA:1,ERROR:2},pe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function $y(){}function $e(c){if(c instanceof gi||c instanceof Gl||c instanceof Iy||c instanceof Yr||c instanceof Wh)return c;switch(c instanceof Error||typeof c=="object"&&c!==null||$t('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c.name){case"AbortException":return new gi(c.message);case"InvalidPDFException":return new Gl(c.message);case"PasswordException":return new Iy(c.message,c.code);case"ResponseException":return new Yr(c.message,c.status,c.missing);case"UnknownErrorException":return new Wh(c.message,c.details)}return new Wh(c.message,c.toString())}class Ur{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const i=t.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Ol.DATA)a.resolve(t.data);else if(t.callback===Ol.ERROR)a.reject($e(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:i,targetName:a,callback:Ol.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:i,targetName:a,callback:Ol.ERROR,callbackId:t.callbackId,reason:$e(l)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},i)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,i,a){const o=this.streamId++,l=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:h,action:t,streamId:o,data:e,desiredSize:f.desiredSize},a),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:h,stream:pe.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{kt(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:h,stream:pe.CANCEL,streamId:o,reason:$e(f)}),g.promise}},i)}#i(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,o=this.comObj,l=this,h=this.actionHandler[t.action],d={enqueue(f,g=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=g,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:a,stream:pe.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:pe.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){kt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:pe.ERROR,streamId:e,reason:$e(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(h,t.data,d).then(function(){o.postMessage({sourceName:i,targetName:a,stream:pe.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:i,targetName:a,stream:pe.START_COMPLETE,streamId:e,reason:$e(f)})})}#n(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case pe.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject($e(t.reason));break;case pe.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject($e(t.reason));break;case pe.PULL:if(!h){o.postMessage({sourceName:i,targetName:a,stream:pe.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||$y).then(function(){o.postMessage({sourceName:i,targetName:a,stream:pe.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:i,targetName:a,stream:pe.PULL_COMPLETE,streamId:e,reason:$e(f)})});break;case pe.ENQUEUE:if(kt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case pe.CLOSE:if(kt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case pe.ERROR:kt(l,"error should have stream controller"),l.controller.error($e(t.reason)),this.#r(l,e);break;case pe.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject($e(t.reason)),this.#r(l,e);break;case pe.CANCEL:if(!h)break;const d=$e(t.reason);Promise.try(h.onCancel||$y,d).then(function(){o.postMessage({sourceName:i,targetName:a,stream:pe.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:i,targetName:a,stream:pe.CANCEL_COMPLETE,streamId:e,reason:$e(f)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class Lb{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){$t("Abstract method `_createCanvas` called.")}}class aw extends Lb{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class Nb{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){$t("Abstract method `_fetch` called.")}}class Ky extends Nb{async _fetch(t){const e=await Ba(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):eo(e)}}class kb{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,a,o){return"none"}destroy(t=!1){}}class rw extends kb{#t;#e;#i;#n;#r;#s;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#r.createElementNS(ui,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#r.createElementNS(ui,"defs"),t.append(i),i.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const g=f.join(",");return[g,g,g]}const[e,i,a]=t,o=new Array(256),l=new Array(256),h=new Array(256);for(let d=0;d<256;d++)o[d]=e[d]/255,l[d]=i[d]/255,h[d]=a[d]/255;return[o.join(","),l.join(","),h.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(io(e)?St('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=zd(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,a,o]=this.#d(t),l=t.length===1?i:`${i}${a}${o}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const h=`g_${this.#n}_transfer_map_${this.#a++}`,d=this.#h(h);this.#o.set(t,d),this.#o.set(l,d);const f=this.#p(h);return this.#g(i,a,o,f),d}addHCMFilter(t,e){const i=`${t}-${e}`,a="base";let o=this.#c.get(a);if(o?.key===i||(o?(o.filter?.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},this.#c.set(a,o)),!t||!e))return o.url;const l=this.#b(t);t=nt.makeHexColor(...l);const h=this.#b(e);if(e=nt.makeHexColor(...h),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const E=A/255;d[A]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const f=d.join(","),g=`g_${this.#n}_hcm_filter`,y=o.filter=this.#p(g);this.#g(f,f,f,y),this.#m(y);const v=(A,E)=>{const S=l[A]/255,_=h[A]/255,T=new Array(E+1);for(let R=0;R<=E;R++)T[R]=S+R/E*(_-S);return T.join(",")};return this.#g(v(0,5),v(1,5),v(2,5),y),o.url=this.#h(g),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),a=`alpha_${i}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_alpha_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const h=this.#p(o);return this.#y(i,h),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,a;if(t?([i]=this.#d([t]),a=`luminosity_${i}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const h=this.#p(o);return this.#f(h),t&&this.#y(i,h),l}addHighlightHCMFilter(t,e,i,a,o){const l=`${e}-${i}-${a}-${o}`;let h=this.#c.get(t);if(h?.key===l||(h?(h.filter?.remove(),h.key=l,h.url="none",h.filter=null):(h={key:l,url:"none",filter:null},this.#c.set(t,h)),!e||!i))return h.url;const[d,f]=[e,i].map(this.#b.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,A]=[a,o].map(this.#b.bind(this));y<g&&([g,y,v,A]=[y,g,A,v]),this.#l.style.color="";const E=(T,R,C)=>{const D=new Array(256),N=(y-g)/C,B=T/255,P=(R-T)/(255*C);let j=0;for(let X=0;X<=C;X++){const Z=Math.round(g+X*N),J=B+X*P;for(let lt=j;lt<=Z;lt++)D[lt]=J;j=Z+1}for(let X=j;X<256;X++)D[X]=D[j-1];return D.join(",")},S=`g_${this.#n}_hcm_${t}_filter`,_=h.filter=this.#p(S);return this.#m(_),this.#g(E(v[0],A[0],5),E(v[1],A[1],5),E(v[2],A[2],5),_),h.url=this.#h(S),h.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#f(t){const e=this.#r.createElementNS(ui,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#r.createElementNS(ui,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(ui,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,i){const a=this.#r.createElementNS(ui,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)}#g(t,e,i,a){const o=this.#r.createElementNS(ui,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",i)}#y(t,e){const i=this.#r.createElementNS(ui,"feComponentTransfer");e.append(i),this.#u(i,"feFuncA",t)}#b(t){return this.#l.style.color=t,Pa(getComputedStyle(this.#l).getPropertyValue("color"))}}class Bb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){$t("Abstract method `_fetch` called.")}}class Wy extends Bb{async _fetch(t){const e=await Ba(t,"arraybuffer");return new Uint8Array(e)}}class Pb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){$t("Abstract method `_fetch` called.")}}class Qy extends Pb{async _fetch(t){const e=await Ba(t,"arraybuffer");return new Uint8Array(e)}}Fe&&St("Please use the `legacy` build in Node.js environments.");async function qd(c){const e=await process.getBuiltinModule("fs").promises.readFile(c);return new Uint8Array(e)}class ow extends kb{}class lw extends Lb{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class cw extends Nb{async _fetch(t){return qd(t)}}class uw extends Bb{async _fetch(t){return qd(t)}}class hw extends Pb{async _fetch(t){return qd(t)}}const ya="__forcedDependency",{floor:Zy,ceil:Jy}=Math;function Ll(c,t,e,i,a,o){c[t*4+0]=Math.min(c[t*4+0],e),c[t*4+1]=Math.min(c[t*4+1],i),c[t*4+2]=Math.max(c[t*4+2],a),c[t*4+3]=Math.max(c[t*4+3],o)}const yd=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class dw{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===yd}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Nl=(c,t)=>{if(!c)return;let e=c.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},c.set(t,e)),e};class fw{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[ya]:[]};#i=new Map;#n=[];#r=[];#s=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#p;#u;#g;constructor(t,e,i=!1){this.#f=t.width,this.#m=t.height,this.#y(e),i&&(this.#g=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const i=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),e&&e.length>0?(this.#u.set(e),this.#u.fill(yd,e.length)):this.#u.fill(yd)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[ya]:{__proto__:this.#e[ya]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const i=this.#n.pop();return i!==void 0&&(Nl(this.#g,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(Nl(this.#g,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(Nl(this.#g,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#s.push(nt.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#i.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(ya,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(ya,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,a,o,l){const h=nt.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];nt.axialAlignedBoundingBox([i,o,a,l],h,d);const f=nt.intersect(this.#a,d);return f?(this.#a[0]=f[0],this.#a[1]=f[1],this.#a[2]=f[2],this.#a[3]=f[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,i,a,o,l){const h=this.#a;if(h[0]===1/0)return this;const d=nt.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform());if(h[0]===-1/0)return nt.axialAlignedBoundingBox([i,o,a,l],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return nt.axialAlignedBoundingBox([i,o,a,l],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],h[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],h[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],h[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],h[3])),this}recordCharacterBBox(t,e,i,a=1,o=0,l=0,h){const d=i.bbox;let f,g;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(i),f!==!1&&(g=[0,0,0,0],nt.axialAlignedBoundingBox(d,i.fontMatrix,g),(a!==1||o!==0||l!==0)&&nt.scaleMinMax([a,0,0,-a,o,l],g),f)))return this.recordBBox(t,e,g[0],g[2],g[1],g[3]);if(!h)return this.recordFullPageBBox(t);const y=h();return d&&g&&f===void 0&&(f=g[0]<=o-y.actualBoundingBoxLeft&&g[2]>=o+y.actualBoundingBoxRight&&g[1]<=l-y.actualBoundingBoxAscent&&g[3]>=l+y.actualBoundingBoxDescent,this.#h.set(i,f),f)?this.recordBBox(t,e,g[0],g[2],g[1],g[3]):this.recordBBox(t,e,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,l-y.actualBoundingBoxAscent,l+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#m,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#l,a=this.#t,o=this.#e;for(const l of e)l in this.#t?i.add(a[l]):l in o&&o[l].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[ya]),this.#g){const i=Nl(this.#g,t),{dependencies:a}=i;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),i.isRenderingOperation=!0}if(this.#c===t){const i=Zy(this.#o[0]*256/this.#f),a=Zy(this.#o[1]*256/this.#m),o=Jy(this.#o[2]*256/this.#f),l=Jy(this.#o[3]*256/this.#m);Ll(this.#p,t,i,a,o,l);for(const h of this.#l)h!==t&&Ll(this.#p,h,i,a,o,l);for(const h of this.#n)h!==t&&Ll(this.#p,h,i,a,o,l);for(const h of this.#r)h!==t&&Ll(this.#p,h,i,a,o,l);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of i)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new dw(this.#u,this.#p)}takeDebugMetadata(){return this.#g}}class Xl{#t;#e;#i;#n=0;#r=0;constructor(t,e,i){if(t instanceof Xl&&t.#i===!!i)return t;this.#t=t,this.#e=e,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,a,o,l){return this.#i||this.#t.recordClipBox(this.#e,e,i,a,o,l),this}recordBBox(t,e,i,a,o,l){return this.#i||this.#t.recordBBox(this.#e,e,i,a,o,l),this}recordCharacterBBox(t,e,i,a,o,l,h){return this.#i||this.#t.recordCharacterBBox(this.#e,e,i,a,o,l,h),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const _n={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Me={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function vd(c,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,i),c.clip(a)}class Xd{isModifyingCurrentTransform(){return!1}getPattern(){$t("Abstract method `getPattern` called.")}}class pw extends Xd{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,a){let o;if(a===Me.STROKE||a===Me.FILL){const l=e.current.getClippedPathBoundingBox(a,ee(t))||[0,0,0,0],h=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",h,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),i=nt.transform(i,[1,0,0,1,l[0],l[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),vd(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(i);o.setTransform(y)}else vd(t,this._bbox),o=this._createGradient(t);return o}}function Jh(c,t,e,i,a,o,l,h){const d=t.coords,f=t.colors,g=c.data,y=c.width*4;let v;d[e+1]>d[i+1]&&(v=e,e=i,i=v,v=o,o=l,l=v),d[i+1]>d[a+1]&&(v=i,i=a,a=v,v=l,l=h,h=v),d[e+1]>d[i+1]&&(v=e,e=i,i=v,v=o,o=l,l=v);const A=(d[e]+t.offsetX)*t.scaleX,E=(d[e+1]+t.offsetY)*t.scaleY,S=(d[i]+t.offsetX)*t.scaleX,_=(d[i+1]+t.offsetY)*t.scaleY,T=(d[a]+t.offsetX)*t.scaleX,R=(d[a+1]+t.offsetY)*t.scaleY;if(E>=R)return;const C=f[o],D=f[o+1],N=f[o+2],B=f[l],P=f[l+1],j=f[l+2],X=f[h],Z=f[h+1],J=f[h+2],lt=Math.round(E),ct=Math.round(R);let at,pt,L,H,Q,ut,yt,O;for(let G=lt;G<=ct;G++){if(G<_){const ot=G<E?0:(E-G)/(E-_);at=A-(A-S)*ot,pt=C-(C-B)*ot,L=D-(D-P)*ot,H=N-(N-j)*ot}else{let ot;G>R?ot=1:_===R?ot=0:ot=(_-G)/(_-R),at=S-(S-T)*ot,pt=B-(B-X)*ot,L=P-(P-Z)*ot,H=j-(j-J)*ot}let K;G<E?K=0:G>R?K=1:K=(E-G)/(E-R),Q=A-(A-T)*K,ut=C-(C-X)*K,yt=D-(D-Z)*K,O=N-(N-J)*K;const tt=Math.round(Math.min(at,Q)),it=Math.round(Math.max(at,Q));let ht=y*G+tt*4;for(let ot=tt;ot<=it;ot++)K=(at-ot)/(at-Q),K<0?K=0:K>1&&(K=1),g[ht++]=pt-(pt-ut)*K|0,g[ht++]=L-(L-yt)*K|0,g[ht++]=H-(H-O)*K|0,g[ht++]=255}}function gw(c,t,e){const i=t.coords,a=t.colors;let o,l;switch(t.type){case"lattice":const h=t.verticesPerRow,d=Math.floor(i.length/h)-1,f=h-1;for(o=0;o<d;o++){let g=o*h;for(let y=0;y<f;y++,g++)Jh(c,e,i[g],i[g+1],i[g+h],a[g],a[g+1],a[g+h]),Jh(c,e,i[g+h+1],i[g+1],i[g+h],a[g+h+1],a[g+1],a[g+h])}break;case"triangles":for(o=0,l=i.length;o<l;o+=3)Jh(c,e,i[o],i[o+1],i[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class mw extends Xd{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-h,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=f/y,E=g/v,S={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/A,scaleY:1/E},_=y+4,T=v+4,R=i.getCanvas("mesh",_,T),C=R.context,D=C.createImageData(y,v);if(e){const B=D.data;for(let P=0,j=B.length;P<j;P+=4)B[P]=e[0],B[P+1]=e[1],B[P+2]=e[2],B[P+3]=255}for(const B of this._figures)gw(D,B,S);return C.putImageData(D,2,2),{canvas:R.canvas,offsetX:h-2*A,offsetY:d-2*E,scaleX:A,scaleY:E}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,a){vd(t,this._bbox);const o=new Float32Array(2);if(a===Me.SHADING)nt.singularValueDecompose2dScale(ee(t),o);else if(this.matrix){nt.singularValueDecompose2dScale(this.matrix,o);const[h,d]=o;nt.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=h,o[1]*=d}else nt.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,a===Me.SHADING?null:this._background,e.cachedCanvases);return a!==Me.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class yw extends Xd{getPattern(){return"hotpink"}}function vw(c){switch(c[0]){case"RadialAxial":return new pw(c);case"Mesh":return new mw(c);case"Dummy":return new yw}throw new Error(`Unknown IR type: ${c[0]}`)}const tv={COLORED:1,UNCOLORED:2};class Yd{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t,e){const{bbox:i,operatorList:a,paintType:o,tilingType:l,color:h,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),sc("TilingType: "+l);const y=i[0],v=i[1],A=i[2],E=i[3],S=A-y,_=E-v,T=new Float32Array(2);nt.singularValueDecompose2dScale(this.matrix,T);const[R,C]=T;nt.singularValueDecompose2dScale(this.baseTransform,T);const D=R*T[0],N=C*T[1];let B=S,P=_,j=!1,X=!1;const Z=Math.ceil(f*D),J=Math.ceil(g*N),lt=Math.ceil(S*D),ct=Math.ceil(_*N);Z>=lt?B=f:j=!0,J>=ct?P=g:X=!0;const at=this.getSizeAndScale(B,this.ctx.canvas.width,D),pt=this.getSizeAndScale(P,this.ctx.canvas.height,N),L=t.cachedCanvases.getCanvas("pattern",at.size,pt.size),H=L.context,Q=d.createCanvasGraphics(H,e);if(Q.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Q,o,h),H.translate(-at.scale*y,-pt.scale*v),Q.transform(0,at.scale,0,0,pt.scale,0,0),H.save(),Q.dependencyTracker?.save(),this.clipBbox(Q,y,v,A,E),Q.baseTransform=ee(Q.ctx),Q.executeOperatorList(a),Q.endDrawing(),Q.dependencyTracker?.restore(),H.restore(),j||X){const ut=L.canvas;j&&(B=f),X&&(P=g);const yt=this.getSizeAndScale(B,this.ctx.canvas.width,D),O=this.getSizeAndScale(P,this.ctx.canvas.height,N),G=yt.size,K=O.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",G,K),it=tt.context,ht=j?Math.floor(S/f):0,ot=X?Math.floor(_/g):0;for(let Ht=0;Ht<=ht;Ht++)for(let _t=0;_t<=ot;_t++)it.drawImage(ut,G*Ht,K*_t,G,K,0,0,G,K);return{canvas:tt.canvas,scaleX:yt.scale,scaleY:O.scale,offsetX:y,offsetY:v}}return{canvas:L.canvas,scaleX:at.scale,scaleY:pt.scale,offsetX:y,offsetY:v}}getSizeAndScale(t,e,i){const a=Math.max(Yd.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*i);return o>=a?o=a:i=o/t,{scale:i,size:o}}clipBbox(t,e,i,a,o){const l=a-e,h=o-i;t.ctx.rect(e,i,l,h),nt.axialAlignedBoundingBox([e,i,a,o],ee(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const a=t.ctx,o=t.current;switch(e){case tv.COLORED:const{fillStyle:l,strokeStyle:h}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=h;break;case tv.UNCOLORED:a.fillStyle=a.strokeStyle=i,o.fillColor=o.strokeColor=i;break;default:throw new U_(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,a,o){let l=i;a!==Me.SHADING&&(l=nt.transform(l,e.baseTransform),this.matrix&&(l=nt.transform(l,this.matrix)));const h=this.createPatternCanvas(e,o);let d=new DOMMatrix(l);d=d.translate(h.offsetX,h.offsetY),d=d.scale(1/h.scaleX,1/h.scaleY);const f=t.createPattern(h.canvas,"repeat");return f.setTransform(d),f}}function bw({src:c,srcPos:t=0,dest:e,width:i,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const h=Se.isLittleEndian?4278190080:255,[d,f]=l?[o,h]:[h,o],g=i>>3,y=i&7,v=c.length;e=new Uint32Array(e.buffer);let A=0;for(let E=0;E<a;E++){for(const _=t+g;t<_;t++){const T=t<v?c[t]:255;e[A++]=T&128?f:d,e[A++]=T&64?f:d,e[A++]=T&32?f:d,e[A++]=T&16?f:d,e[A++]=T&8?f:d,e[A++]=T&4?f:d,e[A++]=T&2?f:d,e[A++]=T&1?f:d}if(y===0)continue;const S=t<v?c[t++]:255;for(let _=0;_<y;_++)e[A++]=S&1<<7-_?f:d}return{srcPos:t,destPos:A}}const ev=16,nv=100,Aw=15,iv=10,Ke=16,td=new DOMMatrix,cn=new Float32Array(2),Sa=new Float32Array([1/0,1/0,-1/0,-1/0]);function Sw(c,t){if(c._removeMirroring)throw new Error("Context is already forwarding operations.");c.__originalSave=c.save,c.__originalRestore=c.restore,c.__originalRotate=c.rotate,c.__originalScale=c.scale,c.__originalTranslate=c.translate,c.__originalTransform=c.transform,c.__originalSetTransform=c.setTransform,c.__originalResetTransform=c.resetTransform,c.__originalClip=c.clip,c.__originalMoveTo=c.moveTo,c.__originalLineTo=c.lineTo,c.__originalBezierCurveTo=c.bezierCurveTo,c.__originalRect=c.rect,c.__originalClosePath=c.closePath,c.__originalBeginPath=c.beginPath,c._removeMirroring=()=>{c.save=c.__originalSave,c.restore=c.__originalRestore,c.rotate=c.__originalRotate,c.scale=c.__originalScale,c.translate=c.__originalTranslate,c.transform=c.__originalTransform,c.setTransform=c.__originalSetTransform,c.resetTransform=c.__originalResetTransform,c.clip=c.__originalClip,c.moveTo=c.__originalMoveTo,c.lineTo=c.__originalLineTo,c.bezierCurveTo=c.__originalBezierCurveTo,c.rect=c.__originalRect,c.closePath=c.__originalClosePath,c.beginPath=c.__originalBeginPath,delete c._removeMirroring},c.save=function(){t.save(),this.__originalSave()},c.restore=function(){t.restore(),this.__originalRestore()},c.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},c.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},c.transform=function(e,i,a,o,l,h){t.transform(e,i,a,o,l,h),this.__originalTransform(e,i,a,o,l,h)},c.setTransform=function(e,i,a,o,l,h){t.setTransform(e,i,a,o,l,h),this.__originalSetTransform(e,i,a,o,l,h)},c.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},c.rotate=function(e){t.rotate(e),this.__originalRotate(e)},c.clip=function(e){t.clip(e),this.__originalClip(e)},c.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},c.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},c.bezierCurveTo=function(e,i,a,o,l,h){t.bezierCurveTo(e,i,a,o,l,h),this.__originalBezierCurveTo(e,i,a,o,l,h)},c.rect=function(e,i,a,o){t.rect(e,i,a,o),this.__originalRect(e,i,a,o)},c.closePath=function(){t.closePath(),this.__originalClosePath()},c.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Ew{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,i)):(a=this.canvasFactory.create(e,i),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function kl(c,t,e,i,a,o,l,h,d,f){const[g,y,v,A,E,S]=ee(c);if(y===0&&v===0){const R=l*g+E,C=Math.round(R),D=h*A+S,N=Math.round(D),B=(l+d)*g+E,P=Math.abs(Math.round(B)-C)||1,j=(h+f)*A+S,X=Math.abs(Math.round(j)-N)||1;return c.setTransform(Math.sign(g),0,0,Math.sign(A),C,N),c.drawImage(t,e,i,a,o,0,0,P,X),c.setTransform(g,y,v,A,E,S),[P,X]}if(g===0&&A===0){const R=h*v+E,C=Math.round(R),D=l*y+S,N=Math.round(D),B=(h+f)*v+E,P=Math.abs(Math.round(B)-C)||1,j=(l+d)*y+S,X=Math.abs(Math.round(j)-N)||1;return c.setTransform(0,Math.sign(y),Math.sign(v),0,C,N),c.drawImage(t,e,i,a,o,0,0,X,P),c.setTransform(g,y,v,A,E,S),[X,P]}c.drawImage(t,e,i,a,o,l,h,d,f);const _=Math.hypot(g,y),T=Math.hypot(v,A);return[_*d,T*f]}class sv{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=fd;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Re.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Sa.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Me.FILL,e=null){const i=this.minMax.slice();if(t===Me.STROKE){e||$t("Stroke bounding box must include transform."),nt.singularValueDecompose2dScale(e,cn);const a=cn[0]*this.lineWidth/2,o=cn[1]*this.lineWidth/2;i[0]-=a,i[1]-=o,i[2]+=a,i[3]+=o}return i}updateClipFromPath(){const t=nt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Sa,0)}getClippedPathBoundingBox(t=Me.FILL,e=null){return nt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function av(c,t){if(t instanceof ImageData){c.putImageData(t,0,0);return}const e=t.height,i=t.width,a=e%Ke,o=(e-a)/Ke,l=a===0?o:o+1,h=c.createImageData(i,Ke);let d=0,f;const g=t.data,y=h.data;let v,A,E,S;if(t.kind===Hr.GRAYSCALE_1BPP){const _=g.byteLength,T=new Uint32Array(y.buffer,0,y.byteLength>>2),R=T.length,C=i+7>>3,D=4294967295,N=Se.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(E=v<o?Ke:a,f=0,A=0;A<E;A++){const B=_-d;let P=0;const j=B>C?i:B*8-7,X=j&-8;let Z=0,J=0;for(;P<X;P+=8)J=g[d++],T[f++]=J&128?D:N,T[f++]=J&64?D:N,T[f++]=J&32?D:N,T[f++]=J&16?D:N,T[f++]=J&8?D:N,T[f++]=J&4?D:N,T[f++]=J&2?D:N,T[f++]=J&1?D:N;for(;P<j;P++)Z===0&&(J=g[d++],Z=128),T[f++]=J&Z?D:N,Z>>=1}for(;f<R;)T[f++]=0;c.putImageData(h,0,v*Ke)}}else if(t.kind===Hr.RGBA_32BPP){for(A=0,S=i*Ke*4,v=0;v<o;v++)y.set(g.subarray(d,d+S)),d+=S,c.putImageData(h,0,A),A+=Ke;v<l&&(S=i*a*4,y.set(g.subarray(d,d+S)),c.putImageData(h,0,A))}else if(t.kind===Hr.RGB_24BPP)for(E=Ke,S=i*E,v=0;v<l;v++){for(v>=o&&(E=a,S=i*E),f=0,A=S;A--;)y[f++]=g[d++],y[f++]=g[d++],y[f++]=g[d++],y[f++]=255;c.putImageData(h,0,v*Ke)}else throw new Error(`bad image kind: ${t.kind}`)}function rv(c,t){if(t.bitmap){c.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,a=e%Ke,o=(e-a)/Ke,l=a===0?o:o+1,h=c.createImageData(i,Ke);let d=0;const f=t.data,g=h.data;for(let y=0;y<l;y++){const v=y<o?Ke:a;({srcPos:d}=bw({src:f,srcPos:d,dest:g,width:i,height:v,nonBlackColor:0})),c.putImageData(h,0,y*Ke)}}function Nr(c,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)c[i]!==void 0&&(t[i]=c[i]);c.setLineDash!==void 0&&(t.setLineDash(c.getLineDash()),t.lineDashOffset=c.lineDashOffset)}function Bl(c){c.strokeStyle=c.fillStyle="#000000",c.fillRule="nonzero",c.globalAlpha=1,c.lineWidth=1,c.lineCap="butt",c.lineJoin="miter",c.miterLimit=10,c.globalCompositeOperation="source-over",c.font="10px sans-serif",c.setLineDash!==void 0&&(c.setLineDash([]),c.lineDashOffset=0);const{filter:t}=c;t!=="none"&&t!==""&&(c.filter="none")}function ov(c,t){if(t)return!0;nt.singularValueDecompose2dScale(c,cn);const e=Math.fround(Ln.pixelRatio*_s.PDF_TO_CSS_UNITS);return cn[0]<=e&&cn[1]<=e}const _w=["butt","round","square"],ww=["miter","round","bevel"],Tw={},lv={};class _a{constructor(t,e,i,a,o,{optionalContentConfig:l,markedContentStack:h=null},d,f,g){this.ctx=t,this.current=new sv(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=l,this.cachedCanvases=new Ew(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=h,i){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ee(this.compositeCtx))}this.ctx.save(),Bl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ee(this.ctx)}executeOperatorList(t,e,i,a,o){const l=t.argsArray,h=t.fnArray;let d=e||0;const f=l.length;if(f===d)return d;const g=f-d>iv&&typeof i=="function",y=g?Date.now()+Aw:0;let v=0;const A=this.commonObjs,E=this.objs;let S,_;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,i),d;if(!o||o(d))if(S=h[d],_=l[d]??null,S!==Ma.dependency)_===null?this[S](d):this[S](d,..._);else for(const T of _){this.dependencyTracker?.recordNamedData(T,d);const R=T.startsWith("g_")?A:E;if(!R.has(T))return R.get(T,i),d}if(d++,d===f)return d;if(g&&++v>iv){if(Date.now()>y)return i(),d;v=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),h=i,d=a,f="prescale1",g,y;for(;o>2&&h>1||l>2&&d>1;){let v=h,A=d;o>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/v),l>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/A),g=this.cachedCanvases.getCanvas(f,v,A),y=g.context,y.clearRect(0,0,v,A),y.drawImage(t,0,0,h,d,0,0,v,A),t=g.canvas,h=v,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:d}}_createMaskCanvas(t,e){const i=this.ctx,{width:a,height:o}=e,l=this.current.fillColor,h=this.current.patternFill,d=ee(i);let f,g,y,v;if((e.bitmap||e.data)&&e.count>1){const Z=e.bitmap||e.data.buffer;g=JSON.stringify(h?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get(Z),f||(f=new Map,this._cachedBitmapsMap.set(Z,f));const J=f.get(g);if(J&&!h){const lt=Math.round(Math.min(d[0],d[2])+d[4]),ct=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,_n.transformAndFill),{canvas:J,offsetX:lt,offsetY:ct}}y=J}y||(v=this.cachedCanvases.getCanvas("maskCanvas",a,o),rv(v.context,e));let A=nt.transform(d,[1/a,0,0,-1/o,0,0]);A=nt.transform(A,[1,0,0,1,0,-o]);const E=Sa.slice();nt.axialAlignedBoundingBox([0,0,a,o],A,E);const[S,_,T,R]=E,C=Math.round(T-S)||1,D=Math.round(R-_)||1,N=this.cachedCanvases.getCanvas("fillCanvas",C,D),B=N.context,P=S,j=_;B.translate(-P,-j),B.transform(...A),y||(y=this._scaleImage(v.canvas,In(B)),y=y.img,f&&h&&f.set(g,y)),B.imageSmoothingEnabled=ov(ee(B),e.interpolate),kl(B,y,0,0,y.width,y.height,0,0,a,o),B.globalCompositeOperation="source-in";const X=nt.transform(In(B),[1,0,0,1,-P,-j]);return B.fillStyle=h?l.getPattern(i,this,X,Me.FILL,t):l,B.fillRect(0,0,a,o),f&&!h&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,N.canvas)),this.dependencyTracker?.recordDependencies(t,_n.transformAndFill),{canvas:N.canvas,offsetX:Math.round(P),offsetY:Math.round(j)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=_w[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=ww[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,a]of e)switch(i){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,e,i);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),Nr(this.suspendedCtx,l),Sw(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Nr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,a){const o=a[0],l=a[1],h=a[2]-o,d=a[3]-l;h===0||d===0||(this.genericComposeSMask(e.context,i,h,d,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,a,o,l,h,d,f,g,y){let v=t.canvas,A=d-g,E=f-y;if(l)if(A<0||E<0||A+i>v.width||E+a>v.height){const _=this.cachedCanvases.getCanvas("maskExtension",i,a),T=_.context;T.drawImage(v,-A,-E),T.globalCompositeOperation="destination-atop",T.fillStyle=l,T.fillRect(0,0,i,a),T.globalCompositeOperation="source-over",v=_.canvas,A=E=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(A,E,i,a),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(A,E,i,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const S=new Path2D;S.rect(d,f,i,a),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(v,A,E,i,a,d,f,i,a),e.restore()}save(t){this.inSMaskMode&&Nr(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Nr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,a,o,l,h){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,a,o,l,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,a){let[o]=i;if(!a){o||=i[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===Ma.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-l,a[2]+l,a[1]-l,a[3]+l).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const l=i[0]=new Path2D;for(let h=0,d=o.length;h<d;)switch(o[h++]){case Rl.moveTo:l.moveTo(o[h++],o[h++]);break;case Rl.lineTo:l.lineTo(o[h++],o[h++]);break;case Rl.curveTo:l.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);break;case Rl.closePath:l.closePath();break;default:St(`Unrecognized drawing path operator: ${o[h-1]}`);break}o=l}nt.axialAlignedBoundingBox(a,ee(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,In(a),Me.STROKE,t),l){const h=new Path2D;h.addPath(e,a.getTransform().invertSelf().multiplySelf(l)),e=h}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,_n.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Me.STROKE,ee(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const a=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let h=!1;if(l){const f=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,In(a),Me.FILL,t),f){const g=new Path2D;g.addPath(e,a.getTransform().invertSelf().multiplySelf(f)),e=g}h=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,_n.fill),h&&(a.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,_n.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Tw}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=lv}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,o=i.getTransform().invertSelf();for(const{transform:l,x:h,y:d,fontSize:f,path:g}of e)g&&a.addPath(g,new DOMMatrix(l).preMultiplySelf(o).translate(h,d).scale(f,-f));i.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),o=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=a.fontMatrix||fd,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&St("Invalid font matrix for font "+e),i<0?(i=-i,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=i,a.isType3Font)return;const l=a.loadedName||"sans-serif",h=a.systemFontInfo?.css||`"${l}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let g=i;i<ev?g=ev:i>nv&&(g=nv),this.current.fontSizeScale=i/g,this.ctx.font=`${f} ${d} ${g}px ${h}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,i){const a=new Path2D;return a.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),a}paintChar(t,e,i,a,o,l){const h=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,v=g&Re.FILL_STROKE_MASK,A=!!(g&Re.ADD_TO_PATH_FLAG),E=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let _;if((f.disableFontFace||A||E||S)&&!f.missingFile&&(_=f.getPathGenerator(this.commonObjs,e)),_&&(f.disableFontFace||E||S)){h.save(),h.translate(i,a),h.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,h,f);let T;if(v===Re.FILL||v===Re.FILL_STROKE)if(o){T=h.getTransform(),h.setTransform(...o);const R=this.#i(_,T,o);h.fill(R)}else h.fill(_);if(v===Re.STROKE||v===Re.FILL_STROKE)if(l){T||=h.getTransform(),h.setTransform(...l);const{a:R,b:C,c:D,d:N}=T,B=nt.inverseTransform(l),P=nt.transform([R,C,D,N,0,0],B);nt.singularValueDecompose2dScale(P,cn),h.lineWidth*=Math.max(cn[0],cn[1])/y,h.stroke(this.#i(_,T,l))}else h.lineWidth/=y,h.stroke(_);h.restore()}else(v===Re.FILL||v===Re.FILL_STROKE)&&(h.fillText(e,i,a),this.dependencyTracker?.recordCharacterBBox(t,h,f,y,i,a,()=>h.measureText(e))),(v===Re.STROKE||v===Re.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,h,f,y,i,a,()=>h.measureText(e)).recordDependencies(t,_n.stroke),h.strokeText(e,i,a));A&&((this.pendingTextPaths||=[]).push({transform:ee(h),x:i,y:a,fontSize:y,path:_}),this.dependencyTracker?.recordCharacterBBox(t,h,f,y,i,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){i=!0;break}return Tt(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,_n.showText).resetBBox(t),this.current.textRenderingMode&Re.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,a=i.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=i.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,h=i.fontSizeScale,d=i.charSpacing,f=i.wordSpacing,g=i.fontDirection,y=i.textHScale*g,v=e.length,A=a.vertical,E=A?1:-1,S=a.defaultVMetrics,_=o*i.fontMatrix[0],T=i.textRenderingMode===Re.FILL&&!a.disableFontFace&&!i.patternFill;l.save(),i.textMatrix&&l.transform(...i.textMatrix),l.translate(i.x,i.y+i.textRise),g>0?l.scale(y,-1):l.scale(y,1);let R,C;if(i.patternFill){l.save();const j=i.fillColor.getPattern(l,this,In(l),Me.FILL,t);R=ee(l),l.restore(),l.fillStyle=j}if(i.patternStroke){l.save();const j=i.strokeColor.getPattern(l,this,In(l),Me.STROKE,t);C=ee(l),l.restore(),l.strokeStyle=j}let D=i.lineWidth;const N=i.textMatrixScale;if(N===0||D===0){const j=i.textRenderingMode&Re.FILL_STROKE_MASK;(j===Re.STROKE||j===Re.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=N;if(h!==1&&(l.scale(h,h),D/=h),l.lineWidth=D,a.isInvalidPDFjsFont){const j=[];let X=0;for(const J of e)j.push(J.unicode),X+=J.width;const Z=j.join("");if(l.fillText(Z,0,0),this.dependencyTracker!==null){const J=l.measureText(Z);this.dependencyTracker.recordBBox(t,this.ctx,-J.actualBoundingBoxLeft,J.actualBoundingBoxRight,-J.actualBoundingBoxAscent,J.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=X*_*y,l.restore(),this.compose();return}let B=0,P;for(P=0;P<v;++P){const j=e[P];if(typeof j=="number"){B+=E*j*o/1e3;continue}let X=!1;const Z=(j.isSpace?f:0)+d,J=j.fontChar,lt=j.accent;let ct,at,pt=j.width;if(A){const Q=j.vmetric||S,ut=-(j.vmetric?Q[1]:pt*.5)*_,yt=Q[2]*_;pt=Q?-Q[0]:pt,ct=ut/h,at=(B+yt)/h}else ct=B/h,at=0;let L;if(a.remeasure&&pt>0){L=l.measureText(J);const Q=L.width*1e3/o*h;if(pt<Q&&this.isFontSubpixelAAEnabled){const ut=pt/Q;X=!0,l.save(),l.scale(ut,1),ct/=ut}else pt!==Q&&(ct+=(pt-Q)/2e3*o/h)}if(this.contentVisible&&(j.isInFont||a.missingFile)){if(T&&!lt)l.fillText(J,ct,at),this.dependencyTracker?.recordCharacterBBox(t,l,L?{bbox:null}:a,o/h,ct,at,()=>L??l.measureText(J));else if(this.paintChar(t,J,ct,at,R,C),lt){const Q=ct+o*lt.offset.x/h,ut=at-o*lt.offset.y/h;this.paintChar(t,lt.fontChar,Q,ut,R,C)}}const H=A?pt*_-Z*g:pt*_+Z*g;B+=H,X&&l.restore()}A?i.y-=B:i.x+=B*y,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,a=this.current,o=a.font,l=a.fontSize,h=a.fontDirection,d=o.vertical?1:-1,f=a.charSpacing,g=a.wordSpacing,y=a.textHScale*h,v=a.fontMatrix||fd,A=e.length,E=a.textRenderingMode===Re.INVISIBLE;let S,_,T,R;if(E||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),a.textMatrix&&i.transform(...a.textMatrix),i.translate(a.x,a.y+a.textRise),i.scale(y,h);const C=this.dependencyTracker;for(this.dependencyTracker=C?new Xl(C,t):null,S=0;S<A;++S){if(_=e[S],typeof _=="number"){R=d*_*l/1e3,this.ctx.translate(R,0),a.x+=R*y;continue}const D=(_.isSpace?g:0)+f,N=o.charProcOperatorList[_.operatorListId];N?this.contentVisible&&(this.save(),i.scale(l,l),i.transform(...v),this.executeOperatorList(N),this.restore()):St(`Type3 character "${_.operatorListId}" is not available.`);const B=[_.width,0];nt.applyTransform(B,v),T=B[0]*l+D,i.translate(T,0),a.x+=T*y}i.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,a,o,l,h){const d=new Path2D;d.rect(a,o,l-a,h-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,l,o,h).recordClipBox(t,this.ctx,a,l,o,h),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const a=this.baseTransform||ee(this.ctx),o={createCanvasGraphics:(l,h)=>new _a(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Xl(this.dependencyTracker,h,!0):null)};i=new Yd(e,this.ctx,o,a)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=vw(this.getObject(t,e)),this.cachedPatterns.set(e,a)),i&&(a.matrix=i),a}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const a=this._getPattern(t,e);i.fillStyle=a.getPattern(i,this,In(i),Me.SHADING,t);const o=In(i);if(o){const{width:l,height:h}=i.canvas,d=Sa.slice();nt.axialAlignedBoundingBox([0,0,l,h],o,d);const[f,g,y,v]=d;this.ctx.fillRect(f,g,y-f,v-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,_n.transform).recordDependencies(t,_n.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){$t("Should not call beginInlineImage")}beginImageData(){$t("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ee(this.ctx),i)){nt.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[a,o,l,h]=i,d=new Path2D;d.rect(a,o,l-a,h-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,l,o,h),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||sc("TODO: Support non-isolated groups."),e.knockout&&St("Knockout groups not supported.");const a=ee(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=Sa.slice();nt.axialAlignedBoundingBox(e.bbox,ee(i),o);const l=[0,0,i.canvas.width,i.canvas.height];o=nt.intersect(o,l)||[0,0,0,0];const h=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-h,1),g=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(y,f,g),A=v.context;A.translate(-h,-d),A.transform(...a);let E=new Path2D;const[S,_,T,R]=e.bbox;if(E.rect(S,_,T-S,R-_),e.matrix){const C=new Path2D;C.addPath(E,new DOMMatrix(e.matrix)),E=C}A.clip(E),e.smask&&this.smaskStack.push({canvas:v.canvas,context:A,offsetX:h,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(h,d),i.save()),Nr(i,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=ee(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=Sa.slice();nt.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],o,l),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,i,a,o,l){if(this.#t(),Bl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const h=i[2]-i[0],d=i[3]-i[1];if(l&&this.annotationCanvasMap){a=a.slice(),a[4]-=i[0],a[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=h,i[3]=d,nt.singularValueDecompose2dScale(ee(this.ctx),cn);const{viewportScale:f}=this,g=Math.ceil(h*this.outputScaleX*f),y=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:v,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(cn[0],0,0,-cn[1],0,d*cn[1]),Bl(this.ctx)}else{Bl(this.ctx),this.endPath(t);const f=new Path2D;f.rect(i[0],i[1],h,d),this.ctx.clip(f)}}this.current=new sv(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const a=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,a=0,o=0,l,h){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=ee(d);d.transform(i,a,o,l,0,0);const g=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,v=h.length;y<v;y+=2){const A=nt.transform(f,[i,a,o,l,h[y],h[y+1]]);d.drawImage(g.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+g.canvas.width,A[5],A[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,_n.transformAndFill);for(const l of e){const{data:h,width:d,height:f,transform:g}=l,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),v=y.context;v.save();const A=this.getObject(t,h,l);rv(v,A),v.globalCompositeOperation="source-in",v.fillStyle=o?a.getPattern(v,this,In(i),Me.FILL,t):a,v.fillRect(0,0,d,f),v.restore(),i.save(),i.transform(...g),i.scale(1,-1),kl(i,y.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,d,0,f),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){St("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,a,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){St("Dependent image isn't ready yet");return}const h=l.width,d=l.height,f=[];for(let g=0,y=o.length;g<y;g+=2)f.push({transform:[i,0,0,a,o[g],o[g+1]],x:0,y:0,w:h,h:d});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",i,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,a=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/i,-1/a);let h;if(e.bitmap)h=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)h=e;else{const g=this.cachedCanvases.getCanvas("inlineImage",i,a).context;av(g,e),h=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(h,In(o));o.imageSmoothingEnabled=ov(ee(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,i,-a,0).recordDependencies(t,_n.imageXObject).recordOperation(t),kl(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,i,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const a=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const l=e.width,h=e.height,f=this.cachedCanvases.getCanvas("inlineImage",l,h).context;av(f,e),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of i)a.save(),a.transform(...l.transform),a.scale(1,-1),kl(a,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,_n.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===lv?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ee(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:a,d:o}=this.ctx.getTransform();let l,h;if(i===0&&a===0){const d=Math.abs(e),f=Math.abs(o);if(d===f)if(t===0)l=h=1/d;else{const g=d*t;l=h=g<1?1/g:1}else if(t===0)l=1/d,h=1/f;else{const g=d*t,y=f*t;l=g<1?1/g:1,h=y<1?1/y:1}}else{const d=Math.abs(e*o-i*a),f=Math.hypot(e,i),g=Math.hypot(a,o);if(t===0)l=g/d,h=f/d;else{const y=t*d;l=g>y?g/y:1,h=f>y?f/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){i.lineWidth=(a||1)*o,i.stroke(t);return}const h=i.getLineDash();e&&i.save(),i.scale(o,l),td.a=1/o,td.d=1/l;const d=new Path2D;if(d.addPath(t,td),h.length>0){const f=Math.max(o,l);i.setLineDash(h.map(g=>g/f)),i.lineDashOffset/=f}i.lineWidth=a||1,i.stroke(d),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const c in Ma)_a.prototype[c]!==void 0&&(_a.prototype[Ma[c]]=_a.prototype[c]);class wa{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,i={};let a=0;for(const f of wa.strings){const g=e.encode(t[f]);i[f]=g,a+=4+g.length}const o=new ArrayBuffer(a),l=new Uint8Array(o),h=new DataView(o);let d=0;for(const f of wa.strings){const g=i[f],y=g.length;h.setUint32(d,y),l.set(g,d+4),d+=4+y}return kt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){kt(t<wa.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Ta{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,i={};let a=0;for(const v of Ta.strings){const A=e.encode(t[v]);i[v]=A,a+=4+A.length}a+=4;let o,l,h=1+a;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),h+=4+o.length+4+l.length);const d=new ArrayBuffer(h),f=new Uint8Array(d),g=new DataView(d);let y=0;g.setUint8(y++,t.guessFallback?1:0),g.setUint32(y,0),y+=4,a=0;for(const v of Ta.strings){const A=i[v],E=A.length;a+=4+E,g.setUint32(y,E),f.set(A,y+4),y+=4+E}return g.setUint32(y-a-4,a),t.style&&(g.setUint32(y,o.length),f.set(o,y+4),y+=4+o.length,g.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length),kt(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){kt(t<Ta.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),i=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const a=this.#e.getUint32(t),o=this.#i.decode(new Uint8Array(this.#t,t+4,a));return{style:i,weight:o}}}class qt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#s;#a;#o;constructor({data:t,extra:e}){this.#s=t,this.#a=new TextDecoder,this.#o=new DataView(this.#s),e&&Object.assign(this,e)}#c(t){kt(t<qt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,a=this.#o.getUint8(e)>>i&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return kt(t<qt.numbers.length,"Invalid number index"),this.#o.getFloat64(qt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=qt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<4;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=qt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<6;a++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=qt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<3;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){kt(t<qt.strings.length,"Invalid string index");let e=qt.#r+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const i=this.#o.getUint32(e),a=new Uint8Array(i);return a.set(new Uint8Array(this.#s,e+4,i)),this.#a.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=qt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#s,t+4,o)}clearData(){let t=qt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#s,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=qt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#s,t+4,a)),new wa(o.buffer)}get systemFontInfo(){let t=qt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#s,t+4,i)),new Ta(a.buffer)}static write(t){const e=t.systemFontInfo?Ta.write(t.systemFontInfo):null,i=t.cssFontInfo?wa.write(t.cssFontInfo):null,a=new TextEncoder,o={};let l=0;for(const S of qt.strings)o[S]=a.encode(t[S]),l+=4+o[S].length;const h=qt.#r+4+l+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(h),f=new Uint8Array(d),g=new DataView(d);let y=0;const v=qt.bools.length;let A=0,E=0;for(let S=0;S<v;S++){const _=t[qt.bools[S]];A|=(_===void 0?0:_?2:1)<<E,E+=2,(E===8||S===v-1)&&(g.setUint8(y++,A),A=0,E=0)}kt(y===qt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of qt.numbers)g.setFloat64(y,t[S]),y+=8;if(kt(y===qt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(y++,4);for(const S of t.bbox)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=8;if(kt(y===qt.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(y++,6);for(const S of t.fontMatrix)g.setFloat64(y,S,!0),y+=8}else g.setUint8(y++,0),y+=48;if(kt(y===qt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(y++,1);for(const S of t.defaultVMetrics)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=6;kt(y===qt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(qt.#r,0),y+=4;for(const S of qt.strings){const _=o[S],T=_.length;g.setUint32(y,T),f.set(_,y+4),y+=4+T}if(g.setUint32(qt.#r,y-qt.#r-4),!e)g.setUint32(y,0),y+=4;else{const S=e.byteLength;g.setUint32(y,S),kt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),y+4),y+=4+S}if(!i)g.setUint32(y,0),y+=4;else{const S=i.byteLength;g.setUint32(y,S),kt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(i),y+4),y+=4+S}return t.data===void 0?(g.setUint32(y,0),y+=4):(g.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),kt(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class Ki{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class Cw{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const ba=Symbol("INTERNAL");class xw{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:i,usage:a,rbGroups:o}){this.#t=!!(t&on.DISPLAY),this.#e=!!(t&on.PRINT),this.name=e,this.intent=i,this.usage=a,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==ba&&$t("Internal method `_setVisible` called."),this.#i=i,this.#n=e}}class Rw{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=on.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const i of t.groups)this.#e.set(i.id,new xw(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(ba,!1);for(const i of t.on)this.#e.get(i)._setVisible(ba,!0);for(const i of t.off)this.#e.get(i)._setVisible(ba,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let a=1;a<e;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return St(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return sc("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(St(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return St(`Unknown optional content policy ${t.policy}.`),!0}return St(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const a=this.#e.get(t);if(!a){St(`Optional content group not found: ${t}`);return}if(i&&e&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(ba,!1,!0);a._setVisible(ba,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const o=this.#e.get(a);if(o)switch(i){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Mb;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class Mw{constructor(t,{disableRange:e=!1,disableStream:i=!1}){kt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:l,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=h,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(i),!0)});kt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){kt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Dw(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Ow(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class Dw{constructor(t,e,i=!1,a=null){this._stream=t,this._done=i||!1,this._filename=rc(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ow{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Lw(c){let t=!0,e=i("filename\\*","i").exec(c);if(e){e=e[1];let g=h(e);return g=unescape(g),g=d(g),g=f(g),o(g)}if(e=l(c),e){const g=f(e);return o(g)}if(e=i("filename","i").exec(c),e){e=e[1];let g=h(e);return g=f(g),o(g)}function i(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(g,{fatal:!0}),A=eo(y);y=v.decode(A),t=!1}catch{}}return y}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function l(g){const y=[];let v;const A=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=A.exec(g))!==null;){let[,S,_,T]=v;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[_,T]}const E=[];for(let S=0;S<y.length&&S in y;++S){let[_,T]=y[S];T=h(T),_&&(T=unescape(T),S===0&&(T=d(T))),E.push(T)}return E.join("")}function h(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let v=0;v<y.length;++v){const A=y[v].indexOf('"');A!==-1&&(y[v]=y[v].slice(0,A),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const v=g.slice(0,y),E=g.slice(y+1).replace(/^[^']*'/,"");return a(v,E)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,A,E){if(A==="q"||A==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,_){return String.fromCharCode(parseInt(_,16))}),a(v,E);try{E=atob(E)}catch{}return a(v,E)})}return""}function zb(c,t){const e=new Headers;if(!c||!t||typeof t!="object")return e;for(const i in t){const a=t[i];a!==void 0&&e.append(i,a)}return e}function oc(c){return URL.parse(c)?.origin??null}function Fb({responseHeaders:c,isHttp:t,rangeChunkSize:e,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(c.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||i||!t||c.get("Accept-Ranges")!=="bytes"||(c.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function Ub(c){const t=c.get("Content-Disposition");if(t){let e=Lw(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(rc(e))return e}return null}function ro(c,t){return new Yr(`Unexpected server response (${c}) while retrieving PDF "${t}".`,c,c===404||c===0&&t.startsWith("file:"))}function Ib(c){return c===200||c===206}function Hb(c,t,e){return{method:"GET",headers:c,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function jb(c){return c instanceof Uint8Array?c.buffer:c instanceof ArrayBuffer?c:(St(`getArrayBuffer - unexpected data format: ${c}`),new Uint8Array(c).buffer)}class Nw{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=zb(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return kt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new kw(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Bw(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class kw{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),a=e.url;fetch(a,Hb(i,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=oc(o.url),!Ib(o.status))throw ro(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:h,suggestedLength:d}=Fb({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=Ub(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new gi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:jb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Bw{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${i-1}`);const l=a.url;fetch(l,Hb(o,this._withCredentials,this._abortController)).then(h=>{const d=oc(h.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!Ib(h.status))throw ro(h.status,l);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:jb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const ed=200,nd=206;function Pw(c){const t=c.response;return typeof t!="string"?t:eo(t).buffer}class zw{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=zb(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,a=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=nd):a.expectedStatus=ed,e.responseType="arraybuffer",kt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const a=i.xhr;if(a.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){i.onError(a.status);return}const o=a.status||ed;if(!(o===ed&&i.expectedStatus===nd)&&o!==i.expectedStatus){i.onError(a.status);return}const h=Pw(a);if(o===nd){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?i.onDone({begin:parseInt(f[1],10),chunk:h}):(St('Missing or invalid "Content-Range" header.'),i.onError(0))}else h?i.onDone({begin:0,chunk:h}):i.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Fw{constructor(t){this._source=t,this._manager=new zw(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return kt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Uw(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new Iw(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Uw{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=oc(e.responseURL);const i=e.getAllResponseHeaders(),a=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...f]=h.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=Fb({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=Ub(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=ro(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Iw{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=oc(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=ro(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Hw=/^[a-z][a-z0-9\-+.]+:/i;function jw(c){if(Hw.test(c))return new URL(c);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(c))}class Gw{constructor(t){this.source=t,this.url=jw(t.url),kt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return kt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Vw(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new qw(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Vw{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=ro(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new gi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class qw{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const kr=Symbol("INITIAL_DATA");class Gb{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:kr}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const i=this.#t[t];if(!i||i.data===kr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==kr}delete(t){const e=this.#t[t];return!e||e.data===kr?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==kr&&(yield[t,e])}}}const Xw=1e5,cv=30;let Kr=class wn{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#p=null;#u=[];#g=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#T=new WeakMap;static#_=null;static#A=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=i.scale*Ln.pixelRatio,this.#d=i.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:h}=i.rawDims;this.#y=[1,0,0,-1,-l,h+o],this.#o=a,this.#a=o,wn.#M(),Wi(e,i),this.#t.promise.finally(()=>{wn.#A.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Se.platform;return Tt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#x(e.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),wn.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*Ln.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,Wi(this.#l,{rotation:a})),i!==this.#h){e?.(),this.#h=i;const o={div:null,properties:null,ctx:wn.#D(this.#r)};for(const l of this.#u)o.properties=this.#g.get(l),o.div=l,this.#w(o)}}cancel(){const t=new gi("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#x(t){if(this.#i)return;this.#s.ctx??=wn.#D(this.#r);const e=this.#u,i=this.#m;for(const a of t){if(e.length>Xw){St("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(a.str),this.#E(a)}}#E(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=nt.transform(this.#y,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let h=this.#n&&l.fontSubstitution||l.fontFamily;h=wn.fontFamilyMap.get(h)||h;const d=Math.hypot(a[2],a[3]),f=d*wn.#z(h,l,this.#r);let g,y;o===0?(g=a[4],y=a[5]-f):(g=a[4]+f*Math.sin(o),y=a[5]-f*Math.cos(o));const v="calc(var(--total-scale-factor) *",A=e.style;this.#e===this.#l?(A.left=`${(100*g/this.#o).toFixed(2)}%`,A.top=`${(100*y/this.#a).toFixed(2)}%`):(A.left=`${v}${g.toFixed(2)}px)`,A.top=`${v}${y.toFixed(2)}px)`),A.fontSize=`${v}${(wn.#_*d).toFixed(2)}px)`,A.fontFamily=h,i.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(i.angle=o*(180/Math.PI));let E=!1;if(t.str.length>1)E=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);S!==_&&Math.max(S,_)/Math.min(S,_)>1.5&&(E=!0)}if(E&&(i.canvasWidth=l.vertical?t.height:t.width),this.#g.set(e,i),this.#s.div=e,this.#s.properties=i,this.#w(this.#s),i.hasText&&this.#e.append(e),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#w(t){const{div:e,properties:i,ctx:a}=t,{style:o}=e;let l="";if(wn.#_>1&&(l=`scale(${1/wn.#_})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:h}=o,{canvasWidth:d,fontSize:f}=i;wn.#R(a,f*this.#h,h);const{width:g}=a.measureText(e.textContent);g>0&&(l=`scaleX(${d*this.#h/g}) ${l}`)}i.angle!==0&&(l=`rotate(${i.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#A.size>0)){this.#b.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#D(t=null){let e=this.#v.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#T.set(e,{size:0,family:""})}return e}static#R(t,e,i){const a=this.#T.get(t);e===a.size&&i===a.family||(t.font=`${e}px ${i}`,a.size=e,a.family=i)}static#M(){if(this.#_!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#_=t.getBoundingClientRect().height,t.remove()}static#z(t,e,i){const a=this.#b.get(t);if(a)return a;const o=this.#D(i);o.canvas.width=o.canvas.height=cv,this.#R(o,cv,t);const l=o.measureText(""),h=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return h?f=h/(h+d):(Se.platform.isFirefox&&St("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#b.set(t,f),f}};const Yw=100;function $d(c={}){typeof c=="string"||c instanceof URL?c={url:c}:(c instanceof ArrayBuffer||ArrayBuffer.isView(c))&&(c={data:c});const t=new Kd,{docId:e}=t,i=c.url?ew(c.url):null,a=c.data?nw(c.data):null,o=c.httpHeaders||null,l=c.withCredentials===!0,h=c.password??null,d=c.range instanceof Wd?c.range:null,f=Number.isInteger(c.rangeChunkSize)&&c.rangeChunkSize>0?c.rangeChunkSize:2**16;let g=c.worker instanceof Da?c.worker:null;const y=c.verbosity,v=typeof c.docBaseUrl=="string"&&!io(c.docBaseUrl)?c.docBaseUrl:null,A=Dl(c.cMapUrl),E=c.cMapPacked!==!1,S=c.CMapReaderFactory||(Fe?cw:Ky),_=Dl(c.iccUrl),T=Dl(c.standardFontDataUrl),R=c.StandardFontDataFactory||(Fe?uw:Wy),C=Dl(c.wasmUrl),D=c.WasmFactory||(Fe?hw:Qy),N=c.stopAtErrors!==!0,B=Number.isInteger(c.maxImageSize)&&c.maxImageSize>-1?c.maxImageSize:-1,P=c.isEvalSupported!==!1,j=typeof c.isOffscreenCanvasSupported=="boolean"?c.isOffscreenCanvasSupported:!Fe,X=typeof c.isImageDecoderSupported=="boolean"?c.isImageDecoderSupported:!Fe&&(Se.platform.isFirefox||!globalThis.chrome),Z=Number.isInteger(c.canvasMaxAreaInBytes)?c.canvasMaxAreaInBytes:-1,J=typeof c.disableFontFace=="boolean"?c.disableFontFace:Fe,lt=c.fontExtraProperties===!0,ct=c.enableXfa===!0,at=c.ownerDocument||globalThis.document,pt=c.disableRange===!0,L=c.disableStream===!0,H=c.disableAutoFetch===!0,Q=c.pdfBug===!0,ut=c.CanvasFactory||(Fe?lw:aw),yt=c.FilterFactory||(Fe?ow:rw),O=c.enableHWA===!0,G=c.useWasm!==!1,K=d?d.length:c.length??NaN,tt=typeof c.useSystemFonts=="boolean"?c.useSystemFonts:!Fe&&!J,it=typeof c.useWorkerFetch=="boolean"?c.useWorkerFetch:!!(S===Ky&&R===Wy&&D===Qy&&A&&T&&C&&Fr(A,document.baseURI)&&Fr(T,document.baseURI)&&Fr(C,document.baseURI)),ht=null;P_(y);const ot={canvasFactory:new ut({ownerDocument:at,enableHWA:O}),filterFactory:new yt({docId:e,ownerDocument:at}),cMapReaderFactory:it?null:new S({baseUrl:A,isCompressed:E}),standardFontDataFactory:it?null:new R({baseUrl:T}),wasmFactory:it?null:new D({baseUrl:C})};g||(g=Da.create({verbosity:y,port:Ki.workerPort}),t._worker=g);const Ht={docId:e,apiVersion:"5.4.296",data:a,password:h,disableAutoFetch:H,rangeChunkSize:f,length:K,docBaseUrl:v,enableXfa:ct,evaluatorOptions:{maxImageSize:B,disableFontFace:J,ignoreErrors:N,isEvalSupported:P,isOffscreenCanvasSupported:j,isImageDecoderSupported:X,canvasMaxAreaInBytes:Z,fontExtraProperties:lt,useSystemFonts:tt,useWasm:G,useWorkerFetch:it,cMapUrl:A,iccUrl:_,standardFontDataUrl:T,wasmUrl:C}},_t={ownerDocument:at,pdfBug:Q,styleElement:ht,loadingParams:{disableAutoFetch:H,enableXfa:ct}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Bt=g.messageHandler.sendWithPromise("GetDocRequest",Ht,a?[a.buffer]:null);let Oe;if(d)Oe=new Mw(d,{disableRange:pt,disableStream:L});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Le=Fr(i)?Nw:Fe?Gw:Fw;Oe=new Le({url:i,length:K,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:pt,disableStream:L})}return Bt.then(Le=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Ct=new Ur(e,Le,g.port),xt=new Ww(Ct,t,Oe,_t,ot,O);t._transport=xt,Ct.send("Ready",null)})}).catch(t._capability.reject),t}class Kd{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Kd.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Wd=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,i=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#r)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#n)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){$t("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class $w{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Tt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Kw{#t=!1;constructor(t,e,i,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=a?new jy:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new Gb,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}={}){return new no({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Tt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:a="display",annotationMode:o=qn.ENABLE,transform:l=null,background:h=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:v=!1,recordOperations:A=!1,operationsFilter:E=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(a,o,y,v),{renderingIntent:_,cacheKey:T}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(_);let R=this._intentStates.get(T);R||(R=Object.create(null),this._intentStates.set(T,R)),R.streamReaderCancelTimeout&&(clearTimeout(R.streamReaderCancelTimeout),R.streamReaderCancelTimeout=null);const C=!!(_&on.PRINT);R.displayReadyCapability||(R.displayReadyCapability=Promise.withResolvers(),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const D=!!(this._pdfBug&&globalThis.StepperManager?.enabled),N=!this.recordedBBoxes&&(A||D),B=X=>{if(R.renderTasks.delete(P),N){const Z=P.gfx?.dependencyTracker.take();Z&&(P.stepper&&P.stepper.setOperatorBBoxes(Z,P.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=Z))}C&&(this.#t=!0),this.#e(),X?(P.capability.reject(X),this._abortOperatorList({intentState:R,reason:X instanceof Error?X:new Error(X)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new Ea({callback:B,params:{canvas:e,canvasContext:t,dependencyTracker:N?new fw(e,R.operatorList.length,D):null,viewport:i,transform:l,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:R.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:E});(R.renderTasks||=new Set).add(P);const j=P.task;return Promise.all([R.displayReadyCapability.promise,d]).then(([X,Z])=>{if(this.destroyed){B();return}if(this._stats?.time("Rendering"),!(Z.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:X,optionalContentConfig:Z}),P.operatorListChanged()}).catch(B),j}getOperatorList({intent:t="display",annotationMode:e=qn.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,e,i,a,!0);let h=this._intentStates.get(l.cacheKey);h||(h=Object.create(null),this._intentStates.set(l.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||=new Set).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>$r.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,a){function o(){l.read().then(function({value:d,done:f}){if(f){i(h);return}h.lang??=d.lang,Object.assign(h.styles,d.styles),h.items.push(...d.items),o()},a)}const l=e.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new jy),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,a=t.length;i<a;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:a}){const{map:o,transfer:l}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:a},l).getReader(),f=this._intentStates.get(e);f.streamReader=d;const g=()=>{d.read().then(({value:y,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),g())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof ac){let a=Yw;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new gi(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Xi,Dn,hi,As,Kl,Ss,Es,Ue,Fl,Vb,qb,Ir,Ra,Ul;const te=class te{constructor({name:t=null,port:e=null,verbosity:i=z_()}={}){Fn(this,Ue);Fn(this,Xi,Promise.withResolvers());Fn(this,Dn,null);Fn(this,hi,null);Fn(this,As,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(Jt(te,Es).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Jt(te,Es).set(e,this),Un(this,Ue,Vb).call(this,e)}else Un(this,Ue,qb).call(this)}get promise(){return Jt(this,Xi).promise}get port(){return Jt(this,hi)}get messageHandler(){return Jt(this,Dn)}destroy(){this.destroyed=!0,Jt(this,As)?.terminate(),Ye(this,As,null),Jt(te,Es).delete(Jt(this,hi)),Ye(this,hi,null),Jt(this,Dn)?.destroy(),Ye(this,Dn,null)}static create(t){const e=Jt(this,Es).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new te(t)}static get workerSrc(){if(Ki.workerSrc)return Ki.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Tt(this,"_setupFakeWorkerGlobal",(async()=>Jt(this,Ra,Ul)?Jt(this,Ra,Ul):(await import(this.workerSrc)).WorkerMessageHandler)())}};Xi=new WeakMap,Dn=new WeakMap,hi=new WeakMap,As=new WeakMap,Kl=new WeakMap,Ss=new WeakMap,Es=new WeakMap,Ue=new WeakSet,Fl=function(){Jt(this,Xi).resolve(),Jt(this,Dn).send("configure",{verbosity:this.verbosity})},Vb=function(t){Ye(this,hi,t),Ye(this,Dn,new Ur("main","worker",t)),Jt(this,Dn).on("ready",()=>{}),Un(this,Ue,Fl).call(this)},qb=function(){if(Jt(te,Ss)||Jt(te,Ra,Ul)){Un(this,Ue,Ir).call(this);return}let{workerSrc:t}=te;try{te._isSameOrigin(window.location,t)||(t=te._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Ur("main","worker",e),a=()=>{o.abort(),i.destroy(),e.terminate(),this.destroyed?Jt(this,Xi).reject(new Error("Worker was destroyed")):Un(this,Ue,Ir).call(this)},o=new AbortController;e.addEventListener("error",()=>{Jt(this,As)||a()},{signal:o.signal}),i.on("test",h=>{if(o.abort(),this.destroyed||!h){a();return}Ye(this,Dn,i),Ye(this,hi,e),Ye(this,As,e),Un(this,Ue,Fl).call(this)}),i.on("ready",h=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{Un(this,Ue,Ir).call(this)}});const l=()=>{const h=new Uint8Array;i.send("test",h,[h.buffer])};l();return}catch{sc("The worker has been disabled.")}Un(this,Ue,Ir).call(this)},Ir=function(){Jt(te,Ss)||(St("Setting up fake worker."),Ye(te,Ss,!0)),te._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Jt(this,Xi).reject(new Error("Worker was destroyed"));return}const e=new sw;Ye(this,hi,e);const i=`fake${ny(te,Kl)._++}`,a=new Ur(i+"_worker",i,e);t.setup(a,e),Ye(this,Dn,new Ur(i,i+"_worker",e)),Un(this,Ue,Fl).call(this)}).catch(t=>{Jt(this,Xi).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Ra=new WeakSet,Ul=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Fn(te,Ra),Fn(te,Kl,0),Fn(te,Ss,!1),Fn(te,Es,new WeakMap),Fe&&(Ye(te,Ss,!0),Ki.workerSrc||="./pdf.worker.mjs"),te._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const a=new URL(e,i);return i.origin===a.origin},te._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},te.fromPort=t=>{if(X_("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return te.create(t)};let Da=te;class Ww{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,e,i,a,o,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Gb,this.fontLoader=new J_({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#s(t,e=null){const i=this.#t.get(t);if(i)return i;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return Tt(this,"annotationStorage",new Vd)}getRenderingIntent(t,e=qn.ENABLE,i=null,a=!1,o=!1){let l=on.DISPLAY,h=gd;switch(t){case"any":l=on.ANY;break;case"display":break;case"print":l=on.PRINT;break;default:St(`getRenderingIntent - invalid intent: ${t}`)}const d=l&on.PRINT&&i instanceof Db?i:this.annotationStorage;switch(e){case qn.DISABLE:l+=on.ANNOTATIONS_DISABLE;break;case qn.ENABLE:break;case qn.ENABLE_FORMS:l+=on.ANNOTATIONS_FORMS;break;case qn.ENABLE_STORAGE:l+=on.ANNOTATIONS_STORAGE,h=d.serializable;break;default:St(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(l+=on.IS_EDITING),o&&(l+=on.OPLIST);const{ids:f,hash:g}=d.modifiedIds,y=[l,h.hash,g];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Kr.cleanup(),this._networkStream?.cancelAllRequests(new gi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,a)=>{kt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}kt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this._fullReader;return(!a||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=h=>{e.onProgress?.({loaded:h.loaded,total:h.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(i,a)=>{kt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:h}){if(h){a.close();return}kt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new $w(i,this))}),t.on("DocException",i=>{e._capability.reject($e(i))}),t.on("PasswordRequest",i=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw $e(i);const a=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};e.onPassword(a,i.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,a,o])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in o){const g=o.error;St(`Error during font loading: ${g}`),this.commonObjs.resolve(i,g);break}const l=new qt(o),h=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,y)=>globalThis.FontInspector.fontAdded(g,y):null,d=new tw(l,h,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=o;kt(f,"The imageRef must be defined.");for(const g of this.#e.values())for(const[,y]of g.objs)if(y?.ref===f)return y.dataLen?(this.commonObjs.resolve(i,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([i,a,o,l])=>{if(this.destroyed)return;const h=this.#e.get(a);if(!h.objs.has(i)){if(h._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":h.objs.resolve(i,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&St("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#i.get(e);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const l=new Kw(e,o,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#i.set(e,a),a}getPageIndex(t){return md(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new Rw(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new Cw(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Kr.cleanup()}}cachedPageNumber(t){if(!md(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class Qw{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Ea{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:h,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:v=null,enableHWA:A=!1,operationsFilter:E=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Qw(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=A,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=E}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Ea.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ea.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:a,background:o,dependencyTracker:l}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new _a(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Ea.#e.delete(this._canvas),t||=new ac(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ea.#e.delete(this._canvas),this.callback())))}}const Qd="5.4.296",Xb="f56dc8601";class ln{#t=null;#e=null;#i;#n=null;#r=!1;#s=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return Tt(this,"_keyboardManager",new so([[["Escape","mac+Escape"],ln.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ln.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ln.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ln.prototype._moveToPrevious],[["Home","mac+Home"],ln.prototype._moveToBeginning],[["End","mac+End"],ln.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",ln.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,t.append(i),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",un,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[i,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=i,o.setAttribute("data-l10n-id",ln.#d[i]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.ariaSelected=a===this.#i,o.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Lt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#g){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#g){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#g){this.#p(t);return}this.#n.lastChild?.focus()}#m(t){ln._keyboardManager.exec(this,t)}#p(t){if(this.#g){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#g){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Wr{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,Wr.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:i}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=i||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Wr.#n[t]),a.addEventListener("input",()=>{this.#i.updateParams(e,a.value)},{signal:this.#i._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function uv(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function Br(c){return Math.max(0,Math.min(255,255*c))}class hv{static CMYK_G([t,e,i,a]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Br(t),[t,t,t]}static G_HTML([t]){const e=uv(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Br)}static RGB_HTML(t){return`#${t.map(uv).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,i+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,i,a]){return[Br(1-Math.min(1,t+a)),Br(1-Math.min(1,i+a)),Br(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const a=1-t,o=1-e,l=1-i,h=Math.min(a,o,l);return["CMYK",a,o,l,h]}}class Zw{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){$t("Abstract method `_createSVG` called.")}}class Qr extends Zw{_createSVG(t){return document.createElementNS(ui,t)}}const Jw=9,ws=new WeakSet,tT=new Date().getTimezoneOffset()*60*1e3;class dv{static create(t){switch(t.data.annotationType){case le.LINK:return new Zd(t);case le.TEXT:return new nT(t);case le.WIDGET:switch(t.data.fieldType){case"Tx":return new iT(t);case"Btn":return t.data.radioButton?new Yb(t):t.data.checkBox?new aT(t):new rT(t);case"Ch":return new oT(t);case"Sig":return new sT(t)}return new Ms(t);case le.POPUP:return new bd(t);case le.FREETEXT:return new $b(t);case le.LINE:return new cT(t);case le.SQUARE:return new uT(t);case le.CIRCLE:return new hT(t);case le.POLYLINE:return new Kb(t);case le.CARET:return new fT(t);case le.INK:return new Jd(t);case le.POLYGON:return new dT(t);case le.HIGHLIGHT:return new Wb(t);case le.UNDERLINE:return new pT(t);case le.SQUIGGLY:return new gT(t);case le.STRIKEOUT:return new mT(t);case le.STAMP:return new Qb(t);case le.FILEATTACHMENT:return new yT(t);default:return new ie(t)}}}class ie{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ie._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:a}=this.data;let o=-1/0,l=-1/0;if(e?.length>=8){for(let h=0;h<e.length;h+=8)e[h+1]>l?(l=e[h+1],o=e[h+2]):e[h+1]===l&&(o=Math.max(o,e[h+2]));return[o,l]}if(i?.length>=1){for(const h of i)for(let d=0,f=h.length;d<f;d+=2)h[d+1]>l?(l=h[d+1],o=h[d]):h[d+1]===l&&(o=Math.max(o,h[d]));if(o!==1/0)return[o,l]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/i,t[1]=100*(t[1]-l)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Xr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${Xr}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#n(e);let a=this.#i?.popup||this.popup;!a&&i?.text&&(this._createPopup(i),a=this.#i.popup),a&&(a.updateEdited(t),i?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:h,pageY:d}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-h)/o}%`,e.top=`${100*(l-t[3]+d)/l}%`,a===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:i,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof Ms)&&!(this instanceof Zd)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof bd){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:h,height:d}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(S>0||_>0){const R=`calc(${S}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;l.borderRadius=R}else if(this instanceof Yb){const R=`calc(${h}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=R}switch(e.borderStyle.style){case va.SOLID:l.borderStyle="solid";break;case va.DASHED:l.borderStyle="dashed";break;case va.BEVELED:St("Unimplemented border style: beveled");break;case va.INSET:St("Unimplemented border style: inset");break;case va.UNDERLINE:l.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(this.#e=!0,l.borderColor=nt.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):l.borderWidth=0}const f=nt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:g,pageHeight:y,pageX:v,pageY:A}=a.rawDims;l.left=`${100*(f[0]-v)/g}%`,l.top=`${100*(f[1]-A)/y}%`;const{rotation:E}=e;return e.hasOwnCanvas||E===0?(l.width=`${100*h/g}%`,l.height=`${100*d/y}%`):this.setRotation(E,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/i}%`,e.style.height=`${100*l/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,a)=>{const o=a.detail[e],l=o[0],h=o.slice(1);a.target.style[i]=hv[`${l}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[i]:hv[`${l}_rgb`](h)})};return Tt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||i[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[a,o]of Object.entries(e)){const l=i[a];if(l){const h={detail:{[a]:o},target:t};l(h),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,a,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,_,T,R]=t.subarray(2,6);if(a===S&&o===_&&e===T&&i===R)return}const{style:l}=this.container;let h;if(this.#e){const{borderColor:S,borderWidth:_}=l;l.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const d=a-e,f=o-i,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const v=g.createElement("defs");y.append(v);const A=g.createElement("clipPath"),E=`clippath_${this.data.id}`;A.setAttribute("id",E),A.setAttribute("clipPathUnits","objectBoundingBox"),v.append(A);for(let S=2,_=t.length;S<_;S+=8){const T=t[S],R=t[S+1],C=t[S+2],D=t[S+3],N=g.createElement("rect"),B=(C-e)/d,P=(o-R)/f,j=(T-C)/d,X=(R-D)/f;N.setAttribute("x",B),N.setAttribute("y",P),N.setAttribute("width",j),N.setAttribute("height",X),A.append(N),h?.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${P}" width="${j}" height="${X}"/>`)}this.#e&&(h.push("</g></svg>')"),l.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${E})`}_createPopup(t=null){const{data:e}=this;let i,a;t?(i={str:t.text},a=t.date):(i=e.contentsObj,a=e.modificationDate);const o=this.#i=new bd({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){$t("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:h}of a){if(o===-1||l===e)continue;const d=typeof h=="string"?h:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!ws.has(f)){St(`_getElementsByName - element not allowed: ${l}`);continue}i.push({id:l,exportValue:d,domElement:f})}return i}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==e&&ws.has(a)&&i.push({id:l,exportValue:o,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class eT extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class Zd extends ie{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#i(i,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#i(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const o=i.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){St('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:a,refs:o,include:l}=e,h=[];if(a.length!==0||o.length!==0){const g=new Set(o);for(const y of a){const v=this._fieldObjects[y]||[];for(const{id:A}of v)g.add(A)}for(const y of Object.values(this._fieldObjects))for(const v of y)g.has(v.id)===l&&h.push(v)}else for(const g of Object.values(this._fieldObjects))h.push(...g);const d=this.annotationStorage,f=[];for(const g of h){const{id:y}=g;switch(f.push(y),g.type){case"text":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;d.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";d.setValue(y,{value:A});break}default:continue}const v=document.querySelector(`[data-element-id="${y}"]`);if(v){if(!ws.has(v)){St(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class nT extends ie{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ms extends ie{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Se.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,a,o){i.includes("mouse")?t.addEventListener(i,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(i,l=>{if(i==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,e,i,a){for(const[o,l]of i)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":nt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||Jw,o=t.style;let l;const h=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h),g=Math.round(f/(Kh*a))||1,y=f/g;l=Math.min(a,d(y/Kh))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h);l=Math.min(a,d(f/Kh))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=nt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class iT extends Ms{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=i),o.setValue(l.id,{[a]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let h=a.formattedValue||this.data.textContent?.join(`
`)||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=h??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",h??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),ws.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:y}=this.data,v=!!g&&this.enableScripting;f&&(i.title=f),this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",E=>{t.setValue(e,{value:E.target.value}),this.setPropertyOnSiblings(i,"value",E.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",E=>{const S=this.data.defaultFieldValue??"";i.value=d.userValue=S,d.formattedValue=null});let A=E=>{const{formattedValue:S}=d;S!=null&&(E.target.value=S),E.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",S=>{if(d.focused)return;const{target:_}=S;if(v&&(_.type=g,y&&(_.step=y)),d.userValue){const T=d.userValue;if(v)if(g==="time"){const R=new Date(T),C=[R.getHours(),R.getMinutes(),R.getSeconds()];_.value=C.map(D=>D.toString().padStart(2,"0")).join(":")}else _.value=new Date(T-tT).toISOString().split(g==="date"?"T":".",1)[0];else _.value=T}d.lastCommittedValue=_.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const _={value(T){d.userValue=T.detail.value??"",v||t.setValue(e,{value:d.userValue.toString()}),T.target.value=d.userValue},formattedValue(T){const{formattedValue:R}=T.detail;d.formattedValue=R,R!=null&&T.target!==document.activeElement&&(T.target.value=R);const C={formattedValue:R};v&&(C.value=R),t.setValue(e,C)},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{const{charLimit:R}=T.detail,{target:C}=T;if(R===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",R);let D=d.userValue;!D||D.length<=R||(D=D.slice(0,R),C.value=d.userValue=D,t.setValue(e,{value:D}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(_,S)}),i.addEventListener("keydown",S=>{d.commitKey=1;let _=-1;if(S.key==="Escape"?_=0:S.key==="Enter"&&!this.data.multiLine?_=2:S.key==="Tab"&&(d.commitKey=3),_===-1)return;const{value:T}=S.target;d.lastCommittedValue!==T&&(d.lastCommittedValue=T,d.userValue=T,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:_,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const E=A;A=null,i.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:_}=S;let{value:T}=_;if(v){if(T&&g==="time"){const R=T.split(":").map(C=>parseInt(C,10));T=new Date(2e3,0,1,R[0],R[1],R[2]||0).valueOf(),_.step=""}else T.includes("T")||(T=`${T}T00:00`),T=new Date(T).valueOf();_.type="text"}d.userValue=T,d.lastCommittedValue!==T&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),E(S)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:_,target:T}=S,{value:R,selectionStart:C,selectionEnd:D}=T;let N=C,B=D;switch(S.inputType){case"deleteWordBackward":{const P=R.substring(0,C).match(/\w*[^\w]*$/);P&&(N-=P[0].length);break}case"deleteWordForward":{const P=R.substring(C).match(/^[^\w]*\w*/);P&&(B+=P[0].length);break}case"deleteContentBackward":C===D&&(N-=1);break;case"deleteContentForward":C===D&&(B+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,change:_||"",willCommit:!1,selStart:N,selEnd:B}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&i.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class sT extends Ms{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class aT extends Ms{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return ws.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const f of this._getElementsByName(h,i)){const g=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(i,{value:d})}),o.addEventListener("resetform",l=>{const h=e.defaultFieldValue||"Off";l.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const h={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Yb extends Ms{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(i,{value:a})),a)for(const l of this._getElementsByName(e.fieldName,i))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(ws.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const f of this._getElementsByName(h,i))t.setValue(f.id,{value:!1});t.setValue(i,{value:d})}),o.addEventListener("resetform",l=>{const h=e.defaultFieldValue;l.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",h=>{const d={value:f=>{const g=l===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const v=g&&y.id===i;y.domElement&&(y.domElement.checked=v),t.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class rT extends Zd{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class oT extends Ms{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");ws.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const v of a.options)v.selected=v.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,i.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),l=()=>{g.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const h=g=>{const y=g?"value":"textContent",{options:v,multiple:A}=a;return A?Array.prototype.filter.call(v,E=>E.selected).map(E=>E[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let d=h(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const y={value(v){l?.();const A=v.detail.value,E=new Set(Array.isArray(A)?A:[A]);for(const S of a.options)S.selected=E.has(S.value);t.setValue(e,{value:h(!0)}),d=h(!1)},multipleSelection(v){a.multiple=!0},remove(v){const A=a.options,E=v.detail.remove;A[E].selected=!1,a.remove(E),A.length>0&&Array.prototype.findIndex.call(A,_=>_.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:h(!0),items:f(v)}),d=h(!1)},clear(v){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=h(!1)},insert(v){const{index:A,displayValue:E,exportValue:S}=v.detail.insert,_=a.children[A],T=document.createElement("option");T.textContent=E,T.value=S,_?_.before(T):a.append(T),t.setValue(e,{value:h(!0),items:f(v)}),d=h(!1)},items(v){const{items:A}=v.detail;for(;a.length!==0;)a.remove(0);for(const E of A){const{displayValue:S,exportValue:_}=E,T=document.createElement("option");T.textContent=S,T.value=_,a.append(T)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:h(!0),items:f(v)}),d=h(!1)},indices(v){const A=new Set(v.detail.indices);for(const E of v.target.options)E.selected=A.has(E.index);t.setValue(e,{value:h(!0)}),d=h(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,g)}),a.addEventListener("input",g=>{const y=h(!0),v=h(!1);t.setValue(e,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class bd extends ie{constructor(t){const{data:e,elements:i,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&ie._hasPopupData(e)}),this.elements=i,o&&ie._hasPopupData(e)){const l=this.popup=this.#t();for(const h of i)h.popup=l}else this.popup=null}#t(){return new lT({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),i=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${Ud}${a}`).join(",")),this.container}}class lT{#t=null;#e=this.#V.bind(this);#i=this.#U.bind(this);#n=this.#N.bind(this);#r=this.#S.bind(this);#s=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#p=null;#u=null;#g=null;#y=null;#b=null;#v=null;#T=null;#_=null;#A=null;#x=!1;#E=null;#w=null;constructor({container:t,color:e,elements:i,titleObj:a,modificationDate:o,contentsObj:l,richText:h,parent:d,rect:f,parentRect:g,open:y,commentManager:v=null}){this.#a=t,this.#_=a,this.#o=l,this.#T=h,this.#d=d,this.#s=e,this.#v=f,this.#h=g,this.#l=i,this.#t=v,this.#E=i[0],this.#c=Vl.toDateObject(o),this.trigger=i.flatMap(A=>A.getElementsToTriggerPopup()),v?this.renderCommentButton():(this.#D(),this.#a.hidden=!0,y&&this.#S())}#D(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#g||(this.#y||this.#R(),!this.#y))return;const{signal:t}=this.#p=new AbortController,e=!!this.#E.extraPopupElement,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#g=this.#E.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",i,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#g=document.createElement("button");l.className="annotationCommentButton";const h=this.#E.container;l.style.zIndex=h.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#z(),this.#M(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",i,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),h.after(l)}}#M(){if(this.#E.extraPopupElement&&!this.#E.editor)return;this.renderCommentButton();const[t,e]=this.#y,{style:i}=this.#g;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#z(){this.#E.extraPopupElement||(this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#E.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:a,modificationDate:o}=this.#E.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#g}get comment(){return this.#w||=this.#E.commentText,this.#w}set comment(t){t!==this.comment&&(this.#E.commentText=this.#w=t)}get parentBoundingClientRect(){return this.#E.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#g&&(this.#g.classList.toggle("selected",t),this.#g.ariaExpanded=e)}setSelectedCommentButton(t){this.#g.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:t,y:e,height:i}=this.#g.getBoundingClientRect(),{x:a,y:o,width:l,height:h}=this.#E.layer.getBoundingClientRect();return[(t-a)/l,(e+i-o)/h]}set commentPopupPosition(t){this.#b=t}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=this.#b||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:o,y:l,width:h,height:d}=a;this.#t.showDialog(null,this,o+e*h,l+i*d,{...t,parentDimensions:a})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#s){const i=t.style.outlineColor=nt.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#_?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#_}if(t.append(e),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}Hd({html:this.#L||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#L(){const t=this.#T,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#T.html||null}get#k(){return this.#L?.attributes?.style?.fontSize||0}get#F(){return this.#L?.attributes?.style?.color||null}#B(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#F,fontSize:this.#k?`calc(${this.#k}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return i}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#w=null):e&&(e.deleted?this.remove():(this.#z(),this.#w=e.text)),t&&(this.#y=null,this.#R(),this.#M());return}if(i||e?.deleted){this.remove();return}this.#D(),this.#A||={contentsObj:this.#o,richText:this.#T},t&&(this.#u=null),e&&e.text&&(this.#T=this.#B(e.text),this.#c=Vl.toDateObject(e.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#T}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#x=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:a,pageY:o}}}=this.#d;let l=!!this.#h,h=l?this.#h:this.#v;for(const E of this.#l)if(!h||nt.intersect(E.data.rect,h)!==null){h=E.data.rect,l=!0;break}const d=nt.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),g=l?h[2]-h[0]+5:0,y=d[0]+g,v=d[1];this.#u=[100*(y-a)/e,100*(v-o)/i];const{style:A}=this.#a;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#N(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#e)):(this.#U(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#e))}#N(){this.#m||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#C(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#U(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#x=this.isVisible,this.#x&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#x&&(this.#m||this.#N(),this.#x=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class $b extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=At.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class cT extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class uT extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",e-o),l.setAttribute("height",i-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class hT extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",i/2),l.setAttribute("rx",e/2-o/2),l.setAttribute("ry",i/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Kb extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:a},width:o,height:l}=this;if(!e)return this.container;const h=this.svgFactory.create(o,l,!0);let d=[];for(let g=0,y=e.length;g<y;g+=2){const v=e[g]-t[0],A=t[3]-e[g+1];d.push(`${v},${A}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),h.append(f),this.container.append(h),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class dT extends Kb{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class fT extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Jd extends ie{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?At.HIGHLIGHT:At.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:a,popupRef:o}}=this,{transform:l,width:h,height:d}=this.#i(e,t),f=this.svgFactory.create(h,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let y=0,v=i.length;y<v;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",i[y].join(",")),g.append(A)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:a}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),i)for(let l=0,h=this.#e.length;l<h;l++)this.#e[l].setAttribute("points",i[l].join(","));if(a){const{transform:l,width:h,height:d}=this.#i(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${h} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Wb extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=At.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class pT extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class gT extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class mT extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class Qb extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=At.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class yT extends ie{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:a}=Se.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let tf=class Zb{#t=null;#e=null;#i=null;#n=new Map;#r=null;#s=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:h,commentManager:d,linkService:f,annotationStorage:g}){this.div=t,this.#t=e,this.#e=i,this.#r=h||null,this.#s=f||null,this.#i=g||new Vd,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,i){const a=t.firstChild||t,o=a.id=`${Ud}${e}`,l=await this.#r?.getAriaAttributes(o);if(l)for(const[h,d]of l)a.setAttribute(h,d);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:e}=t,i=this.div;Wi(i,this.viewport);const a=new Map,o={data:null,layer:i,linkService:this.#s,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Qr,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const h=l.annotationType===le.POPUP;if(h){const g=a.get(l.id);if(!g)continue;o.elements=g}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const d=dv.create(o);if(!d.isRenderable)continue;if(!h&&l.popupRef){const g=a.get(l.popupRef);g?g.push(d):a.set(l.popupRef,[d])}const f=d.render();l.hidden&&(f.style.visibility="hidden"),await this.#a(f,l.id,o.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#s,svgFactory:new Qr,parent:this};for(const i of t){i.borderStyle||=Zb._defaultBorderStyle,e.data=i;const a=dv.create(e);if(!a.isRenderable)continue;const o=a.render();await this.#a(o,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Wi(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):a.append(i);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,i),l._hasNoCanvas=!1):l.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:a}=t,o=new eT({data:{id:i,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#i}),l=o.render();return e.append(l),this.#t?.moveElementInDOM(e,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return Tt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:va.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Pl=/\r\n?|\n/g;class be extends ft{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=be.prototype,e=o=>o.isEmpty(),i=mi.TRANSLATE_SMALL,a=mi.TRANSLATE_BIG;return Tt(this,"_keyboardManager",new so([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=At.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||be._defaultColor||ft._defaultLineColor,this.#n=t.fontSize||be._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){ft.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Lt.FREETEXT_SIZE:be._defaultFontSize=e;break;case Lt.FREETEXT_COLOR:be._defaultColor=e;break}}updateParams(t,e){switch(t){case Lt.FREETEXT_SIZE:this.#r(e);break;case Lt.FREETEXT_COLOR:this.#s(e);break}}static get defaultPropertiesToUpdate(){return[[Lt.FREETEXT_SIZE,be._defaultFontSize],[Lt.FREETEXT_COLOR,be._defaultColor||ft._defaultLineColor]]}get propertiesToUpdate(){return[[Lt.FREETEXT_SIZE,this.#n],[Lt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Wr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Lt.FREETEXT_COLOR}#r(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},i=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(t){const e=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-be._internalPadding*t,-(be._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(be.#c(i)),e=i);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,h=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;const i=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){be._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[f,g]=this.pageDimensions,[y,v]=this.pageTranslation;let A,E;switch(this.rotation){case 0:A=t+(l[0]-y)/f,E=e+this.height-(l[1]-v)/g;break;case 90:A=t+(l[0]-y)/f,E=e-(l[1]-v)/g,[h,d]=[d,-h];break;case 180:A=t-this.width+(l[0]-y)/f,E=e-(l[1]-v)/g,[h,d]=[-h,-d];break;case 270:A=t+(l[0]-y-this.height*g)/f,E=e+(l[1]-v-this.width*f)/g,[h,d]=[-d,h];break}this.setAt(A*a,E*o,h,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Pl,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=be.#h(e.getData("text")||"").replaceAll(Pl,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:h,startOffset:d}=l,f=[],g=[];if(h.nodeType===Node.TEXT_NODE){const A=h.parentElement;if(g.push(h.nodeValue.slice(d).replaceAll(Pl,"")),A!==this.editorDiv){let E=f;for(const S of this.editorDiv.childNodes){if(S===A){E=g;continue}E.push(be.#c(S))}}f.push(h.nodeValue.slice(0,d).replaceAll(Pl,""))}else if(h===this.editorDiv){let A=f,E=0;for(const S of this.editorDiv.childNodes)E++===d&&(A=g),A.push(be.#c(S))}this.#t=`${f.join(`
`)}${a}${g.join(`
`)}`,this.#l();const y=new Range;let v=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const E=A.nodeValue.length;if(v<=E){y.setStart(A,v),y.setEnd(A,v);break}v-=E}o.removeAllRanges(),o.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=be._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let a=null;if(t instanceof $b){const{data:{defaultAppearanceData:{fontSize:l,fontColor:h},rect:d,rotation:f,id:g,popupRef:y,richText:v,contentsObj:A,creationDate:E,modificationDate:S},textContent:_,textPosition:T,parent:{page:{pageNumber:R}}}=t;if(!_||_.length===0)return null;a=t={annotationType:At.FREETEXT,color:Array.from(h),fontSize:l,value:_.join(`
`),position:T,pageIndex:R-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:A?.str||null,richText:v,creationDate:E,modificationDate:S}}const o=await super.deserialize(t,e,i);return o.#n=t.fontSize,o.color=nt.makeHexColor(...t.color),o.#t=be.#h(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=ft._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){const{value:e,fontSize:i,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((l,h)=>l!==a[h])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class et{static PRECISION=1e-4;toSVGPath(){$t("Abstract method `toSVGPath` must be implemented.")}get box(){$t("Abstract getter `box` must be implemented.")}serialize(t,e){$t("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,a,o,l){l||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)l[h]=e+t[h]*a,l[h+1]=i+t[h+1]*o;return l}static _rescaleAndSwap(t,e,i,a,o,l){l||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)l[h]=e+t[h+1]*a,l[h+1]=i+t[h]*o;return l}static _translate(t,e,i,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o],a[o+1]=i+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,a,o){switch(o){case 90:return[1-e/i,t/a];case 180:return[1-t/i,1-e/a];case 270:return[e/i,1-t/a];default:return[t/i,e/a]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,a,o,l){return[(t+5*i)/6,(e+5*a)/6,(5*i+o)/6,(5*a+l)/6,(i+o)/2,(a+l)/2]}}class bs{#t;#e=[];#i;#n;#r=[];#s=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#m=8;static#p=2;static#u=bs.#m+bs.#p;constructor({x:t,y:e},i,a,o,l,h=0){this.#t=i,this.#h=o*a,this.#n=l,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=h,this.#l=bs.#m*a,this.#c=bs.#u*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#g(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[i,a,o,l]=this.#t;return[(this.#a+(t[0]-e[0])/2-i)/o,(this.#o+(t[1]-e[1])/2-a)/l,(this.#a+(e[0]-t[0])/2-i)/o,(this.#o+(e[1]-t[1])/2-a)/l]}add({x:t,y:e}){this.#a=t,this.#o=e;const[i,a,o,l]=this.#t;let[h,d,f,g]=this.#s.subarray(8,12);const y=t-f,v=e-g,A=Math.hypot(y,v);if(A<this.#c)return!1;const E=A-this.#l,S=E/A,_=S*y,T=S*v;let R=h,C=d;h=f,d=g,f+=_,g+=T,this.#f?.push(t,e);const D=-T/E,N=_/E,B=D*this.#h,P=N*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([f+B,g+P],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([f-B,g-P],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([h+B,d+P],2),this.#r.push(NaN,NaN,NaN,NaN,(h+B-i)/o,(d+P-a)/l),this.#s.set([h-B,d-P],14),this.#e.push(NaN,NaN,NaN,NaN,(h-B-i)/o,(d-P-a)/l)),this.#s.set([R,C,h,d,f,g],6),!this.isEmpty()):(this.#s.set([R,C,h,d,f,g],6),Math.abs(Math.atan2(C-d,R-h)-Math.atan2(T,_))<Math.PI/2?([h,d,f,g]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((h+f)/2-i)/o,((d+g)/2-a)/l),[h,d,R,C]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((R+h)/2-i)/o,((C+d)/2-a)/l),!0):([R,C,h,d,f,g]=this.#s.subarray(0,6),this.#r.push(((R+5*h)/6-i)/o,((C+5*d)/6-a)/l,((5*h+f)/6-i)/o,((5*d+g)/6-a)/l,((h+f)/2-i)/o,((d+g)/2-a)/l),[f,g,h,d,R,C]=this.#s.subarray(12,18),this.#e.push(((R+5*h)/6-i)/o,((C+5*d)/6-a)/l,((5*h+f)/6-i)/o,((5*d+g)/6-a)/l,((h+f)/2-i)/o,((d+g)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#v(i);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#b(i),i.join(" ")}#y(){const[t,e,i,a]=this.#t,[o,l,h,d]=this.#g();return`M${(this.#s[2]-t)/i} ${(this.#s[3]-e)/a} L${(this.#s[4]-t)/i} ${(this.#s[5]-e)/a} L${o} ${l} L${h} ${d} L${(this.#s[16]-t)/i} ${(this.#s[17]-e)/a} L${(this.#s[14]-t)/i} ${(this.#s[15]-e)/a} Z`}#b(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,i,a,o]=this.#t,l=this.#s.subarray(4,6),h=this.#s.subarray(16,18),[d,f,g,y]=this.#g();t.push(`L${(l[0]-e)/a} ${(l[1]-i)/o} L${d} ${f} L${g} ${y} L${(h[0]-e)/a} ${(h[1]-i)/o}`)}newFreeDrawOutline(t,e,i,a,o,l){return new Jb(t,e,i,a,o,l)}getOutlines(){const t=this.#r,e=this.#e,i=this.#s,[a,o,l,h]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,v=d.length-2;y<v;y+=2)d[y]=(this.#f[y]-a)/l,d[y+1]=(this.#f[y+1]-o)/h;if(d[d.length-2]=(this.#a-a)/l,d[d.length-1]=(this.#o-o)/h,isNaN(i[6])&&!this.isEmpty())return this.#T(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}g=this.#A(f,g);for(let y=e.length-6;y>=6;y-=6)for(let v=0;v<6;v+=2){if(isNaN(e[y+v])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=e[y+v],f[g+1]=e[y+v+1],g+=2}return this.#_(f,g),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#i,this.#n)}#T(t){const e=this.#s,[i,a,o,l]=this.#t,[h,d,f,g]=this.#g(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-i)/o,(e[3]-a)/l,NaN,NaN,NaN,NaN,(e[4]-i)/o,(e[5]-a)/l,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(e[16]-i)/o,(e[17]-a)/l,NaN,NaN,NaN,NaN,(e[14]-i)/o,(e[15]-a)/l],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#i,this.#n)}#_(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#A(t,e){const i=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[o,l,h,d]=this.#t,[f,g,y,v]=this.#g();return t.set([NaN,NaN,NaN,NaN,(i[0]-o)/h,(i[1]-l)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(a[0]-o)/h,(a[1]-l)/d],e),e+=24}}class Jb extends et{#t;#e=new Float32Array(4);#i;#n;#r;#s;#a;constructor(t,e,i,a,o,l){super(),this.#a=t,this.#r=e,this.#t=i,this.#s=a,this.#i=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[h,d,f,g]=this.#e;for(let y=0,v=t.length;y<v;y+=2)t[y]=(t[y]-h)/f,t[y+1]=(t[y+1]-d)/g;for(let y=0,v=e.length;y<v;y+=2)e[y]=(e[y]-h)/f,e[y+1]=(e[y+1]-d)/g}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,i=this.#a.length;e<i;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,a],o){const l=i-t,h=a-e;let d,f;switch(o){case 0:d=et._rescale(this.#a,t,a,l,-h),f=et._rescale(this.#r,t,a,l,-h);break;case 90:d=et._rescaleAndSwap(this.#a,t,e,l,h),f=et._rescaleAndSwap(this.#r,t,e,l,h);break;case 180:d=et._rescale(this.#a,i,e,-l,h),f=et._rescale(this.#r,i,e,-l,h);break;case 270:d=et._rescaleAndSwap(this.#a,i,a,-l,-h),f=et._rescaleAndSwap(this.#r,i,a,-l,-h);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const e=this.#a;let i=e[4],a=e[5];const o=[i,a,i,a];let l=i,h=a,d=i,f=a;const g=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,E=e.length;A<E;A+=6){const S=e[A+4],_=e[A+5];isNaN(e[A])?(nt.pointBoundingBox(S,_,o),h>_?(l=S,h=_):h===_&&(l=g(l,S)),f<_?(d=S,f=_):f===_&&(d=g(d,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,nt.bezierBoundingBox(i,a,...e.slice(A,A+6),y),nt.rectBoundingBox(y[0],y[1],y[2],y[3],o),h>y[1]?(l=y[0],h=y[1]):h===y[1]&&(l=g(l,y[0])),f<y[3]?(d=y[2],f=y[3]):f===y[3]&&(d=g(d,y[2]))),i=S,a=_}const v=this.#e;v[0]=o[0]-this.#i,v[1]=o[1]-this.#i,v[2]=o[2]-o[0]+2*this.#i,v[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[l,h],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,e,i,a,o,l=0){return new bs(t,e,i,a,o,l)}getNewOutline(t,e){const[i,a,o,l]=this.#e,[h,d,f,g]=this.#t,y=o*f,v=l*g,A=i*f+h,E=a*g+d,S=this.newOutliner({x:this.#r[0]*y+A,y:this.#r[1]*v+E},this.#t,this.#s,t,this.#n,e??this.#i);for(let _=2;_<this.#r.length;_+=2)S.add({x:this.#r[_]*y+A,y:this.#r[_+1]*v+E});return S.getOutlines()}}class Ad{#t;#e;#i;#n=[];#r=[];constructor(t,e=0,i=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:_,width:T,height:R}of t){const C=Math.floor((S-e)/l)*l,D=Math.ceil((S+T+e)/l)*l,N=Math.floor((_-e)/l)*l,B=Math.ceil((_+R+e)/l)*l,P=[C,N,B,!0],j=[D,N,B,!1];this.#n.push(P,j),nt.rectBoundingBox(C,N,D,B,o)}const h=o[2]-o[0]+2*i,d=o[3]-o[1]+2*i,f=o[0]-i,g=o[1]-i;let y=a?-1/0:1/0,v=1/0;const A=this.#n.at(a?-1:-2),E=[A[0],A[2]];for(const S of this.#n){const[_,T,R,C]=S;!C&&a?T<v?(v=T,y=_):T===v&&(y=Math.max(y,_)):C&&!a&&(T<v?(v=T,y=_):T===v&&(y=Math.min(y,_))),S[0]=(_-f)/h,S[1]=(T-g)/d,S[2]=(R-g)/d}this.#t=new Float32Array([f,g,h,d]),this.#e=[y,v],this.#i=E}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#s(t)}#s(t){const e=[],i=new Set;for(const l of t){const[h,d,f]=l;e.push([h,d,l],[h,f,l])}e.sort((l,h)=>l[1]-h[1]||l[0]-h[0]);for(let l=0,h=e.length;l<h;l+=2){const d=e[l][2],f=e[l+1][2];d.push(f),f.push(d),i.add(d),i.add(f)}const a=[];let o;for(;i.size>0;){const l=i.values().next().value;let[h,d,f,g,y]=l;i.delete(l);let v=h,A=d;for(o=[h,f],a.push(o);;){let E;if(i.has(g))E=g;else if(i.has(y))E=y;else break;i.delete(E),[h,d,f,g,y]=E,v!==h&&(o.push(v,A,h,A===d?d:f),v=h),A=A===d?f:d}o.push(v,A)}return new vT(a,this.#t,this.#e,this.#i)}#a(t){const e=this.#r;let i=0,a=e.length-1;for(;i<=a;){const o=i+a>>1,l=e[o][0];if(l===t)return o;l<t?i=o+1:a=o-1}return a+1}#o([,t,e]){const i=this.#a(t);this.#r.splice(i,0,[t,e])}#c([,t,e]){const i=this.#a(t);for(let a=i;a<this.#r.length;a++){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}}#l(t){const[e,i,a]=t,o=[[e,i,a]],l=this.#a(a);for(let h=0;h<l;h++){const[d,f]=this.#r[h];for(let g=0,y=o.length;g<y;g++){const[,v,A]=o[g];if(!(f<=v||A<=d)){if(v>=d){if(A>f)o[g][1]=f;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,A>f&&o.push([e,f,A])}}}return o}}class vT extends et{#t;#e;constructor(t,e,i,a){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[i,a]=e;t.push(`M${i} ${a}`);for(let o=2;o<e.length;o+=2){const l=e[o],h=e[o+1];l===i?(t.push(`V${h}`),a=h):h===a&&(t.push(`H${l}`),i=l)}t.push("Z")}return t.join(" ")}serialize([t,e,i,a],o){const l=[],h=i-t,d=a-e;for(const f of this.#e){const g=new Array(f.length);for(let y=0;y<f.length;y+=2)g[y]=t+f[y]*h,g[y+1]=a-f[y+1]*d;l.push(g)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Sd extends bs{newFreeDrawOutline(t,e,i,a,o,l){return new bT(t,e,i,a,o,l)}}class bT extends Jb{newOutliner(t,e,i,a,o,l=0){return new Sd(t,e,i,a,o,l)}}class ce extends ft{#t=null;#e=0;#i;#n=null;#r=null;#s=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#p=null;#u="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=At.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ce.prototype;return Tt(this,"_keyboardManager",new so([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ce._defaultColor,this.#g=t.thickness||ce._defaultThickness,this.opacity=t.opacity||ce._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#v(t),this.#E()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#E(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new Ad(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new Ad(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:a}=this.#s;this.#m=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const a=1.5;if(this.#s=t.getNewOutline(this.#g/2+a,.0025),e>=0)this.#d=e,this.#n=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ce.#w(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ce.#w(this.#s.box,y),path:{d:this.#s.toSVGPath()}})}const[o,l,h,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=h,this.height=d;break;case 90:{const[y,v]=this.parentDimensions;this.x=l,this.y=1-o,this.width=h*v/y,this.height=d*y/v;break}case 180:this.x=1-o,this.y=1-l,this.width=h,this.height=d;break;case 270:{const[y,v]=this.parentDimensions;this.x=1-l,this.y=o,this.width=h*v/y,this.height=d*y/v;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/h,(f[1]-l)/d];const{lastPoint:g}=this.#s;this.#m=[(g[0]-o)/h,(g[1]-l)/d]}static initialize(t,e){ft.initialize(t,e),ce._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Lt.HIGHLIGHT_COLOR:ce._defaultColor=e;break;case Lt.HIGHLIGHT_THICKNESS:ce._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Lt.HIGHLIGHT_COLOR:this.#T(e);break;case Lt.HIGHLIGHT_THICKNESS:this.#_(e);break}}static get defaultPropertiesToUpdate(){return[[Lt.HIGHLIGHT_COLOR,ce._defaultColor],[Lt.HIGHLIGHT_THICKNESS,ce._defaultThickness]]}get propertiesToUpdate(){return[[Lt.HIGHLIGHT_COLOR,this.color||ce._defaultColor],[Lt.HIGHLIGHT_THICKNESS,this.#g||ce._defaultThickness],[Lt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#T(t){const e=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:e.bind(this,t,ce._defaultOpacity),undo:e.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#_(t){const e=this.#g,i=a=>{this.#g=a,this.#A(a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new ln({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#x(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#E(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#x():t&&(this.#E(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#A(t){this.#h&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#x(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#E(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#w([t,e,i,a],o){switch(o){case 90:return[1-e-a,t,a,i];case 180:return[1-t-i,1-e-a,i,a];case 270:return[e,1-t-i,a,i]}return[t,e,i,a]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#h?(t=(t-this.rotation+360)%360,i=ce.#w(this.#l.box,t)):i=ce.#w([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:ce.#w(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(this.width,this.height),Rb(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#D(t){ce._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#z(){if(this.#h)return null;const[t,e]=this.pageDimensions,[i,a]=this.pageTranslation,o=this.#i,l=new Float32Array(o.length*8);let h=0;for(const{x:d,y:f,width:g,height:y}of o){const v=d*t+i,A=(1-f)*e+a;l[h]=l[h+4]=v,l[h+1]=l[h+3]=A,l[h+2]=l[h+6]=v+g*t,l[h+5]=l[h+7]=A-y*e,h+=8}return l}#L(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:i,x:a,y:o}){const{x:l,y:h,width:d,height:f}=i.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),v=A=>{g.abort(),this.#F(t,A)};window.addEventListener("blur",v,{signal:y}),window.addEventListener("pointerup",v,{signal:y}),window.addEventListener("pointerdown",ne,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",un,{signal:y}),i.addEventListener("pointermove",this.#k.bind(this,t),{signal:y}),this._freeHighlight=new Sd({x:a,y:o},[l,h,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let a=null;if(t instanceof Wb){const{data:{quadPoints:E,rect:S,rotation:_,id:T,color:R,opacity:C,popupRef:D,richText:N,contentsObj:B,creationDate:P,modificationDate:j},parent:{page:{pageNumber:X}}}=t;a=t={annotationType:At.HIGHLIGHT,color:Array.from(R),opacity:C,quadPoints:E,boxes:null,pageIndex:X-1,rect:S.slice(0),rotation:_,annotationElementId:T,id:T,deleted:!1,popupRef:D,richText:N,comment:B?.str||null,creationDate:P,modificationDate:j}}else if(t instanceof Jd){const{data:{inkLists:E,rect:S,rotation:_,id:T,color:R,borderStyle:{rawWidth:C},popupRef:D,richText:N,contentsObj:B,creationDate:P,modificationDate:j},parent:{page:{pageNumber:X}}}=t;a=t={annotationType:At.HIGHLIGHT,color:Array.from(R),thickness:C,inkLists:E,boxes:null,pageIndex:X-1,rect:S.slice(0),rotation:_,annotationElementId:T,id:T,deleted:!1,popupRef:D,richText:N,comment:B?.str||null,creationDate:P,modificationDate:j}}const{color:o,quadPoints:l,inkLists:h,opacity:d}=t,f=await super.deserialize(t,e,i);f.color=nt.makeHexColor(...o),f.opacity=d||1,h&&(f.#g=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t);const[g,y]=f.pageDimensions,[v,A]=f.pageTranslation;if(l){const E=f.#i=[];for(let S=0;S<l.length;S+=8)E.push({x:(l[S]-v)/g,y:1-(l[S+1]-A)/y,width:(l[S+2]-l[S])/g,height:(l[S+1]-l[S+5])/y});f.#b(),f.#E(),f.rotate(f.rotation)}else if(h){f.#h=!0;const E=h[0],S={x:E[0]-v,y:y-(E[1]-A)},_=new Sd(S,[0,0,g,y],1,f.#g/2,!0,.001);for(let C=0,D=E.length;C<D;C+=2)S.x=E[C]-v,S.y=y-(E[C+1]-A),_.add(S);const{id:T,clipPathId:R}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);f.#v({highlightOutlines:_.getOutlines(),highlightId:T,clipPathId:R}),f.#E(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=ft._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#g,quadPoints:this.#z(),outlines:this.#L(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#B(i)?null:(i.id=this.annotationElementId,i)}#B(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,a)=>i!==e[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class t0{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){$t("Not implemented")}}class mt extends ft{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static#s=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){const{id:i}=e.drawLayer.draw(mt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[a,o]of Object.entries(e))i.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){$t("Not implemented")}static get typesMap(){$t("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(mt.#i.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,e[a]]);return t}_updateProperty(t,e,i){const a=this._drawingOptions,o=a[e],l=h=>{a.updateProperty(e,h);const d=this.#t.updateProperty(e,h);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#m([t,e,i,a]){const{parentDimensions:[o,l],rotation:h}=this;switch(h){case 90:return[e,1-t,i*(l/o),a*(o/l)];case 180:return[1-t,1-e,i,a];case 270:return[1-e,t,i*(l/o),a*(o/l)];default:return[t,e,i,a]}}#p(){const{x:t,y:e,width:i,height:a,parentDimensions:[o,l],rotation:h}=this;switch(h){case 90:return[1-e,t,i*(o/l),a*(l/o)];case 180:return[1-t,1-e,i,a];case 270:return[e,1-t,i*(o/l),a*(l/o)];default:return[t,e,i,a]}}#u(t){[this.x,this.y,this.width,this.height]=this.#m(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#g(){const{x:t,y:e,width:i,height:a,rotation:o,parentRotation:l,parentDimensions:[h,d]}=this;switch((o*4+l)/90){case 1:return[1-e-a,t,a,i];case 2:return[1-t-i,1-e-a,i,a];case 3:return[e,1-t-i,a,i];case 4:return[t,e-i*(h/d),a*(d/h),i*(h/d)];case 5:return[1-e,t,i*(h/d),a*(d/h)];case 6:return[1-t-a*(d/h),1-e,a*(d/h),i*(h/d)];case 7:return[e-i*(h/d),1-t-a*(d/h),i*(h/d),a*(d/h)];case 8:return[t-i,e-a,i,a];case 9:return[1-e,t-i,a,i];case 10:return[1-t,1-e,i,a];case 11:return[e-a,1-t,a,i];case 12:return[t-a*(d/h),e,a*(d/h),i*(h/d)];case 13:return[1-e-i*(h/d),t-a*(d/h),i*(h/d),a*(d/h)];case 14:return[1-t,1-e-i*(h/d),a*(d/h),i*(h/d)];case 15:return[e,1-t,i*(h/d),a*(d/h)];default:return[t,e,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,a,o){$t("Not implemented")}static startDrawing(t,e,i,a){const{target:o,offsetX:l,offsetY:h,pointerId:d,pointerType:f}=a;if(mt.#a&&mt.#a!==f)return;const{viewport:{rotation:g}}=t,{width:y,height:v}=o.getBoundingClientRect(),A=mt.#n=new AbortController,E=t.combinedSignal(A);if(mt.#s||=d,mt.#a??=f,window.addEventListener("pointerup",S=>{mt.#s===S.pointerId?this._endDraw(S):mt.#o?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointercancel",S=>{mt.#s===S.pointerId?this._currentParent.endDrawingSession():mt.#o?.delete(S.pointerId)},{signal:E}),window.addEventListener("pointerdown",S=>{mt.#a===S.pointerType&&((mt.#o||=new Set).add(S.pointerId),mt.#i.isCancellable()&&(mt.#i.removeLastElement(),mt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",un,{signal:E}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),o.addEventListener("touchmove",S=>{S.timeStamp===mt.#c&&ne(S)},{signal:E}),t.toggleDrawing(),e._editorUndoBar?.hide(),mt.#i){t.drawLayer.updateProperties(this._currentDrawId,mt.#i.startNew(l,h,y,v,g));return}e.updateUIForDefaultProperties(this),mt.#i=this.createDrawerInstance(l,h,y,v,g),mt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(mt.#r.toSVGProperties(),mt.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(mt.#c=-1,!mt.#i)return;const{offsetX:e,offsetY:i,pointerId:a}=t;if(mt.#s===a){if(mt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,mt.#i.add(e,i)),mt.#c=t.timeStamp,ne(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,mt.#i=null,mt.#r=null,mt.#a=null,mt.#c=NaN),mt.#n&&(mt.#n.abort(),mt.#n=null,mt.#s=NaN,mt.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,mt.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=mt.#i,a=this._currentDrawId,o=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,i.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Lt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Lt.DRAW_STEP),!mt.#i.isEmpty()){const{pageDimensions:[i,a],scale:o}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:mt.#i.getOutlines(i*o,a*o,o,this._INNER_MARGIN),drawingOptions:mt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,a,o,l){$t("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:h}}=e.viewport,d=this.deserializeDraw(l,h,a,o,this._INNER_MARGIN,t),f=await super.deserialize(t,e,i);return f.createDrawingOptions(t),f.#l({drawOutlines:d}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,i]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([e,i,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class AT{#t=new Float64Array(6);#e;#i;#n;#r;#s;#a="";#o=0;#c=new oo;#l;#d;constructor(t,e,i,a,o,l){this.#l=i,this.#d=a,this.#n=o,this.#r=l,[t,e]=this.#h(t,e);const h=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#i=[{line:h,points:this.#s}],this.#t.set(h,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return et._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#h(t,e);const[i,a,o,l]=this.#t.subarray(2,6),h=t-o,d=e-l;return Math.hypot(this.#l*h,this.#d*d)<=2?null:(this.#s.push(t,e),isNaN(i)?(this.#t.set([o,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,a,o,l,t,e],0),this.#e.push(...et.createBezierPoints(i,a,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,a,o){this.#l=i,this.#d=a,this.#n=o,[t,e]=this.#h(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const h=this.#i.at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),this.#i.push({line:l,points:this.#s}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#a="";for(let t=0,e=this.#i.length;t<e;t++){const{line:i,points:a}=this.#i[t];this.#e=i,this.#s=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=et.svgRound(this.#e[4]),e=et.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#s.length<=6){const a=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#s.length===4){const a=et.svgRound(this.#e[10]),o=et.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${a} ${o}`,this.#o=12,this.#a}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[l,h,d,f,g,y]=this.#e.slice(a,a+6).map(et.svgRound);i.push(`C${l} ${h} ${d} ${f} ${g} ${y}`)}return this.#a+=i.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,i,a){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,t,e,i,this.#n,this.#r,a),this.#t=null,this.#e=null,this.#i=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class oo extends et{#t;#e=0;#i;#n;#r;#s;#a;#o;#c;build(t,e,i,a,o,l,h){this.#r=e,this.#s=i,this.#a=a,this.#o=o,this.#c=l,this.#i=h??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${et.svgRound(e[4])} ${et.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${et.svgRound(e[10])} ${et.svgRound(e[11])}`);continue}for(let i=6,a=e.length;i<a;i+=6){const[o,l,h,d,f,g]=e.subarray(i,i+6).map(et.svgRound);t.push(`C${o} ${l} ${h} ${d} ${f} ${g}`)}}return t.join("")}serialize([t,e,i,a],o){const l=[],h=[],[d,f,g,y]=this.#d();let v,A,E,S,_,T,R,C,D;switch(this.#o){case 0:D=et._rescale,v=t,A=e+a,E=i,S=-a,_=t+d*i,T=e+(1-f-y)*a,R=t+(d+g)*i,C=e+(1-f)*a;break;case 90:D=et._rescaleAndSwap,v=t,A=e,E=i,S=a,_=t+f*i,T=e+d*a,R=t+(f+y)*i,C=e+(d+g)*a;break;case 180:D=et._rescale,v=t+i,A=e,E=-i,S=a,_=t+(1-d-g)*i,T=e+f*a,R=t+(1-d)*i,C=e+(f+y)*a;break;case 270:D=et._rescaleAndSwap,v=t+i,A=e+a,E=-i,S=-a,_=t+(1-f-y)*i,T=e+(1-d-g)*a,R=t+(1-f)*i,C=e+(1-d)*a;break}for(const{line:N,points:B}of this.#n)l.push(D(N,v,A,E,S,o?new Array(N.length):null)),h.push(D(B,v,A,E,S,o?new Array(B.length):null));return{lines:l,points:h,rect:[_,T,R,C]}}static deserialize(t,e,i,a,o,{paths:{lines:l,points:h},rotation:d,thickness:f}){const g=[];let y,v,A,E,S;switch(d){case 0:S=et._rescale,y=-t/i,v=e/a+1,A=1/i,E=-1/a;break;case 90:S=et._rescaleAndSwap,y=-e/a,v=-t/i,A=1/a,E=1/i;break;case 180:S=et._rescale,y=t/i+1,v=-e/a,A=-1/i,E=1/a;break;case 270:S=et._rescaleAndSwap,y=e/a+1,v=t/i+1,A=-1/a,E=-1/i;break}if(!l){l=[];for(const T of h){const R=T.length;if(R===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1]]));continue}if(R===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1],NaN,NaN,NaN,NaN,T[2],T[3]]));continue}const C=new Float32Array(3*(R-2));l.push(C);let[D,N,B,P]=T.subarray(0,4);C.set([NaN,NaN,NaN,NaN,D,N],0);for(let j=4;j<R;j+=2){const X=T[j],Z=T[j+1];C.set(et.createBezierPoints(D,N,B,P,X,Z),(j-2)*3),[D,N,B,P]=[B,P,X,Z]}}}for(let T=0,R=l.length;T<R;T++)g.push({line:S(l[T].map(C=>C??NaN),y,v,A,E),points:S(h[T].map(C=>C??NaN),y,v,A,E)});const _=new this.prototype.constructor;return _.build(g,i,a,1,d,f,o),_}#l(t=this.#c){const e=this.#i+t/2*this.#a;return this.#o%180===0?[e/this.#r,e/this.#s]:[e/this.#s,e/this.#r]}#d(){const[t,e,i,a]=this.#t,[o,l]=this.#l(0);return[t+o,e+l,i-2*o,a-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let h=4,d=a.length;h<d;h+=6)nt.pointBoundingBox(a[h],a[h+1],t);continue}let o=a[4],l=a[5];for(let h=6,d=a.length;h<d;h+=6){const[f,g,y,v,A,E]=a.subarray(h,h+6);nt.bezierBoundingBox(o,l,f,g,y,v,A,E,t),o=A,l=E}}const[e,i]=this.#l();t[0]=ke(t[0]-e,0,1),t[1]=ke(t[1]-i,0,1),t[2]=ke(t[2]+e,0,1),t[3]=ke(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#c=t;const[a,o]=this.#l(),[l,h]=[a-e,o-i],d=this.#t;return d[0]-=l,d[1]-=h,d[2]+=2*l,d[3]+=2*h,d}updateParentDimensions([t,e],i){const[a,o]=this.#l();this.#r=t,this.#s=e,this.#a=i;const[l,h]=this.#l(),d=l-a,f=h-o,g=this.#t;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(et.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,a=0,o=0,l=0,h=0,d=0;switch(this.#e){case 90:a=e/t,o=-t/e,h=t;break;case 180:i=-1,l=-1,h=t,d=e;break;case 270:a=-e/t,o=t/e,d=e;break;default:return""}return`matrix(${i} ${a} ${o} ${l} ${et.svgRound(h)} ${et.svgRound(d)})`}getPathResizingSVGProperties([t,e,i,a]){const[o,l]=this.#l(),[h,d,f,g]=this.#t;if(Math.abs(f-o)<=et.PRECISION||Math.abs(g-l)<=et.PRECISION){const S=t+i/2-(h+f/2),_=e+a/2-(d+g/2);return{path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(e)}`,transform:`${this.rotationTransform} translate(${S} ${_})`}}}const y=(i-2*o)/(f-2*o),v=(a-2*l)/(g-2*l),A=f/i,E=g/a;return{path:{"transform-origin":`${et.svgRound(h)} ${et.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${E}) translate(${et.svgRound(o)} ${et.svgRound(l)}) scale(${y} ${v}) translate(${et.svgRound(-o)} ${et.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,i,a]){const[o,l]=this.#l(),h=this.#t,[d,f,g,y]=h;if(h[0]=t,h[1]=e,h[2]=i,h[3]=a,Math.abs(g-o)<=et.PRECISION||Math.abs(y-l)<=et.PRECISION){const _=t+i/2-(d+g/2),T=e+a/2-(f+y/2);for(const{line:R,points:C}of this.#n)et._translate(R,_,T,R),et._translate(C,_,T,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(i-2*o)/(g-2*o),A=(a-2*l)/(y-2*l),E=-v*(d+o)+t+o,S=-A*(f+l)+e+l;if(v!==1||A!==1||E!==0||S!==0)for(const{line:_,points:T}of this.#n)et._rescale(_,E,S,v,A,_),et._rescale(T,E,S,v,A,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${et.svgRound(t)} ${et.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[a,o]=i,l=this.#t,h=t-l[0],d=e-l[1];if(this.#r===a&&this.#s===o)for(const{line:f,points:g}of this.#n)et._translate(f,h,d,f),et._translate(g,h,d,g);else{const f=this.#r/a,g=this.#s/o;this.#r=a,this.#s=o;for(const{line:y,points:v}of this.#n)et._rescale(y,h,d,f,g,y),et._rescale(v,h,d,f,g,v);l[2]*=f,l[3]*=g}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t)} ${et.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${et.svgRound(t[0])} ${et.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class lc extends t0{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ft._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new lc(this._viewParameters);return t.updateAll(this),t}}class ef extends mt{static _type="ink";static _editorType=At.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){ft.initialize(t,e),this._defaultDrawingOptions=new lc(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Tt(this,"typesMap",new Map([[Lt.INK_THICKNESS,"stroke-width"],[Lt.INK_COLOR,"stroke"],[Lt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,a,o){return new AT(t,e,i,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,a,o,l){return oo.deserialize(t,e,i,a,o,l)}static async deserialize(t,e,i){let a=null;if(t instanceof Jd){const{data:{inkLists:l,rect:h,rotation:d,id:f,color:g,opacity:y,borderStyle:{rawWidth:v},popupRef:A,richText:E,contentsObj:S,creationDate:_,modificationDate:T},parent:{page:{pageNumber:R}}}=t;a=t={annotationType:At.INK,color:Array.from(g),thickness:v,opacity:y,paths:{points:l},boxes:null,pageIndex:R-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:E,comment:S?.str||null,creationDate:_,modificationDate:T}}const o=await super.deserialize(t,e,i);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Wr(this),[["colorPicker",this._colorPicker]]}get colorType(){return Lt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=ef.getDefaultDrawingOptions({stroke:nt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,h=Object.assign(super.serialize(t),{color:ft._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:e,points:i}});return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!this.#t(h)?null:(h.id=this.annotationElementId,h)}#t(t){const{color:e,thickness:i,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,h)=>l!==e[h])||t.thickness!==i||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class Ed extends oo{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const zl=8,Pr=3;class vs{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,a){return i-=t,a-=e,i===0?a>0?0:4:i===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,i,a,o,l,h){const d=this.#e(i,a,o,l);for(let f=0;f<8;f++){const g=(-f+d-h+16)%8,y=this.#i[2*g],v=this.#i[2*g+1];if(t[(i+y)*e+(a+v)]!==0)return g}return-1}static#r(t,e,i,a,o,l,h){const d=this.#e(i,a,o,l);for(let f=0;f<8;f++){const g=(f+d+h+16)%8,y=this.#i[2*g],v=this.#i[2*g+1];if(t[(i+y)*e+(a+v)]!==0)return g}return-1}static#s(t,e,i,a){const o=t.length,l=new Int32Array(o);for(let g=0;g<o;g++)l[g]=t[g]<=a?1:0;for(let g=1;g<i-1;g++)l[g*e]=l[g*e+e-1]=0;for(let g=0;g<e;g++)l[g]=l[e*i-1-g]=0;let h=1,d;const f=[];for(let g=1;g<i-1;g++){d=1;for(let y=1;y<e-1;y++){const v=g*e+y,A=l[v];if(A===0)continue;let E=g,S=y;if(A===1&&l[v-1]===0)h+=1,S-=1;else if(A>=1&&l[v+1]===0)h+=1,S+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const _=[y,g],T=S===y+1,R={isHole:T,points:_,id:h,parent:0};f.push(R);let C;for(const J of f)if(J.id===d){C=J;break}C?C.isHole?R.parent=T?C.parent:d:R.parent=T?d:C.parent:R.parent=T?d:0;const D=this.#n(l,e,g,y,E,S,0);if(D===-1){l[v]=-h,l[v]!==1&&(d=Math.abs(l[v]));continue}let N=this.#i[2*D],B=this.#i[2*D+1];const P=g+N,j=y+B;E=P,S=j;let X=g,Z=y;for(;;){const J=this.#r(l,e,X,Z,E,S,1);N=this.#i[2*J],B=this.#i[2*J+1];const lt=X+N,ct=Z+B;_.push(ct,lt);const at=X*e+Z;if(l[at+1]===0?l[at]=-h:l[at]===1&&(l[at]=h),lt===g&&ct===y&&X===P&&Z===j){l[v]!==1&&(d=Math.abs(l[v]));break}else E=X,S=Z,X=lt,Z=ct}}}return f}static#a(t,e,i,a){if(i-e<=4){for(let P=e;P<i-2;P+=2)a.push(t[P],t[P+1]);return}const o=t[e],l=t[e+1],h=t[i-4]-o,d=t[i-3]-l,f=Math.hypot(h,d),g=h/f,y=d/f,v=g*l-y*o,A=d/h,E=1/f,S=Math.atan(A),_=Math.cos(S),T=Math.sin(S),R=E*(Math.abs(_)+Math.abs(T)),C=E*(1-R+R**2),D=Math.max(Math.atan(Math.abs(T+_)*C),Math.atan(Math.abs(T-_)*C));let N=0,B=e;for(let P=e+2;P<i-2;P+=2){const j=Math.abs(v-g*t[P+1]+y*t[P]);j>N&&(B=P,N=j)}N>(f*D)**2?(this.#a(t,e,B+2,a),this.#a(t,B,i,a)):a.push(o,l)}static#o(t){const e=[],i=t.length;return this.#a(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,a,o,l){const h=new Float32Array(l**2),d=-2*a**2,f=l>>1;for(let S=0;S<l;S++){const _=(S-f)**2;for(let T=0;T<l;T++)h[S*l+T]=Math.exp((_+(T-f)**2)/d)}const g=new Float32Array(256),y=-2*o**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const v=t.length,A=new Uint8Array(v),E=new Uint32Array(256);for(let S=0;S<i;S++)for(let _=0;_<e;_++){const T=S*e+_,R=t[T];let C=0,D=0;for(let B=0;B<l;B++){const P=S+B-f;if(!(P<0||P>=i))for(let j=0;j<l;j++){const X=_+j-f;if(X<0||X>=e)continue;const Z=t[P*e+X],J=h[B*l+j]*g[Math.abs(Z-R)];C+=Z*J,D+=J}}const N=A[T]=Math.round(C/D);E[N]++}return[A,E]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let a=-1/0,o=1/0;for(let h=0,d=i.length;h<d;h++){const f=i[h]=t[h<<2];a=Math.max(a,f),o=Math.min(o,f)}const l=255/(a-o);for(let h=0,d=i.length;h<d;h++)i[h]=(i[h]-o)*l;return i}static#h(t){let e,i=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let l=o,h=o;for(e=o;e<256;e++){const d=t[e];d>i&&(e-l>a&&(a=e-l,h=e-1),i=d,l=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:a}=t,{maxDim:o}=this.#t;let l=i,h=a;if(i>o||a>o){let v=i,A=a,E=Math.log2(Math.max(i,a)/o);const S=Math.floor(E);E=E===S?S-1:S;for(let T=0;T<E;T++){l=Math.ceil(v/2),h=Math.ceil(A/2);const R=new OffscreenCanvas(l,h);R.getContext("2d").drawImage(t,0,0,v,A,0,0,l,h),v=l,A=h,t!==e&&t.close(),t=R.transferToImageBitmap()}const _=Math.min(o/l,o/h);l=Math.round(l*_),h=Math.round(h*_)}const f=new OffscreenCanvas(l,h).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,h),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,h);const g=f.getImageData(0,0,l,h).data;return[this.#d(g),l,h]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:a},o,l,h,d){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const y=200,v=g.font=`${i} ${a} ${y}px ${e}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:E,actualBoundingBoxAscent:S,actualBoundingBoxDescent:_,fontBoundingBoxAscent:T,fontBoundingBoxDescent:R,width:C}=g.measureText(t),D=1.5,N=Math.ceil(Math.max(Math.abs(A)+Math.abs(E)||0,C)*D),B=Math.ceil(Math.max(Math.abs(S)+Math.abs(_)||y,Math.abs(T)+Math.abs(R)||y)*D);f=new OffscreenCanvas(N,B),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=v,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,N,B),g.fillStyle="black",g.fillText(t,N*(D-1)/2,B*(3-D)/2);const P=this.#d(g.getImageData(0,0,N,B).data),j=this.#l(P),X=this.#h(j),Z=this.#s(P,N,B,X);return this.processDrawnLines({lines:{curves:Z,width:N,height:B},pageWidth:o,pageHeight:l,rotation:h,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,i,a,o){const[l,h,d]=this.#f(t),[f,g]=this.#c(l,h,d,Math.hypot(h,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(g),v=this.#s(f,h,d,y);return this.processDrawnLines({lines:{curves:v,width:h,height:d},pageWidth:e,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:l,areContours:h}){a%180!==0&&([e,i]=[i,e]);const{curves:d,width:f,height:g}=t,y=t.thickness??0,v=[],A=Math.min(e/f,i/g),E=A/e,S=A/i,_=[];for(const{points:R}of d){const C=l?this.#o(R):R;if(!C)continue;_.push(C);const D=C.length,N=new Float32Array(D),B=new Float32Array(3*(D===2?2:D-2));if(v.push({line:B,points:N}),D===2){N[0]=C[0]*E,N[1]=C[1]*S,B.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[P,j,X,Z]=C;P*=E,j*=S,X*=E,Z*=S,N.set([P,j,X,Z],0),B.set([NaN,NaN,NaN,NaN,P,j],0);for(let J=4;J<D;J+=2){const lt=N[J]=C[J]*E,ct=N[J+1]=C[J+1]*S;B.set(et.createBezierPoints(P,j,X,Z,lt,ct),(J-2)*3),[P,j,X,Z]=[X,Z,lt,ct]}}if(v.length===0)return null;const T=h?new Ed:new oo;return T.build(v,e,i,1,a,h?0:y,o),{outline:T,newCurves:_,areContours:h,thickness:y,width:f,height:g}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:a,height:o}){let l=1/0,h=-1/0,d=0;for(const C of t){d+=C.length;for(let D=2,N=C.length;D<N;D++){const B=C[D]-C[D-2];l=Math.min(l,B),h=Math.max(h,B)}}let f;l>=-128&&h<=127?f=Int8Array:l>=-32768&&h<=32767?f=Int16Array:f=Int32Array;const g=t.length,y=zl+Pr*g,v=new Uint32Array(y);let A=0;v[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*f.BYTES_PER_ELEMENT,v[A++]=0,v[A++]=a,v[A++]=o,v[A++]=e?0:1,v[A++]=Math.max(0,Math.floor(i??0)),v[A++]=g,v[A++]=f.BYTES_PER_ELEMENT;for(const C of t)v[A++]=C.length-2,v[A++]=C[0],v[A++]=C[1];const E=new CompressionStream("deflate-raw"),S=E.writable.getWriter();await S.ready,S.write(v);const _=f.prototype.constructor;for(const C of t){const D=new _(C.length-2);for(let N=2,B=C.length;N<B;N++)D[N-2]=C[N]-C[N-2];S.write(D)}S.close();const T=await new Response(E.readable).arrayBuffer(),R=new Uint8Array(T);return Sb(R)}static async decompressSignature(t){try{const e=q_(t),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,h=0;for await(const C of i)l||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),l.set(C,h),h+=C.length;const d=new Uint32Array(l.buffer,0,l.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=d[2],y=d[3],v=d[4]===0,A=d[5],E=d[6],S=d[7],_=[],T=(zl+Pr*E)*Uint32Array.BYTES_PER_ELEMENT;let R;switch(S){case Int8Array.BYTES_PER_ELEMENT:R=new Int8Array(l.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:R=new Int16Array(l.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:R=new Int32Array(l.buffer,T);break}h=0;for(let C=0;C<E;C++){const D=d[Pr*C+zl],N=new Float32Array(D+2);_.push(N);for(let B=0;B<Pr-1;B++)N[B]=d[Pr*C+zl+B+1];for(let B=0;B<D;B++)N[B+2]=N[B]+R[h++]}return{areContours:v,thickness:A,outlines:_,width:g,height:y}}catch(e){return St(`decompressSignature: ${e}`),null}}}class nf extends t0{constructor(){super(),super.updateProperties({fill:ft._defaultLineColor,"stroke-width":0})}clone(){const t=new nf;return t.updateAll(this),t}}class sf extends lc{constructor(t){super(t),super.updateProperties({stroke:ft._defaultLineColor,"stroke-width":1})}clone(){const t=new sf(this._viewParameters);return t.updateAll(this),t}}class jn extends mt{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=At.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){ft.initialize(t,e),this._defaultDrawingOptions=new nf,this._defaultDrawnSignatureOptions=new sf(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Tt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:o,areContours:l,description:h,uuid:d,heightInPage:f}=this.#i,{rawDims:{pageWidth:g,pageHeight:y},rotation:v}=this.parent.viewport,A=vs.processDrawnLines({lines:a,pageWidth:g,pageHeight:y,rotation:v,innerMargin:jn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(A,f,h,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:a,height:o}=this.#i,l=Math.max(a,o),h=vs.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:i,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,a){const{x:o,y:l}=this,{outline:h}=this.#i=t;this.#t=h instanceof Ed,this.description=i;let d;this.#t?d=jn.getDefaultDrawingOptions():(d=jn._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:d});const[,f]=this.pageDimensions;let g=e/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return vs.process(t,e,i,a,jn._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:a},rotation:o}=this.parent.viewport;return vs.extractContoursFromText(t,e,i,a,o,jn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return vs.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:jn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=jn.getDefaultDrawingOptions():(this._drawingOptions=jn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:e,points:i},o.uuid=this.#n,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,i,a,o,l){return l.areContours?Ed.deserialize(t,e,i,a,o,l):oo.deserialize(t,e,i,a,o,l)}static async deserialize(t,e,i){const a=await super.deserialize(t,e,i);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class ST extends ft{#t=null;#e=null;#i=null;#n=null;#r=null;#s="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=At.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){ft.initialize(t,e)}static isHandlingMimeForPasting(t){return ql.includes(t)}static paste(t,e){e.pasteEditor({mode:At.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,h=await i.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const d=h.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#h(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#r){const i=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=ql.join(",");const e=this._uiManager._signal;this.#i=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,a&&(this.#t=a),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},t)}#p(){const{div:t}=this;let{width:e,height:i}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)e=this.width*a,i=this.height*o;else if(e>l*a||i>l*o){const d=Math.min(l*a/e,l*o/i);e*=d,i*=d}this._uiManager.enableWaiting(!1);const h=this.#a=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),this.width=e/a,this.height=i/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new Ln;let h=this.#t,d=a,f=o,g=null;if(e){if(a>e||o>e){const B=Math.min(e/a,e/o);d=Math.floor(a*B),f=Math.floor(o*B)}g=document.createElement("canvas");const v=g.width=Math.ceil(d*l.sx),A=g.height=Math.ceil(f*l.sy);this.#l||(h=this.#u(v,A));const E=g.getContext("2d");E.filter=this._uiManager.hcmFilter;let S="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":$_.isDarkMode&&(S="#8f8f9d",_="#42414d");const T=15,R=T*l.sx,C=T*l.sy,D=new OffscreenCanvas(R*2,C*2),N=D.getContext("2d");N.fillStyle=S,N.fillRect(0,0,R*2,C*2),N.fillStyle=_,N.fillRect(0,0,R,C),N.fillRect(R,C,R,C),E.fillStyle=E.createPattern(D,"repeat"),E.fillRect(0,0,v,A),E.drawImage(h,0,0,h.width,h.height,0,0,v,A)}let y=null;if(i){let v,A;if(l.symmetric&&h.width<t&&h.height<t)v=h.width,A=h.height;else if(h=this.#t,a>t||o>t){const _=Math.min(t/a,t/o);v=Math.floor(a*_),A=Math.floor(o*_),this.#l||(h=this.#u(v,A))}const S=new OffscreenCanvas(v,A).getContext("2d",{willReadFrequently:!0});S.drawImage(h,0,0,h.width,h.height,0,0,v,A),y={width:v,height:A,data:S.getImageData(0,0,v,A).data}}return{canvas:g,width:d,height:f,imageData:y}}#u(t,e){const{width:i,height:a}=this.#t;let o=i,l=a,h=this.#t;for(;o>2*t||l>2*e;){const d=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(o,l);g.getContext("2d").drawImage(h,0,0,d,f,0,0,o,l),h=g.transferToImageBitmap()}return h}#g(){const[t,e]=this.parentDimensions,{width:i,height:a}=this,o=new Ln,l=Math.ceil(i*t*o.sx),h=Math.ceil(a*e*o.sy),d=this.#a;if(!d||d.width===l&&d.height===h)return;d.width=l,d.height=h;const f=this.#l?this.#t:this.#u(l,h),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,l,h)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,a=Math.round(this.width*e*_s.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*_s.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let a=null,o=!1;if(t instanceof Qb){const{data:{rect:S,rotation:_,id:T,structParent:R,popupRef:C,richText:D,contentsObj:N,creationDate:B,modificationDate:P},container:j,parent:{page:{pageNumber:X}},canvas:Z}=t;let J,lt;Z?(delete t.canvas,{id:J,bitmap:lt}=i.imageManager.getFromCanvas(j.id,Z),Z.remove()):(o=!0,t._hasNoCanvas=!0);const ct=(await e._structTree.getAriaAttributes(`${Ud}${T}`))?.get("aria-label")||"";a=t={annotationType:At.STAMP,bitmapId:J,bitmap:lt,pageIndex:X-1,rect:S.slice(0),rotation:_,annotationElementId:T,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:ct},isSvg:!1,structParent:R,popupRef:C,richText:D,comment:N?.str||null,creationDate:B,modificationDate:P}}const l=await super.deserialize(t,e,i),{rect:h,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:y,accessibilityData:v}=t;o?(i.addMissingCanvas(t.id,l),l.#o=!0):g&&i.imageManager.isValidId(g)?(l.#e=g,d&&(l.#t=d)):l.#n=f,l.#l=y;const[A,E]=l.pageDimensions;return l.width=(h[2]-h[0])/A,l.height=(h[3]-h[1])/E,v&&(l.altTextData=v),l._initialData=a,t.comment&&l.setCommentData(t),l.#d=!!a,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const h=this.#b(i);return h.isSame?null:(h.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;const l=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:i}),i.bitmap=this.#y(!1);else if(this.#l){const h=e.stamps.get(this.#e);l>h.area&&(h.area=l,h.serialized.bitmap.close(),h.serialized.bitmap=this.#y(!1))}return i}#b(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Vn{#t;#e=!1;#i=null;#n=null;#r=null;#s=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#p=-1;#u;static _initialized=!1;static#g=new Map([be,ef,ST,ce,jn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:h,textLayer:d,viewport:f,l10n:g}){const y=[...Vn.#g.values()];if(!Vn._initialized){Vn._initialized=!0;for(const v of y)v.initialize(g,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=e,this.div=i,this.#t=o,this.#i=l,this.viewport=f,this.#h=d,this.drawLayer=h,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===At.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case At.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case At.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case At.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===At.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of Vn.#g.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}get#y(){return this.#s.size!==0?this.#s.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const i of this.#y)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=this.#i;if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const i=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:h,timeStamp:d}=a,f=this.#p;if(d-f>500){this.#p=d;return}this.#p=-1;const{classList:g}=this.div;g.toggle("getElements",!0);const y=document.elementsFromPoint(l,h);if(g.toggle("getElements",!1),!this.div.contains(y[0]))return;let v;const A=new RegExp(`^${Xr}[0-9]+$`);for(const S of y)if(A.test(S.id)){v=S.id;break}if(!v)return;const E=this.#s.get(v);E?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),E.dblclick(a))},{signal:i,capture:!0})}const t=this.#i;if(t){const i=new Map,a=new Map;for(const l of this.#y){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){i.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:h}=l.data;if(this.#u.isDeletedAnnotationElement(h)){l.updateEdited({deleted:!0});continue}let d=a.get(h);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=i.get(h),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const i of Vn.#g.values())e.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#b.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#b(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:i}=Se.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ce.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),ft.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of this.#s.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#v(){return Vn.#g.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#T(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:i,offsetY:a}=this.#_(),o=this.getNextId(),l=this.#T({parent:this,id:o,x:i,y:a,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await Vn.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,i={}){const a=this.getNextId(),o=this.#T({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...i});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#_(){const{x:t,y:e,width:i,height:a}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),h=Math.min(window.innerWidth,t+i),d=Math.min(window.innerHeight,e+a),f=(o+h)/2-t,g=(l+d)/2-e,[y,v]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:v}}addNewEditor(t={}){this.createAndAddNewEditor(this.#_(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Se.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#u.getMode();if(i===At.STAMP||i===At.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===At.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=Se.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const i=this.#u.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,i){const a=this.#u.findParent(e,i);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Wi(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Wi(this.div,{rotation:i}),e!==i)for(const a of this.#s.values())a.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Ae{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Tt(this,"_svgFactory",new Qr)}static#r(t,[e,i,a,o]){const{style:l}=t;l.top=`${100*i}%`,l.left=`${100*e}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#s(){const t=Ae._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const i=Ae._svgFactory.createElement("clipPath");t.append(i);const a=`clip_${e}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const o=Ae._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a}#o(t,e){for(const[i,a]of Object.entries(e))a===null?t.removeAttribute(i):t.setAttribute(i,a)}draw(t,e=!1,i=!1){const a=Ae.#n++,o=this.#s(),l=Ae._svgFactory.createElement("defs");o.append(l);const h=Ae._svgFactory.createElement("path");l.append(h);const d=`path_p${this.pageIndex}_${a}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(a,h);const f=i?this.#a(l,d):null,g=Ae._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,e){const i=Ae.#n++,a=this.#s(),o=Ae._svgFactory.createElement("defs");a.append(o);const l=Ae._svgFactory.createElement("path");o.append(l);const h=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",h),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const y=Ae._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${i}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const v=Ae._svgFactory.createElement("rect");y.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const A=Ae._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${h}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=Ae._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${h}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return a.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(i,a),i}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:a,rootClass:o,path:l}=e,h=typeof t=="number"?this.#e.get(t):t;if(h){if(i&&this.#o(h,i),a&&Ae.#r(h,a),o){const{classList:d}=h;for(const[f,g]of Object.entries(o))d.toggle(f,g)}if(l){const f=h.firstChild.firstChild;this.#o(f,l)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Ad};globalThis.pdfjsLib={AbortException:gi,AnnotationEditorLayer:Vn,AnnotationEditorParamsType:Lt,AnnotationEditorType:At,AnnotationEditorUIManager:mi,AnnotationLayer:tf,AnnotationMode:qn,AnnotationType:le,applyOpacity:Cb,build:Xb,ColorPicker:ln,createValidAbsoluteUrl:Pd,CSSConstants:Tb,DOMSVGFactory:Qr,DrawLayer:Ae,FeatureTest:Se,fetchData:Ba,findContrastColor:xb,getDocument:$d,getFilenameFromUrl:Eb,getPdfFilenameFromUrl:_b,getRGB:Pa,getUuid:Fd,getXfaPageViewport:wb,GlobalWorkerOptions:Ki,ImageKind:Hr,InvalidPDFException:Gl,isDataScheme:io,isPdfFile:rc,isValidExplicitDest:Ob,MathClamp:ke,noContextMenu:un,normalizeUnicode:Ab,OPS:Ma,OutputScale:Ln,PasswordResponses:vb,PDFDataRangeTransport:Wd,PDFDateString:Vl,PDFWorker:Da,PermissionFlag:yb,PixelsPerInch:_s,RenderingCancelledException:ac,renderRichText:Hd,ResponseException:Yr,setLayerDimensions:Wi,shadow:Tt,SignatureExtractor:vs,stopEvent:ne,SupportedImageMimeTypes:ql,TextLayer:Kr,TouchManager:ao,updateUrlHash:zd,Util:nt,VerbosityLevel:to,version:Qd,XfaLayer:Id};const ET=Object.freeze(Object.defineProperty({__proto__:null,AbortException:gi,AnnotationEditorLayer:Vn,AnnotationEditorParamsType:Lt,AnnotationEditorType:At,AnnotationEditorUIManager:mi,AnnotationLayer:tf,AnnotationMode:qn,AnnotationType:le,CSSConstants:Tb,ColorPicker:ln,DOMSVGFactory:Qr,DrawLayer:Ae,FeatureTest:Se,GlobalWorkerOptions:Ki,ImageKind:Hr,InvalidPDFException:Gl,MathClamp:ke,OPS:Ma,OutputScale:Ln,PDFDataRangeTransport:Wd,PDFDateString:Vl,PDFWorker:Da,PasswordResponses:vb,PermissionFlag:yb,PixelsPerInch:_s,RenderingCancelledException:ac,ResponseException:Yr,SignatureExtractor:vs,SupportedImageMimeTypes:ql,TextLayer:Kr,TouchManager:ao,Util:nt,VerbosityLevel:to,XfaLayer:Id,applyOpacity:Cb,build:Xb,createValidAbsoluteUrl:Pd,fetchData:Ba,findContrastColor:xb,getDocument:$d,getFilenameFromUrl:Eb,getPdfFilenameFromUrl:_b,getRGB:Pa,getUuid:Fd,getXfaPageViewport:wb,isDataScheme:io,isPdfFile:rc,isValidExplicitDest:Ob,noContextMenu:un,normalizeUnicode:Ab,renderRichText:Hd,setLayerDimensions:Wi,shadow:Tt,stopEvent:ne,updateUrlHash:zd,version:Qd},Symbol.toStringTag,{value:"Module"}));function e0(c){var t,e,i="";if(typeof c=="string"||typeof c=="number")i+=c;else if(typeof c=="object")if(Array.isArray(c)){var a=c.length;for(t=0;t<a;t++)c[t]&&(e=e0(c[t]))&&(i&&(i+=" "),i+=e)}else for(e in c)c[e]&&(i&&(i+=" "),i+=e);return i}function cc(){for(var c,t,e=0,i="",a=arguments.length;e<a;e++)(c=arguments[e])&&(t=e0(c))&&(i&&(i+=" "),i+=t);return i}var fv=Object.prototype.hasOwnProperty;function pv(c,t,e){for(e of c.keys())if(Ca(e,t))return e}function Ca(c,t){var e,i,a;if(c===t)return!0;if(c&&t&&(e=c.constructor)===t.constructor){if(e===Date)return c.getTime()===t.getTime();if(e===RegExp)return c.toString()===t.toString();if(e===Array){if((i=c.length)===t.length)for(;i--&&Ca(c[i],t[i]););return i===-1}if(e===Set){if(c.size!==t.size)return!1;for(i of c)if(a=i,a&&typeof a=="object"&&(a=pv(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(c.size!==t.size)return!1;for(i of c)if(a=i[0],a&&typeof a=="object"&&(a=pv(t,a),!a)||!Ca(i[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)c=new Uint8Array(c),t=new Uint8Array(t);else if(e===DataView){if((i=c.byteLength)===t.byteLength)for(;i--&&c.getInt8(i)===t.getInt8(i););return i===-1}if(ArrayBuffer.isView(c)){if((i=c.byteLength)===t.byteLength)for(;i--&&c[i]===t[i];);return i===-1}if(!e||typeof c=="object"){i=0;for(e in c)if(fv.call(c,e)&&++i&&!fv.call(t,e)||!(e in t)||!Ca(c[e],t[e]))return!1;return Object.keys(t).length===i}}return c!==c&&t!==t}function lo(c){let t=!1;return{promise:new Promise((i,a)=>{c.then(o=>!t&&i(o)).catch(o=>!t&&a(o))}),cancel(){t=!0}}}const _T=["onCopy","onCut","onPaste"],wT=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],TT=["onFocus","onBlur"],CT=["onInput","onInvalid","onReset","onSubmit"],xT=["onLoad","onError"],RT=["onKeyDown","onKeyPress","onKeyUp"],MT=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],DT=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],OT=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],LT=["onSelect"],NT=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],kT=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],BT=["onScroll"],PT=["onWheel"],zT=["onAnimationStart","onAnimationEnd","onAnimationIteration"],FT=["onTransitionEnd"],UT=["onToggle"],IT=["onChange"],HT=[..._T,...wT,...TT,...CT,...xT,...RT,...MT,...DT,...OT,...LT,...NT,...kT,...BT,...PT,...zT,...FT,...IT,...UT];function n0(c,t){const e={};for(const i of HT){const a=c[i];a&&(t?e[i]=(o=>a(o,t(i))):e[i]=a)}return e}var jT="Invariant failed";function Yt(c,t){if(!c)throw new Error(jT)}var id,gv;function GT(){if(gv)return id;gv=1;var c=function(){};return id=c,id}var VT=GT();const Be=Zr(VT),i0=x.createContext(null),qT="noopener noreferrer nofollow";class XT{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Yt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Yt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,i){t.href=e,t.rel=this.externalLinkRel||qT,t.target=i?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{Yt(this.pdfDocument),Yt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Yt(Array.isArray(e));const i=e[0];new Promise(a=>{Yt(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(o=>{a(o)}).catch(()=>{Yt(!1)}):typeof i=="number"?a(i):Yt(!1)}).then(a=>{const o=a+1;Yt(this.pdfViewer),Yt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:o})})})}goToPage(t){const e=t-1;Yt(this.pdfViewer),Yt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function xa({children:c,type:t}){return W.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:c})}const mv={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function YT(c,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return c}}function Oa(){return x.useReducer(YT,{value:void 0,error:void 0})}const uc=typeof window<"u",s0=uc&&window.location.protocol==="file:";function $T(c){return typeof c<"u"}function ms(c){return $T(c)&&c!==null}function KT(c){return typeof c=="string"}function WT(c){return c instanceof ArrayBuffer}function QT(c){return Yt(uc),c instanceof Blob}function _d(c){return KT(c)&&/^data:/.test(c)}function yv(c){Yt(_d(c));const[t="",e=""]=c.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function ZT(){return uc&&window.devicePixelRatio||1}const a0="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function vv(){Be(!s0,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${a0}`)}function JT(){Be(!s0,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${a0}`)}function Ts(c){c?.cancel&&c.cancel()}function wd(c,t){return Object.defineProperty(c,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(c,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(c,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(c,"originalHeight",{get(){return this.view[3]},configurable:!0}),c}function tC(c){return c.name==="RenderingCancelledException"}function eC(c){return new Promise((t,e)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return e(new Error("Error while reading a file."));t(i.result)},i.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},i.readAsArrayBuffer(c)})}const{PDFDataRangeTransport:nC}=ET,iC=(c,t)=>{switch(t){case mv.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");c(e);break}case mv.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");c(e);break}}};function bv(c){return typeof c=="object"&&c!==null&&("data"in c||"range"in c||"url"in c)}const sC=x.forwardRef(function({children:t,className:e,error:i="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:h,imageResourcesPath:d,loading:f="Loading PDF",noData:g="No PDF file specified.",onItemClick:y,onLoadError:v,onLoadProgress:A,onLoadSuccess:E,onPassword:S=iC,onSourceError:_,onSourceSuccess:T,options:R,renderMode:C,rotate:D,scale:N,...B},P){const[j,X]=Oa(),{value:Z,error:J}=j,[lt,ct]=Oa(),{value:at,error:pt}=lt,L=x.useRef(new XT),H=x.useRef([]),Q=x.useRef(void 0),ut=x.useRef(void 0);l&&l!==Q.current&&bv(l)&&(Be(!Ca(l,Q.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Q.current=l),R&&R!==ut.current&&(Be(!Ca(R,ut.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ut.current=R);const yt=x.useRef({scrollPageIntoView:Ct=>{const{dest:xt,pageNumber:vt,pageIndex:Kt=vt-1}=Ct;if(y){y({dest:xt,pageIndex:Kt,pageNumber:vt});return}const hn=H.current[Kt];if(hn){hn.scrollIntoView();return}Be(!1,`An internal link leading to page ${vt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});x.useImperativeHandle(P,()=>({linkService:L,pages:H,viewer:yt}),[]);function O(){T&&T()}function G(){J&&(Be(!1,J.toString()),_&&_(J))}function K(){X({type:"RESET"})}x.useEffect(K,[l,X]);const tt=x.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return _d(l)?{data:yv(l)}:(vv(),{url:l});if(l instanceof nC)return{range:l};if(WT(l))return{data:l};if(uc&&QT(l))return{data:await eC(l)};if(Yt(typeof l=="object"),Yt(bv(l)),"url"in l&&typeof l.url=="string"){if(_d(l.url)){const{url:Ct,...xt}=l;return{data:yv(Ct),...xt}}vv()}return l},[l]);x.useEffect(()=>{const Ct=lo(tt());return Ct.promise.then(xt=>{X({type:"RESOLVE",value:xt})}).catch(xt=>{X({type:"REJECT",error:xt})}),()=>{Ts(Ct)}},[tt,X]),x.useEffect(()=>{if(!(typeof Z>"u")){if(Z===!1){G();return}O()}},[Z]);function it(){at&&(E&&E(at),H.current=new Array(at.numPages),L.current.setDocument(at))}function ht(){pt&&(Be(!1,pt.toString()),v&&v(pt))}x.useEffect(function(){ct({type:"RESET"})},[ct,Z]),x.useEffect(function(){if(!Z)return;const xt=R?{...Z,...R}:Z,vt=$d(xt);A&&(vt.onProgress=A),S&&(vt.onPassword=S);const Kt=vt,hn=Kt.promise.then(vi=>{ct({type:"RESOLVE",value:vi})}).catch(vi=>{Kt.destroyed||ct({type:"REJECT",error:vi})});return()=>{hn.finally(()=>Kt.destroy())}},[R,ct,Z]),x.useEffect(()=>{if(!(typeof at>"u")){if(at===!1){ht();return}it()}},[at]),x.useEffect(function(){L.current.setViewer(yt.current),L.current.setExternalLinkRel(a),L.current.setExternalLinkTarget(o)},[a,o]);const ot=x.useCallback((Ct,xt)=>{H.current[Ct]=xt},[]),Ht=x.useCallback(Ct=>{delete H.current[Ct]},[]),_t=x.useMemo(()=>({imageResourcesPath:d,linkService:L.current,onItemClick:y,pdf:at,registerPage:ot,renderMode:C,rotate:D,scale:N,unregisterPage:Ht}),[d,y,at,ot,C,D,N,Ht]),Bt=x.useMemo(()=>n0(B,()=>at),[B,at]);function Oe(){function Ct(vt){return!!vt?.pdf}if(!Ct(_t))throw new Error("pdf is undefined");const xt=typeof t=="function"?t(_t):t;return W.jsx(i0.Provider,{value:_t,children:xt})}function Le(){return l?at==null?W.jsx(xa,{type:"loading",children:typeof f=="function"?f():f}):at===!1?W.jsx(xa,{type:"error",children:typeof i=="function"?i():i}):Oe():W.jsx(xa,{type:"no-data",children:typeof g=="function"?g():g})}return W.jsx("div",{className:cc("react-pdf__Document",e),ref:h,...Bt,children:Le()})});function r0(){return x.useContext(i0)}function o0(){for(var c=[],t=0;t<arguments.length;t++)c[t]=arguments[t];var e=c.filter(Boolean);if(e.length<=1){var i=e[0];return i||null}return function(o){for(var l=0,h=e;l<h.length;l++){var d=h[l];typeof d=="function"?d(o):d&&(d.current=o)}}}const l0=x.createContext(null);function hc(){return x.useContext(l0)}function aC(){const c=r0(),t=hc();Yt(t);const e={...c,...t},{imageResourcesPath:i,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:d,page:f,pdf:g,renderForms:y,rotate:v,scale:A=1}=e;Yt(g),Yt(f),Yt(a);const[E,S]=Oa(),{value:_,error:T}=E,R=x.useRef(null);Be(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){_&&l&&l(_)}function D(){T&&(Be(!1,T.toString()),o&&o(T))}x.useEffect(function(){S({type:"RESET"})},[S,f]),x.useEffect(function(){if(!f)return;const X=lo(f.getAnnotations()),Z=X;return X.promise.then(J=>{S({type:"RESOLVE",value:J})}).catch(J=>{S({type:"REJECT",error:J})}),()=>{Ts(Z)}},[S,f]),x.useEffect(()=>{if(_!==void 0){if(_===!1){D();return}C()}},[_]);function N(){d&&d()}function B(j){Be(!1,`${j}`),h&&h(j)}const P=x.useMemo(()=>f.getViewport({scale:A,rotation:v}),[f,v,A]);return x.useEffect(function(){if(!g||!f||!a||!_)return;const{current:X}=R;if(!X)return;const Z=P.clone({dontFlip:!0}),J={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:g.annotationStorage,commentManager:null,div:X,l10n:null,linkService:a,page:f,structTreeLayer:null,viewport:Z},lt={annotations:_,annotationStorage:g.annotationStorage,div:X,imageResourcesPath:i,linkService:a,page:f,renderForms:y,viewport:Z};X.innerHTML="";try{new tf(J).render(lt),N()}catch(ct){B(ct)}return()=>{}},[_,i,a,f,g,y,P]),W.jsx("div",{className:cc("react-pdf__Page__annotations","annotationLayer"),ref:R})}const c0={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},rC=/^H(\d+)$/;function oC(c){return c in c0}function dc(c){return"children"in c}function u0(c){return dc(c)?c.children.length===1&&0 in c.children&&"id"in c.children[0]:!1}function lC(c){const t={};if(dc(c)){const{role:e}=c,i=e.match(rC);if(i)t.role="heading",t["aria-level"]=Number(i[1]);else if(oC(e)){const a=c0[e];a&&(t.role=a)}}return t}function h0(c){const t={};if(dc(c)){if(c.alt!==void 0&&(t["aria-label"]=c.alt),c.lang!==void 0&&(t.lang=c.lang),u0(c)){const[e]=c.children;if(e){const i=h0(e);return{...t,...i}}}}else"id"in c&&(t["aria-owns"]=c.id);return t}function cC(c){return c?{...lC(c),...h0(c)}:null}function d0({className:c,node:t}){const e=x.useMemo(()=>cC(t),[t]),i=x.useMemo(()=>!dc(t)||u0(t)?null:t.children.map((a,o)=>W.jsx(d0,{node:a},o)),[t]);return W.jsx("span",{className:c,...e,children:i})}function uC(){const c=hc();Yt(c);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=c,[i,a]=Oa(),{value:o,error:l}=i,{customTextRenderer:h,page:d}=c;function f(){o&&e&&e(o)}function g(){l&&(Be(!1,l.toString()),t&&t(l))}return x.useEffect(function(){a({type:"RESET"})},[a,d]),x.useEffect(function(){if(h||!d)return;const v=lo(d.getStructTree()),A=v;return v.promise.then(E=>{a({type:"RESOLVE",value:E})}).catch(E=>{a({type:"REJECT",error:E})}),()=>Ts(A)},[h,d,a]),x.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}f()}},[o]),o?W.jsx(d0,{className:"react-pdf__Page__structTree structTree",node:o}):null}const Av=qn;function hC(c){const t=hc();Yt(t);const e={...t,...c},{_className:i,canvasBackground:a,devicePixelRatio:o=ZT(),onRenderError:l,onRenderSuccess:h,page:d,renderForms:f,renderTextLayer:g,rotate:y,scale:v}=e,{canvasRef:A}=c;Yt(d);const E=x.useRef(null);function S(){d&&h&&h(wd(d,v))}function _(D){tC(D)||(Be(!1,D.toString()),l&&l(D))}const T=x.useMemo(()=>d.getViewport({scale:v*o,rotation:y}),[o,d,y,v]),R=x.useMemo(()=>d.getViewport({scale:v,rotation:y}),[d,y,v]);x.useEffect(function(){if(!d)return;d.cleanup();const{current:N}=E;if(!N)return;N.width=T.width,N.height=T.height,N.style.width=`${Math.floor(R.width)}px`,N.style.height=`${Math.floor(R.height)}px`,N.style.visibility="hidden";const B={annotationMode:f?Av.ENABLE_FORMS:Av.ENABLE,canvas:N,canvasContext:N.getContext("2d",{alpha:!1}),viewport:T};a&&(B.background=a);const P=d.render(B),j=P;return P.promise.then(()=>{N.style.visibility="",S()}).catch(_),()=>Ts(j)},[a,d,f,T,R]);const C=x.useCallback(()=>{const{current:D}=E;D&&(D.width=0,D.height=0)},[]);return x.useEffect(()=>C,[C]),W.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:o0(A,E),style:{display:"block",userSelect:"none"},children:g?W.jsx(uC,{}):null})}function dC(c){return"str"in c}function fC(){const c=hc();Yt(c);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:i,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:l,pageIndex:h,pageNumber:d,rotate:f,scale:g}=c;Yt(l);const[y,v]=Oa(),{value:A,error:E}=y,S=x.useRef(null);Be(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function _(){A&&i&&i(A)}function T(){E&&(Be(!1,E.toString()),e&&e(E))}x.useEffect(function(){v({type:"RESET"})},[l,v]),x.useEffect(function(){if(!l)return;const j=lo(l.getTextContent()),X=j;return j.promise.then(Z=>{v({type:"RESOLVE",value:Z})}).catch(Z=>{v({type:"REJECT",error:Z})}),()=>Ts(X)},[l,v]),x.useEffect(()=>{if(A!==void 0){if(A===!1){T();return}_()}},[A]);const R=x.useCallback(()=>{o&&o()},[o]),C=x.useCallback(P=>{Be(!1,P.toString()),a&&a(P)},[a]);function D(){const P=S.current;P&&P.classList.add("selecting")}function N(){const P=S.current;P&&P.classList.remove("selecting")}const B=x.useMemo(()=>l.getViewport({scale:g,rotation:f}),[l,f,g]);return x.useLayoutEffect(function(){if(!l||!A)return;const{current:j}=S;if(!j)return;j.innerHTML="";const X=l.streamTextContent({includeMarkedContent:!0}),Z={container:j,textContentSource:X,viewport:B},J=new Kr(Z),lt=J;return J.render().then(()=>{const ct=document.createElement("div");ct.className="endOfContent",j.append(ct);const at=j.querySelectorAll('[role="presentation"]');if(t){let pt=0;A.items.forEach((L,H)=>{if(!dC(L))return;const Q=at[pt];if(!Q)return;const ut=t({pageIndex:h,pageNumber:d,itemIndex:H,...L});Q.innerHTML=ut,pt+=L.str&&L.hasEOL?2:1})}R()}).catch(C),()=>Ts(lt)},[t,C,R,l,h,d,A,B]),W.jsx("div",{className:cc("react-pdf__Page__textContent","textLayer"),onMouseUp:N,onMouseDown:D,ref:S})}const Sv=1;function pC(c){const e={...r0(),...c},{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:l,children:h,className:d,customRenderer:f,customTextRenderer:g,devicePixelRatio:y,error:v="Failed to load the page.",height:A,inputRef:E,loading:S="Loading page",noData:_="No page specified.",onGetAnnotationsError:T,onGetAnnotationsSuccess:R,onGetStructTreeError:C,onGetStructTreeSuccess:D,onGetTextError:N,onGetTextSuccess:B,onLoadError:P,onLoadSuccess:j,onRenderAnnotationLayerError:X,onRenderAnnotationLayerSuccess:Z,onRenderError:J,onRenderSuccess:lt,onRenderTextLayerError:ct,onRenderTextLayerSuccess:at,pageIndex:pt,pageNumber:L,pdf:H,registerPage:Q,renderAnnotationLayer:ut=!0,renderForms:yt=!1,renderMode:O="canvas",renderTextLayer:G=!0,rotate:K,scale:tt=Sv,unregisterPage:it,width:ht,...ot}=e,[Ht,_t]=Oa(),{value:Bt,error:Oe}=Ht,Le=x.useRef(null);Yt(H);const Ct=ms(L)?L-1:pt??null,xt=L??(ms(pt)?pt+1:null),vt=K??(Bt?Bt.rotate:null),Kt=x.useMemo(()=>{if(!Bt)return null;let Tn=1;const Cn=tt??Sv;if(ht||A){const Nn=Bt.getViewport({scale:1,rotation:vt});ht?Tn=ht/Nn.width:A&&(Tn=A/Nn.height)}return Cn*Tn},[A,Bt,vt,tt,ht]);x.useEffect(function(){return()=>{ms(Ct)&&a&&it&&it(Ct)}},[a,H,Ct,it]);function hn(){if(j){if(!Bt||!Kt)return;j(wd(Bt,Kt))}if(a&&Q){if(!ms(Ct)||!Le.current)return;Q(Ct,Le.current)}}function vi(){Oe&&(Be(!1,Oe.toString()),P&&P(Oe))}x.useEffect(function(){_t({type:"RESET"})},[_t,H,Ct]),x.useEffect(function(){if(!H||!xt)return;const Cn=lo(H.getPage(xt)),Nn=Cn;return Cn.promise.then(Ds=>{_t({type:"RESOLVE",value:Ds})}).catch(Ds=>{_t({type:"REJECT",error:Ds})}),()=>Ts(Nn)},[_t,H,xt]),x.useEffect(()=>{if(Bt!==void 0){if(Bt===!1){vi();return}hn()}},[Bt,Kt]);const Qi=x.useMemo(()=>ms(Ct)&&xt&&ms(vt)&&ms(Kt)?{_className:i,canvasBackground:o,customTextRenderer:g,devicePixelRatio:y,onGetAnnotationsError:T,onGetAnnotationsSuccess:R,onGetStructTreeError:C,onGetStructTreeSuccess:D,onGetTextError:N,onGetTextSuccess:B,onRenderAnnotationLayerError:X,onRenderAnnotationLayerSuccess:Z,onRenderError:J,onRenderSuccess:lt,onRenderTextLayerError:ct,onRenderTextLayerSuccess:at,page:Bt,pageIndex:Ct,pageNumber:xt,renderForms:yt,renderTextLayer:G,rotate:vt,scale:Kt}:null,[i,o,g,y,T,R,C,D,N,B,X,Z,J,lt,ct,at,Bt,Ct,xt,yt,G,vt,Kt]),za=x.useMemo(()=>n0(ot,()=>Bt&&(Kt?wd(Bt,Kt):void 0)),[ot,Bt,Kt]),bi=`${Ct}@${Kt}/${vt}`;function pc(){switch(O){case"custom":return Yt(f),W.jsx(f,{},`${bi}_custom`);case"none":return null;case"canvas":default:return W.jsx(hC,{canvasRef:l},`${bi}_canvas`)}}function gc(){return G?W.jsx(fC,{},`${bi}_text`):null}function Pe(){return ut?W.jsx(aC,{},`${bi}_annotations`):null}function mc(){function Tn(Nn){return!!Nn?.page}if(!Tn(Qi))throw new Error("page is undefined");const Cn=typeof h=="function"?h(Qi):h;return W.jsxs(l0.Provider,{value:Qi,children:[pc(),gc(),Pe(),Cn]})}function co(){return xt?H===null||Bt===void 0||Bt===null?W.jsx(xa,{type:"loading",children:typeof S=="function"?S():S}):H===!1||Bt===!1?W.jsx(xa,{type:"error",children:typeof v=="function"?v():v}):mc():W.jsx(xa,{type:"no-data",children:typeof _=="function"?_():_})}return W.jsx("div",{className:cc(i,d),"data-page-number":xt,ref:o0(E,Le),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Kt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...za,children:co()})}JT();Ki.workerSrc="pdf.worker.mjs";var f0={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ev=De.createContext&&De.createContext(f0),gC=["attr","size","title"];function mC(c,t){if(c==null)return{};var e=yC(c,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(c);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(c,i)&&(e[i]=c[i])}return e}function yC(c,t){if(c==null)return{};var e={};for(var i in c)if(Object.prototype.hasOwnProperty.call(c,i)){if(t.indexOf(i)>=0)continue;e[i]=c[i]}return e}function Yl(){return Yl=Object.assign?Object.assign.bind():function(c){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(c[i]=e[i])}return c},Yl.apply(this,arguments)}function _v(c,t){var e=Object.keys(c);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(c);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),e.push.apply(e,i)}return e}function $l(c){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?_v(Object(e),!0).forEach(function(i){vC(c,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(e)):_v(Object(e)).forEach(function(i){Object.defineProperty(c,i,Object.getOwnPropertyDescriptor(e,i))})}return c}function vC(c,t,e){return t=bC(t),t in c?Object.defineProperty(c,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):c[t]=e,c}function bC(c){var t=AC(c,"string");return typeof t=="symbol"?t:t+""}function AC(c,t){if(typeof c!="object"||!c)return c;var e=c[Symbol.toPrimitive];if(e!==void 0){var i=e.call(c,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(c)}function p0(c){return c&&c.map((t,e)=>De.createElement(t.tag,$l({key:e},t.attr),p0(t.child)))}function fc(c){return t=>De.createElement(SC,Yl({attr:$l({},c.attr)},t),p0(c.child))}function SC(c){var t=e=>{var{attr:i,size:a,title:o}=c,l=mC(c,gC),h=a||e.size||"1em",d;return e.className&&(d=e.className),c.className&&(d=(d?d+" ":"")+c.className),De.createElement("svg",Yl({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,l,{className:d,style:$l($l({color:c.color||e.color},e.style),c.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&De.createElement("title",null,o),c.children)};return Ev!==void 0?De.createElement(Ev.Consumer,null,e=>t(e)):t(f0)}function EC(c){return fc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(c)}function _C(c){return fc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(c)}function wC(c){return fc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(c)}function TC(c){return fc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(c)}Ki.workerSrc=`//unpkg.com/pdfjs-dist@${Qd}/build/pdf.worker.min.mjs`;function CC({darkMode:c}){const[t,e]=x.useState(0),i="/portfolio-website/resume.pdf";function a({numPages:o}){e(o)}return W.jsxs("div",{className:`resume-container ${c?"dark":""}`,children:[W.jsx("a",{href:i,download:!0,className:"resume-download-link",title:"Download PDF",children:W.jsx(_C,{className:"download-icon"})}),W.jsx("div",{className:`resume-pdf-container ${c?"dark":""}`,children:W.jsx(sC,{file:i,onLoadSuccess:a,className:"resume-document",children:Array.from(new Array(t),(o,l)=>W.jsx("div",{className:"resume-page-wrapper",children:W.jsx(pC,{pageNumber:l+1,renderTextLayer:!0,renderAnnotationLayer:!1})},`page_${l+1}`))})})]})}function xC(){const[c,t]=x.useState(!1);return x.useEffect(()=>{document.body.className=c?"bg-dark text-white":""},[c]),W.jsxs(W.Fragment,{children:[W.jsxs("div",{className:"header-row",children:[W.jsxs("div",{className:"brand-toggle-group",children:[W.jsx("button",{onClick:()=>t(!c),className:"dark-mode-toggle",children:c?W.jsx(TC,{}):W.jsx(wC,{})}),W.jsx("img",{src:"https://media.licdn.com/dms/image/v2/C4E03AQF5Rm5ONbgHFQ/profile-displayphoto-shrink_400_400/profile-displayphoto-shrink_400_400/0/1602294599941?e=1765411200&v=beta&t=2V4q9GXpzSh5iTLYDpr0cyvOa-b8HbJe7lPeq6xvn1s",alt:"Kevin Lee",className:"profile-photo",onError:e=>{e.currentTarget.style.display="none"}}),W.jsx(B_,{}),W.jsx("a",{href:"https://www.linkedin.com/in/kevin-lee-x/",target:"_blank",rel:"noopener noreferrer",className:"social-link",children:W.jsx(EC,{})})]}),W.jsx(N_,{darkMode:c})]}),W.jsxs(LE,{children:[W.jsx(ad,{path:"/",element:W.jsx(k_,{})}),W.jsx(ad,{path:"/resume",element:W.jsx(CC,{darkMode:c})})," "]})]})}YE.createRoot(document.getElementById("root")).render(W.jsxs(UE,{basename:"/portfolio-website",children:[" ",W.jsx(xC,{})]}));
